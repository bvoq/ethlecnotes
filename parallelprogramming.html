<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        Parallel programming notes - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/github-gist.min.css" integrity="sha256-tAflq+ymku3Khs+I/WcAneIlafYgDiOQ9stIHH985Wo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/emojify.js/1.1.0/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400italic,600,600italic,300italic,300|Source+Serif+Pro|Source+Code+Pro:400,300,500&subset=latin,latin-ext);.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\A0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.markdown-body kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram{text-align:center;background-color:inherit;border-radius:0;white-space:inherit}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.MJX_Assistive_MathML{display:none}.ui-infobar{position:relative;z-index:2;max-width:758px;margin-top:25px;margin-bottom:-25px;color:#777}.ui-toc{position:fixed;bottom:20px;z-index:10000}.ui-toc-label{opacity:.3;background-color:#ccc;border:none;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:23px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child > ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,Hiragino Kaku Gothic Pro,\\30D2\30E9\30AE\30CE\89D2\30B4 Pro W3,Osaka,Meiryo,\\30E1\30A4\30EA\30AA,MS Gothic,"\FF2D\FF33   \30B4\30B7\30C3\30AF",sans-serif}.ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,"\FF2D\FF33   \FF30\30B4\30B7\30C3\30AF",sans-serif}.markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,PingFang TC,Microsoft JhengHei,\\5FAE\8EDF\6B63\9ED1,sans-serif}.ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,\\5FAE\8EDF\6B63\9ED1UI,sans-serif}.markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Microsoft YaHei,\\5FAE\8F6F\96C5\9ED1,sans-serif}.ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,\\5FAE\8F6F\96C5\9ED1UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:3px;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:contain}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.unselectable{-moz-user-select:none;-webkit-user-select:none;-o-user-select:none;user-select:none}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;font-family:Source Sans Pro,Helvetica,Arial,sans-serif;letter-spacing:.025em}.focus,:focus{outline:none!important}::-moz-focus-inner{border:0!important}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid"><h1 id="parallel-programming-notes"><a class="anchor hidden-xs" href="#parallel-programming-notes" title="parallel-programming-notes"><span class="octicon octicon-link"></span></a>Parallel programming notes</h1><p><strong>Task</strong><br>
Jobs that have to. be run (actual lines of codes). These can be dynamically scheduled to various threads.</p><p><strong>Thread</strong><br>
A thread is a scheduling concept, it’s what the CPU actually ‘runs’ (you don’t run a process). A process needs at least one thread that the CPU/OS executes.</p><p><strong>Process</strong><br>
A process is data organizational concept. Resources (e.g. memory for holding state, allowed address space, etc) are allocated for a process (State space diagrams also use the notation for ).</p><p><strong>Pipelining</strong><br>
<img src="https://i.imgur.com/cJftH9q.png" alt=""></p><p>Latency (upper-bound for unbound pipelines):<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><merror><mtext>#of&amp;#xA0;stages&amp;#xA0;*&amp;#xA0;max(computationtime(stages))</mtext></merror></math>" role="presentation" style="position: relative;"><span class="math" id="MathJax-Span-1" aria-hidden="true"><span class="noError" id="MathJax-Span-2" style="display: inline-block;">#of&nbsp;stages&nbsp;*&nbsp;max(computationtime(stages))</span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><merror><mtext>#of&nbsp;stages&nbsp;*&nbsp;max(computationtime(stages))</mtext></merror></math></span></span><script type="math/tex" id="MathJax-Element-1">#of stages * max(computationtime(stages))</script></span></p><p>Throughput (Igores lead-in, lead-out):<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><mn>1</mn><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=&quot;false&quot;>(</mo><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy=&quot;false&quot;>(</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>s</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3" style="width: 6.765em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.535em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.181em, 1005.535em, 2.871em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-4"><span class="mfrac" id="MathJax-Span-5"><span style="display: inline-block; position: relative; width: 5.279em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.259em, 4.152em, -999.997em); top: -4.403em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-6" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1005.126em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -2.559em;"><span class="mrow" id="MathJax-Span-7"><span class="mi" id="MathJax-Span-8" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span><span class="mi" id="MathJax-Span-9" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-10" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-11" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-12" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-13" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-14" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">m</span><span class="mi" id="MathJax-Span-15" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">e</span><span class="mo" id="MathJax-Span-16" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-17" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">s</span><span class="mi" id="MathJax-Span-18" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-19" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-20" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">g</span><span class="mi" id="MathJax-Span-21" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-22" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-23" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-24" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1005.279em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 5.279em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>1</mn><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy="false">(</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>s</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-2">\frac{1}{max(time(stages))}</script></span></p><p><strong>Unbalanced pipeline</strong>:<br>
<img src="https://i.imgur.com/01N35dF.png" alt=""><br>
<strong>Balanced pipeline</strong> by waiting between stages.<br>
<img src="https://i.imgur.com/WAUbYAH.png" alt=""><br>
<strong>Split up certain stages</strong> into multiple stages.<br>
For example instead of having 1 washing machine, you could first put clothes in washing machine A and then put clothes in washing machine B. While washing machine B is going, you can add more clothes into washing machine A.<br>
<img src="https://i.imgur.com/H8STbCG.png" alt=""></p><p>Throwing an exception within a synchronized block which is not handled within the block, will lead to the thread immediately releasing the lock and accessing the exception table.</p><p><strong>Implicit parallelism</strong><br>
Obvious parallelism, stuff that the compiler could’ve optimised himself.</p><p><strong>Explicit parallelism</strong> Stuff you point out.</p><p><strong>Concurrency</strong>:<br>
<img src="https://i.imgur.com/t0rSlIA.png" alt=""><br>
<strong>Distributed programming</strong>:<br>
Concern itself with multiple systems, different domains, physical seperation, etc.<br>
Biggest difference: Not one shared memory, but instead each CPU has its own thread.<br>
Fault tolerance: If a Thread dies while still having the monitor, others cannot take the lock. Also distributed programming focuses more on hardware side: Multiple memories for multiple CPUs, instead of shared memory.</p><p><img src="https://i.imgur.com/Vy4SFnO.png" alt=""></p><p><strong>Scalability</strong><br>
Study on the speedup of a program when more processors are added.</p><p><strong>Execution time</strong><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mi>p</mi></msub><mo>:=</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-25" style="width: 4.46em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.64em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1003.64em, 3.23em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-26"><span class="msubsup" id="MathJax-Span-27"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-28" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-29" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-30" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">:<span style="font-family: STIXGeneral-Regular; font-style: normal; font-weight: normal;">=</span></span><span class="mfrac" id="MathJax-Span-31" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-32"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-33" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-34" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-35" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi>p</mi></msub><mo>:=</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-3">T_p := \frac{T_1}{p}</script></span> (perfect performance)<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mi>p</mi></msub><mo>&amp;lt;</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-36" style="width: 4.101em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.332em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1003.332em, 3.23em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-37"><span class="msubsup" id="MathJax-Span-38"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-39" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-40" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-41" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">&lt;</span><span class="mfrac" id="MathJax-Span-42" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-43"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-44" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-45" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-46" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi>p</mi></msub><mo>&lt;</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-4">T_p < \frac{T_1}{p}</script></span>  (performance loss)<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mi>p</mi></msub><mo>&amp;gt;</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-47" style="width: 4.101em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.332em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1003.332em, 3.23em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-48"><span class="msubsup" id="MathJax-Span-49"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-50" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-51" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-52" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">&gt;</span><span class="mfrac" id="MathJax-Span-53" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-54"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-55" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-56" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-57" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi>p</mi></msub><mo>&gt;</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-5">T_p > \frac{T_1}{p}</script></span> (sorcery)<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><msub><mi>T</mi><mi>p</mi></msub></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-58" style="width: 3.998em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.281em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1003.281em, 3.281em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-59"><span class="msubsup" id="MathJax-Span-60"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.515em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-61" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mi" id="MathJax-Span-62" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-63" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mfrac" id="MathJax-Span-64" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-65"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-66" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-67" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.357em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-68"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-69" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mi" id="MathJax-Span-70" style="font-size: 50%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.747em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 2.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><msub><mi>T</mi><mi>p</mi></msub></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-6">S_p = \frac{T_1}{T_p}</script></span> = p (<strong>perfect</strong> linear speed-up)<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><msub><mi>T</mi><mi>p</mi></msub></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-71" style="width: 3.998em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.281em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1003.281em, 3.281em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-72"><span class="msubsup" id="MathJax-Span-73"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.515em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-74" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mi" id="MathJax-Span-75" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-76" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mfrac" id="MathJax-Span-77" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-78"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-79" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-80" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.357em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-81"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-82" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mi" id="MathJax-Span-83" style="font-size: 50%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.747em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 2.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><msub><mi>T</mi><mi>p</mi></msub></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-7">S_p = \frac{T_1}{T_p}</script></span> &lt; p (sub-linear speed-up)<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><msub><mi>T</mi><mi>p</mi></msub></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-84" style="width: 3.998em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.281em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1003.281em, 3.281em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-85"><span class="msubsup" id="MathJax-Span-86"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.515em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-87" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mi" id="MathJax-Span-88" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-89" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mfrac" id="MathJax-Span-90" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-91"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-92" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-93" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.357em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-94"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-95" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mi" id="MathJax-Span-96" style="font-size: 50%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.747em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 2.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><msub><mi>T</mi><mi>p</mi></msub></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-8">S_p = \frac{T_1}{T_p}</script></span> &gt; p (super-linear speed-up, can happen due to memory hierarchy effects)<br>
Efficiency (Relative speedup, speedup per processor): <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><msub><mi>S</mi><mi>p</mi></msub><mi>p</mi></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-97" style="width: 1.283em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.027em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(0.976em, 1001.027em, 2.871em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-98"><span class="mfrac" id="MathJax-Span-99"><span style="display: inline-block; position: relative; width: 0.771em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.669em, 4.357em, -999.997em); top: -4.608em; left: 50%; margin-left: -0.305em;"><span class="msubsup" id="MathJax-Span-100"><span style="display: inline-block; position: relative; width: 0.669em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.361em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-101" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.361em;"><span class="mi" id="MathJax-Span-102" style="font-size: 50%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-103" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.771em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.771em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 2.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><msub><mi>S</mi><mi>p</mi></msub><mi>p</mi></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-9">\frac{S_p}{p}</script></span></p><p>(Absolute/Parallel-) speedup: Used for comparing serial algorithms with parallel algorithms.</p><p>Relative-speedup / Efficiency: Should be used for comparing parallel algorithms.</p><p>Slackness: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><msub><mi>T</mi><mn>1</mn></msub><mrow><mi>p</mi><mo>&amp;#x22C5;</mo><msub><mi>T</mi><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></msub></mrow></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-104" style="width: 2.257em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.847em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.078em, 1001.847em, 2.871em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-105"><span class="mfrac" id="MathJax-Span-106"><span style="display: inline-block; position: relative; width: 1.591em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-107"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-108" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-109" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1001.488em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.715em;"><span class="mrow" id="MathJax-Span-110"><span class="mi" id="MathJax-Span-111" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span class="mo" id="MathJax-Span-112" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">⋅</span><span class="msubsup" id="MathJax-Span-113"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-114" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mi" id="MathJax-Span-115" style="font-size: 50%; font-family: STIXGeneral-Regular;">∞</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1001.591em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 1.591em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><msub><mi>T</mi><mn>1</mn></msub><mrow><mi>p</mi><mo>⋅</mo><msub><mi>T</mi><mi mathvariant="normal">∞</mi></msub></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-10">\frac{T_1}{p \cdot T_\infty}</script></span></p><p><strong>Amdahl / Gustafson / Schedulung times</strong><br>
<strong>WICHTIG:</strong> Man kann der Einfachheit annehmen, dass der sequentielle Teil vor dem parallelem Teil ausgeführt wird.</p><p><span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mi>p</mi></msub><mo>&amp;#x2265;</mo><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>+</mo><mfrac><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mi>a</mi><mi>r</mi></mrow></msub><mi>p</mi></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-116" style="width: 8.558em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.021em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.335em, 1007.021em, 3.23em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-117"><span class="msubsup" id="MathJax-Span-118"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-119" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-120" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-121" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≥</span><span class="msubsup" id="MathJax-Span-122" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 1.796em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.925em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-123" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.822em;"><span class="texatom" id="MathJax-Span-124"><span class="mrow" id="MathJax-Span-125"><span class="mi" id="MathJax-Span-126" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">s</span><span class="mi" id="MathJax-Span-127" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-128" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-129" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">+</span><span class="mfrac" id="MathJax-Span-130" style="padding-left: 0.259em;"><span style="display: inline-block; position: relative; width: 1.488em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1001.335em, 4.357em, -999.997em); top: -4.608em; left: 50%; margin-left: -0.663em;"><span class="msubsup" id="MathJax-Span-131"><span style="display: inline-block; position: relative; width: 1.335em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.669em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-132" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.566em;"><span class="texatom" id="MathJax-Span-133"><span class="mrow" id="MathJax-Span-134"><span class="mi" id="MathJax-Span-135" style="font-size: 50%; font-family: STIXGeneral-Italic;">p</span><span class="mi" id="MathJax-Span-136" style="font-size: 50%; font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-137" style="font-size: 50%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-138" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1001.488em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 1.488em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 2.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi>p</mi></msub><mo>≥</mo><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>+</mo><mfrac><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mi>a</mi><mi>r</mi></mrow></msub><mi>p</mi></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-11">T_p \geq W_{ser} + \frac{W_{par}}{p}</script></span> (depends on scheduler)<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><msub><mi>T</mi><mi>p</mi></msub><mi>p</mi></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-139" style="width: 1.335em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.078em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(0.976em, 1001.078em, 2.871em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-140"><span class="mfrac" id="MathJax-Span-141"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.357em, -999.997em); top: -4.608em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-142"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-143" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mi" id="MathJax-Span-144" style="font-size: 50%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-145" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 2.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><msub><mi>T</mi><mi>p</mi></msub><mi>p</mi></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-12">\frac{T_p}{p}</script></span> and <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-146" style="width: 1.642em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.335em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.386em, 1001.335em, 2.513em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-147"><span class="msubsup" id="MathJax-Span-148"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-149" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-150" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∞</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi mathvariant="normal">∞</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-13">T_\infty</script></span> are fixed.</p><p><em>Usually: Lower and upper bounds for <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mi>p</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-151" style="width: 1.283em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.027em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.386em, 1001.027em, 2.666em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-152"><span class="msubsup" id="MathJax-Span-153"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-154" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-155" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi>p</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-14">T_p</script></span></em><br>
Holds if maximal useful processes <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2264;</mo><mi>p</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-156" style="width: 1.898em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.539em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.796em, 1001.488em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-157"><span class="mo" id="MathJax-Span-158" style="font-family: STIXGeneral-Regular;">≤</span><span class="mi" id="MathJax-Span-159" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">p</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>≤</mo><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-15">\leq p</script></span> and no sorcery is involved:<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></msub><mo>&amp;#x2264;</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>&amp;#x2264;</mo><msub><mi>T</mi><mi>p</mi></msub><mo>&amp;#x2264;</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>+</mo><msub><mi>T</mi><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-160" style="width: 13.22em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.812em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1010.812em, 3.23em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-161"><span class="msubsup" id="MathJax-Span-162"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-163" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-164" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∞</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-165" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≤</span><span class="mfrac" id="MathJax-Span-166" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-167"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-168" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-169" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-170" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span><span class="mo" id="MathJax-Span-171" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≤</span><span class="msubsup" id="MathJax-Span-172" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-173" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-174" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-175" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≤</span><span class="mfrac" id="MathJax-Span-176" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-177"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-178" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-179" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-180" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span><span class="mo" id="MathJax-Span-181" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">+</span><span class="msubsup" id="MathJax-Span-182" style="padding-left: 0.259em;"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-183" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-184" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∞</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi mathvariant="normal">∞</mi></msub><mo>≤</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>≤</mo><msub><mi>T</mi><mi>p</mi></msub><mo>≤</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>+</mo><msub><mi>T</mi><mi mathvariant="normal">∞</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-16">T_\infty \leq \frac{T_1}{p} \leq T_p \leq \frac{T_1}{p} + T_\infty</script></span></p><p>Greedy scheduler theorem: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mi>p</mi></msub><mo>&amp;#x2264;</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>+</mo><msub><mi>T</mi><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-185" style="width: 7.123em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.843em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1005.843em, 3.23em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-186"><span class="msubsup" id="MathJax-Span-187"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-188" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-189" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-190" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≤</span><span class="mfrac" id="MathJax-Span-191" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-192"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-193" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-194" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-195" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span><span class="mo" id="MathJax-Span-196" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">+</span><span class="msubsup" id="MathJax-Span-197" style="padding-left: 0.259em;"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-198" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-199" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∞</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi>p</mi></msub><mo>≤</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>+</mo><msub><mi>T</mi><mi mathvariant="normal">∞</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-17">T_p \leq \frac{T_1}{p} + T_\infty</script></span><br>
Work stealing scheduler: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mi>p</mi></msub><mo>&amp;#x2248;</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>+</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;>O</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><msub><mi>T</mi><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-200" style="width: 8.916em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.277em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1007.226em, 3.742em, -999.997em); top: -3.071em; left: 0em;"><span class="mrow" id="MathJax-Span-201"><span class="msubsup" id="MathJax-Span-202"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-203" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-204" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-205" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≈</span><span class="mfrac" id="MathJax-Span-206" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-207"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-208" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-209" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-210" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span><span class="mo" id="MathJax-Span-211" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">+</span><span class="texatom" id="MathJax-Span-212" style="padding-left: 0.259em;"><span class="mrow" id="MathJax-Span-213"><span class="mi" id="MathJax-Span-214" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span class="mo" id="MathJax-Span-215" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-216"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-217" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-218" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∞</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-219" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 3.076em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi>p</mi></msub><mo>≈</mo><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>+</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">O</mi></mrow><mo stretchy="false">(</mo><msub><mi>T</mi><mi mathvariant="normal">∞</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-18">T_p \approx \frac{T_1}{p} + \mathcal{O}(T_\infty)</script></span><br>
Work / Span analysis / Brents law<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mi>p</mi></msub><mo>&amp;#x2264;</mo><msub><mi>T</mi><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></msub><mo>+</mo><mfrac><mrow><msub><mi>T</mi><mn>1</mn></msub><mo>&amp;#x2212;</mo><msub><mi>T</mi><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></msub></mrow><mi>p</mi></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-220" style="width: 8.814em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.226em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1007.226em, 3.23em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-221"><span class="msubsup" id="MathJax-Span-222"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-223" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-224" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-225" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≤</span><span class="msubsup" id="MathJax-Span-226" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-227" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-228" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∞</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-229" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">+</span><span class="mfrac" id="MathJax-Span-230" style="padding-left: 0.259em;"><span style="display: inline-block; position: relative; width: 2.205em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1002.103em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -1.022em;"><span class="mrow" id="MathJax-Span-231"><span class="msubsup" id="MathJax-Span-232"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-233" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-234" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-235" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="msubsup" id="MathJax-Span-236"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-237" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mi" id="MathJax-Span-238" style="font-size: 50%; font-family: STIXGeneral-Regular;">∞</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-239" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1002.205em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 2.205em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi>p</mi></msub><mo>≤</mo><msub><mi>T</mi><mi mathvariant="normal">∞</mi></msub><mo>+</mo><mfrac><mrow><msub><mi>T</mi><mn>1</mn></msub><mo>−</mo><msub><mi>T</mi><mi mathvariant="normal">∞</mi></msub></mrow><mi>p</mi></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-19">T_p \leq T_\infty + \frac{T_1 - T_\infty}{p}</script></span> (depends on the equation in question, TODO: Ask Vechev).</p><p><strong>Nice way to easily split an array into N parts</strong><br>
Also left-inclusive and right-exclusive.</p><pre><code>for(int i=0; i &lt; N; i++) {
    ts[i] = new SumThread(arr,i*len/N, (i+1)*len/N );
    ts[i].start();
}
</code></pre><p><strong>Walls in CPU design</strong><br>
Memory wall<br>
Power dissipation wall (faster clock cycle =&gt; More expensive cooling)<br>
ILP wall (cannot inherently parallelize instructions more).</p><p><strong>Preemption</strong> If a thread gets halted by the scheduler for some time.</p><p><strong>Race condition</strong><br>
Whenever the result depends on the scheduler. Data races and bad interleavings are both race conditions.</p><p><strong>Data race (aka low level race condition)</strong><br>
1.two or more threads in a single! process access the same memory location concurrently!, and<br>
2. at least one of the accesses is for writing, and<br>
3. the threads are not using any exclusive locks to control their accesses to that memory (or any scheme of concurrency control)</p><p><strong>Bad interleaving (aka high level race conition)</strong></p><ol>
<li>Basically any unfavorable execution (needs not to happen at the same time).</li>
</ol><p>There are usually an exponential number of interleavings.</p><p>The order 4,1,2,3,5,6 leads to c += 1, instead of c += 2.</p><pre><code>synchronized(this) {
1:    t1 = c;
2:    t1++;
3:    c = t1;
}

4: t2 = c;
5: t2++;
6: c = t2;
</code></pre><p><strong>Producer/Consumer pattern</strong></p><pre><code class="code=java hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">producer</span> <span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">synchronized</span>(<span class="hljs-keyword">this</span>) {
        consumable = <span class="hljs-keyword">true</span>;
    }
}
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">consumer</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">synchronized</span>(<span class="hljs-keyword">this</span>) {
        <span class="hljs-keyword">while</span>(!consumable) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">this</span>.wait();
            } <span class="hljs-keyword">catch</span>(InterruptedException e) {}
        }
    }
}
</code></pre><p><strong>Nested lockout problem</strong><br>
Solve by introducing an ordering and always acquire / release in this order.</p><pre><code>void method1() {
    synchronized(A) {
        synchronized(B) {
    
        }
    }
}
void method2() {
    synchronized(B) {
        synchronized(A) {
    
        }
    }
}
</code></pre><p><strong>Another nesting problem</strong></p><pre><code>synchronized(A) {
    synchronized(B) {
        try {
            B.wait(); //only releases lock of B, not of both of A and B.
        } catch(InterruptedException e) {}
    }
}
</code></pre><h2 id="java-threads-tasks"><a class="anchor hidden-xs" href="#java-threads-tasks" title="java-threads-tasks"><span class="octicon octicon-link"></span></a>Java Threads (Tasks)</h2><p>A thread can access immutable (final) local variables.<br>
A thread can acces any class variable.</p><p><strong>Thread notation</strong><br>
You can indicate that two columns of codes are executed by different threads using the double or operator ||</p><p><strong>Direct thread instantiation</strong></p><pre><code class="code=java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>) </span>{
    Thread t = <span class="hljs-keyword">new</span> Thread(<span class="hljs-keyword">new</span> Runnable() {
        @<span class="hljs-function"><span class="hljs-keyword">override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-comment">//Blablabla.</span>
        }
    });
    t.start();
}
</code></pre><p><strong>Sub-classing thread</strong></p><pre><code class="code=java hljs"><span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExtThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Thread</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{}
}
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
    Thread t = <span class="hljs-keyword">new</span> ExtThread();
    t.start();
}
</code></pre><p><strong>Implementing Runnable</strong></p><pre><code class="code=java hljs"><span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RunObj</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{
        System.out.println(<span class="hljs-string">"Yo␣"</span> + Thread.currentThread());
    }
}
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
    RunObj r = <span class="hljs-keyword">new</span> RunObj();
    Thread t = <span class="hljs-keyword">new</span> Thread(r);
    t.start();
}
</code></pre><p><strong>Exceptions</strong><br>
Spurious wakeups can alway happen.<br>
<code>object.wait()</code>: InterruptedException (if the thread waiting is interrupted).<br>
<code>thread.join()</code>: InterruptedException (if the thread that waits to join is interrupted)<br>
<code>notify</code>: NO EXCEPTION<br>
<code>thread.wait(long milis)</code> InterruptedException<br>
<code>thread.wait(long milis, int nanos)</code><br>
<code>thread.interrupt()</code></p><p>Accessing the most current thread: <code>Thread.currentThread();</code></p><p>A guard defends from spurious wakeups:<br>
<code>while(conditionForWait) wait();</code></p><p><strong>Problems</strong><br>
Synchronized: Deadlocks, bad interleavings<br>
Wait/notify: Deadlocks<br>
Join: Deadlocks</p><p><strong>Callable</strong></p><pre><code class="code=java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Callabler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Callable</span> </span>{
    <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> x;
    Callabler(<span class="hljs-keyword">int</span> x) {
        <span class="hljs-keyword">this</span>.x = x;
    }
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{                  System.out.println(<span class="hljs-string">"Hello␣from␣Callable:␣"</span> +     Thread.currentThread().getName() + <span class="hljs-string">"␣and␣saying␣"</span> + x);
    <span class="hljs-keyword">return</span> x; <span class="hljs-comment">//Callable is like runnable, only that it can return an Object.</span>
}
</code></pre><p><strong>java.util.concurrent.Executors Class</strong><br>
Contains factory methods for Executor and ExecutorService.</p><p><strong>java.util.concurrent.Executor Interface</strong></p><pre><code class="code=java hljs">    Runnable r = <span class="hljs-keyword">new</span> Runnabler(<span class="hljs-number">50</span>);
    (<span class="hljs-keyword">new</span> Thread(r)).start(); <span class="hljs-comment">//Creates a new native thread to start the runnable!</span>
    <span class="hljs-comment">//Factory method, which creates an object of type ExecutorService</span>
    Executor e = Executors.newFixedThreadPool(<span class="hljs-number">2</span>);
    <span class="hljs-comment">//Will not all launch a new thread (they will be split among the threads in the thread pool)</span>
    e.execute(<span class="hljs-keyword">new</span> Runnabler(<span class="hljs-number">100</span>));
    e.shutdown();
    <span class="hljs-keyword">try</span>&amp;nbsp;{
        e.awaitTermination(Integer.MAX_VALUE, TimeUnit.SECONDS); <span class="hljs-comment">//Wait until everything is finished.</span>
    } <span class="hljs-keyword">catch</span>(InterruptedException e) {}
</code></pre><p><strong>java.util.concurrent.ExecutorService Interface</strong></p><pre><code class="code=java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>) </span>{
    Callabler c = <span class="hljs-keyword">new</span> Callabler ();
    Thread t = <span class="hljs-keyword">new</span> ExtThread();
    Runnable r = <span class="hljs-keyword">new</span> Runnabler();
    ExecutorService es = Executors.newSingleThreadExecutor(); <span class="hljs-comment">//For running just having a single thread in the thread pool.</span>
    ExecutorService em = Executors.newFixedThreadPool(<span class="hljs-number">4</span>); <span class="hljs-comment">//Factory for creating fixed thread pool of size 4.</span>
    em.submit(t); <span class="hljs-comment">//it makes not much sense to return a future for a Thread or Runnable</span>
    em.submit(r);
    Future&lt;Integer&gt; fc = em.submit(c);
    <span class="hljs-keyword">try</span> {
        res = fc.<span class="hljs-keyword">get</span>();
    } <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) {
        e.printStackTrace();
    }
    em.shutdown(); <span class="hljs-comment">//Doesn't accept new jobs.</span>
    <span class="hljs-keyword">try</span>&amp;nbsp;{
        em.awaitTermination(Integer.MAX_VALUE, TimeUnit.SECONDS); <span class="hljs-comment">//Wait until everything is finished.</span>
    } <span class="hljs-keyword">catch</span>(InterruptedException e) {}
}
</code></pre><p><strong>java.util.concurrent.ExecutorService.invoke</strong><br>
InvokeAll: Submits all the Callable/Runnable/Threads in a Collection.<br>
InvokeAny: Submits one of the Callable/Runnable/Threads in a Collection.</p><pre><code class="code=java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>) </span>{
    ExecutorService em = Executors.newFixedThreadPool(<span class="hljs-number">4</span>);

    Set&lt;Callabler&gt; collection = <span class="hljs-keyword">new</span> HashSet&lt;Callabler&gt;();
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; ++i) collection.<span class="hljs-keyword">add</span>(<span class="hljs-keyword">new</span> Callabler(i));
    <span class="hljs-keyword">try</span> {
	<span class="hljs-comment">//Simply starts to execute all of the collections, then waits until one finishes and starting from then no more are executed.</span>
	<span class="hljs-comment">//This result is then returned</span>
	Integer k = em.invokeAny((Collection&lt;? extends Callable&lt;Integer&gt;&gt;) collection);
	} <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) {
	    e.printStackTrace();
        }
    }
}
</code></pre><p><strong>Fork-join</strong><br>
Total time O(n/numProcessors + log n)</p><p>Two cutoffs:<br>
Sequential cutoff (~Around 1000 operations are done sequentially).<br>
Processor count cutoff (Pass the variable p/2 and p - p/2 into the left and right part of the processor.)</p><p><strong>WARNING: Don’t use ExecutorService for fork-join, since it does not understand dependencies and eventually you will run out of processors.</strong></p><p>Also for efficiency reasons one of the childs in the fork-join graph can be executed by the current thread, since he waits on join anyways.</p><p>Implementation using ForkJoinPool:</p><pre><code class="code=java hljs"><span class="hljs-keyword">class</span> A extends RecursiveTask&lt;<span class="hljs-keyword">int</span>[]&gt; {
    <span class="hljs-keyword">int</span>[] arr;
    <span class="hljs-keyword">int</span> from, to;
    <span class="hljs-keyword">int</span> processors;
    A(<span class="hljs-keyword">int</span>[] arr, <span class="hljs-keyword">int</span> from, <span class="hljs-keyword">int</span> to, <span class="hljs-keyword">int</span> processors) {
        <span class="hljs-keyword">this</span>.from = from;
        <span class="hljs-keyword">this</span>.to = to;
        <span class="hljs-keyword">this</span>.arr = arr;
        <span class="hljs-keyword">this</span>.processors = processors;
    }
    @override
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span>[] compute {
        <span class="hljs-keyword">if</span>(to - from &lt;= <span class="hljs-number">1000</span> || processors == <span class="hljs-number">1</span>) {
            <span class="hljs-comment">//Sequential cutoff</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">int</span> mid = (from+to)/<span class="hljs-number">2</span>;
            A a1 = <span class="hljs-keyword">new</span> A(arr, from, mid, processors/<span class="hljs-number">2</span>);
            A a2 = <span class="hljs-keyword">new</span> A(arr, mid+<span class="hljs-number">1</span>, to, processors - processors/<span class="hljs-number">2</span>);
            
            a1.fork(); <span class="hljs-comment">//Spawn new task in Fork Join Pool.</span>
            <span class="hljs-keyword">int</span>[] first = a2.compute(); <span class="hljs-comment">//Directly compute a2, alternatively use fork();</span>
            <span class="hljs-keyword">int</span>[] second = a2.join();
            <span class="hljs-keyword">return</span> somemergedarray; <span class="hljs-comment">//O(n), for merge sort this is ok.</span>
        }
    }
}

<span class="hljs-keyword">class</span> B extends RecursiveAction {
    B () {}
    @<span class="hljs-function">override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">compute</span> <span class="hljs-params">()</span> </span>{
        B b1 = <span class="hljs-keyword">new</span> B(...);
        b1.fork();
        b2.compute();
        b1.join();
        <span class="hljs-comment">//b1 and b2 computed here</span>
    }
}
</code></pre><p><strong>Data parallelism</strong><br>
Example reductions (accumulator, sequentially adding the data), use divide &amp; conquer to add the data.<br>
For associative operations you can do the same thing, where the bracket depth is the worst-case sequential performance with infinite processors.</p><p>Data parallelism is in Java concerned with the fork-join paradigm.<br>
Only considers operation and the data on which it should be applied, not explicitly how (multiple possible task g).</p><p><strong>Task parallelism</strong><br>
This considers dynamic task graphs and static task graphs. Usually explicitly stated by parallel tasks.<br>
Static task graphs always look the same, no matter the input, while dynamic task graphs can change depending on the input (for e.g. fork-join with arbitrary size N).</p><p>Task parallelism is usually talked about in dataflow programming and the fork-join paradigm.</p><p><strong>Work-partitioning / Task decomposition</strong><br>
The act of splitting the work into multiple chunks, which can be executed parallely (usually done by ExecutorService and submit/invokeAll).</p><p><strong>Scheduling</strong><br>
Assign task to processors with the goal of full utilisation.</p><p><strong>Parallel algorithms</strong><br>
The <strong>work</strong> is the number of leaves in the fork-join graph and is the amount of work a single processor had to do.<br>
The <strong>span</strong> is the depth of the fork-join graph and is the amount of work each of an infinite amount of processors had to do.<br>
For example parallel-prefix-sum.</p><p><strong>Fibonacci-parallel</strong><br>
NO! Can we just fucking agree that this is not possible. Use log(n) or sqrt(5) method instead.</p><p><strong>Unstructured parallel programming</strong><br>
In Java you can join in whatever order you want.<br>
<em>Structured parallel programming languages</em> like CILK, XIO only allow:<br>
startThread A<br>
startThread B<br>
join B<br>
join A</p><p><strong>Low probability of conflict</strong><br>
Three threads access a huge space, but are unlikely to access the same location.<br>
Pessimistic: Lock the entire space.<br>
Fine-grained: Lock all of the small subspaces.<br>
Optimistic: Just go for it and redo, in case changes another thread interfeared.</p><p><strong>Transactional lock collision</strong><br>
Do optimistic locking, but in case of collision do normal synchronization.</p><p>F = Fork statement, J = join statement, S = statement in same task.</p><p>Each node is a single fork statement, a single join statement or a group of sequential statements (called work here):</p><pre class="graphviz"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %0 Pages: 1 -->
<svg width="326pt" height="310pt" viewBox="0.00 0.00 325.74 310.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 306.4)">
<title>%0</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-306.4 321.7398,-306.4 321.7398,4 -4,4"></polygon>
<!-- FA -->
<g id="node1" class="node">
<title>FA</title>
<ellipse fill="none" stroke="#000000" cx="169.1279" cy="-284.4" rx="64.2862" ry="18"></ellipse>
<text text-anchor="middle" x="169.1279" y="-280.2" font-family="Times,serif" font-size="14.00" fill="#000000">Main: Fork A</text>
</g>
<!-- A -->
<g id="node2" class="node">
<title>A</title>
<ellipse fill="none" stroke="#000000" cx="86.1279" cy="-195.6" rx="86.2561" ry="18"></ellipse>
<text text-anchor="middle" x="86.1279" y="-191.4" font-family="Times,serif" font-size="14.00" fill="#000000">A: Sequential work</text>
</g>
<!-- FA&#45;&gt;A -->
<g id="edge1" class="edge">
<title>FA-&gt;A</title>
<path fill="none" stroke="#000000" d="M152.7298,-266.856C140.4192,-253.6851 123.388,-235.4638 109.63,-220.7443"></path>
<polygon fill="#000000" stroke="#000000" points="112.1616,-218.3272 102.7761,-213.4115 107.0476,-223.1071 112.1616,-218.3272"></polygon>
<text text-anchor="middle" x="139.0192" y="-235.8" font-family="Times,serif" font-size="14.00" fill="#000000">F</text>
</g>
<!-- FC -->
<g id="node3" class="node">
<title>FC</title>
<ellipse fill="none" stroke="#000000" cx="254.1279" cy="-195.6" rx="63.7238" ry="18"></ellipse>
<text text-anchor="middle" x="254.1279" y="-191.4" font-family="Times,serif" font-size="14.00" fill="#000000">Main: Fork C</text>
</g>
<!-- FA&#45;&gt;FC -->
<g id="edge2" class="edge">
<title>FA-&gt;FC</title>
<path fill="none" stroke="#000000" d="M185.9212,-266.856C198.6109,-253.599 216.1983,-235.2254 230.3354,-220.4562"></path>
<polygon fill="#000000" stroke="#000000" points="232.9831,-222.7517 237.3696,-213.1076 227.9263,-217.9114 232.9831,-222.7517"></polygon>
<text text-anchor="middle" x="223.0192" y="-235.8" font-family="Times,serif" font-size="14.00" fill="#000000">S</text>
</g>
<!-- JA -->
<g id="node4" class="node">
<title>JA</title>
<ellipse fill="none" stroke="#000000" cx="170.1279" cy="-106.8" rx="48.1129" ry="18"></ellipse>
<text text-anchor="middle" x="170.1279" y="-102.6" font-family="Times,serif" font-size="14.00" fill="#000000">C: Join A</text>
</g>
<!-- A&#45;&gt;JA -->
<g id="edge3" class="edge">
<title>A-&gt;JA</title>
<path fill="none" stroke="#000000" d="M103.1266,-177.63C115.7819,-164.2515 133.1987,-145.8395 147.1027,-131.141"></path>
<polygon fill="#000000" stroke="#000000" points="149.6802,-133.5094 154.0096,-123.8394 144.5949,-128.6989 149.6802,-133.5094"></polygon>
<text text-anchor="middle" x="138.8502" y="-147" font-family="Times,serif" font-size="14.00" fill="#000000">J</text>
</g>
<!-- FC&#45;&gt;JA -->
<g id="edge4" class="edge">
<title>FC-&gt;JA</title>
<path fill="none" stroke="#000000" d="M237.5322,-178.056C224.9104,-164.7129 207.3855,-146.1865 193.3688,-131.3689"></path>
<polygon fill="#000000" stroke="#000000" points="195.818,-128.8649 186.4033,-124.0054 190.7327,-133.6753 195.818,-128.8649"></polygon>
<text text-anchor="middle" x="223.0192" y="-147" font-family="Times,serif" font-size="14.00" fill="#000000">F</text>
</g>
<!-- JC -->
<g id="node5" class="node">
<title>JC</title>
<ellipse fill="none" stroke="#000000" cx="212.1279" cy="-18" rx="61.436" ry="18"></ellipse>
<text text-anchor="middle" x="212.1279" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">Main: Join C</text>
</g>
<!-- FC&#45;&gt;JC -->
<g id="edge5" class="edge">
<title>FC-&gt;JC</title>
<path fill="none" stroke="#000000" d="M249.8696,-177.5934C242.5429,-146.612 227.501,-83.006 218.7814,-46.1346"></path>
<polygon fill="#000000" stroke="#000000" points="222.105,-44.9803 216.3975,-36.0543 215.2929,-46.5913 222.105,-44.9803"></polygon>
<text text-anchor="middle" x="241.0192" y="-102.6" font-family="Times,serif" font-size="14.00" fill="#000000">S</text>
</g>
<!-- JA&#45;&gt;JC -->
<g id="edge6" class="edge">
<title>JA-&gt;JC</title>
<path fill="none" stroke="#000000" d="M178.6273,-88.83C184.5478,-76.3123 192.5526,-59.3879 199.2528,-45.2218"></path>
<polygon fill="#000000" stroke="#000000" points="202.5295,-46.4796 203.6413,-35.9433 196.2016,-43.4867 202.5295,-46.4796"></polygon>
<text text-anchor="middle" x="196.8502" y="-58.2" font-family="Times,serif" font-size="14.00" fill="#000000">J</text>
</g>
</g>
</svg>
</pre><p>If you are lazy, you can add sequential statements to the node.</p><p>The below program is <strong>not</strong> a SP graph (serious program graph).<br>
Could also have different programs for each node.</p><p>Formal definition of a <strong>race condition</strong>:<br>
If two nodes share the same memory, but do not have an ordering (node A can be executed before or after node B).</p><p>Fork and join, Divide and Conquer task graph, however typically the transitive (dotted) lines are not drawn:</p><pre class="graphviz"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %0 Pages: 1 -->
<svg width="854pt" height="482pt" viewBox="0.00 0.00 853.60 482.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 478)">
<title>%0</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-478 849.6007,-478 849.6007,4 -4,4"></polygon>
<!-- M -->
<g id="node1" class="node">
<title>M</title>
<ellipse fill="none" stroke="#000000" cx="658.8181" cy="-456" rx="71.2734" ry="18"></ellipse>
<text text-anchor="middle" x="658.8181" y="-451.8" font-family="Times,serif" font-size="14.00" fill="#000000">M: Fork N1,N2</text>
</g>
<!-- N1 -->
<g id="node2" class="node">
<title>N1</title>
<ellipse fill="none" stroke="#000000" cx="361.8181" cy="-383" rx="72.4171" ry="18"></ellipse>
<text text-anchor="middle" x="361.8181" y="-378.8" font-family="Times,serif" font-size="14.00" fill="#000000">N1: Fork L1,L2</text>
</g>
<!-- M&#45;&gt;N1 -->
<g id="edge8" class="edge">
<title>M-&gt;N1</title>
<path fill="none" stroke="#000000" d="M607.4238,-443.3677C556.2362,-430.7863 477.6373,-411.4673 423.2006,-398.0873"></path>
<polygon fill="#000000" stroke="#000000" points="423.8757,-394.6491 413.3293,-395.661 422.2049,-401.4468 423.8757,-394.6491"></polygon>
</g>
<!-- N2 -->
<g id="node3" class="node">
<title>N2</title>
<ellipse fill="none" stroke="#000000" cx="658.8181" cy="-383" rx="72.4171" ry="18"></ellipse>
<text text-anchor="middle" x="658.8181" y="-378.8" font-family="Times,serif" font-size="14.00" fill="#000000">N1: Fork L3,L4</text>
</g>
<!-- M&#45;&gt;N2 -->
<g id="edge9" class="edge">
<title>M-&gt;N2</title>
<path fill="none" stroke="#000000" d="M658.8181,-437.9551C658.8181,-429.8828 658.8181,-420.1764 658.8181,-411.1817"></path>
<polygon fill="#000000" stroke="#000000" points="662.3182,-411.0903 658.8181,-401.0904 655.3182,-411.0904 662.3182,-411.0903"></polygon>
</g>
<!-- MJ -->
<g id="node14" class="node">
<title>MJ</title>
<ellipse fill="none" stroke="#000000" cx="658.8181" cy="-18" rx="71.8144" ry="18"></ellipse>
<text text-anchor="middle" x="658.8181" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">M: Join N1, N2</text>
</g>
<!-- M&#45;&gt;MJ -->
<g id="edge7" class="edge">
<title>M-&gt;MJ</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M714.4737,-444.464C767.0195,-431.9248 837.8181,-410.0169 837.8181,-383 837.8181,-383 837.8181,-383 837.8181,-91 837.8181,-65.6189 775.3332,-44.7469 724.1991,-31.9157"></path>
<polygon fill="#000000" stroke="#000000" points="725.019,-28.5131 714.4737,-29.536 723.3552,-35.3125 725.019,-28.5131"></polygon>
<text text-anchor="middle" x="841.7094" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">S</text>
</g>
<!-- L1 -->
<g id="node4" class="node">
<title>L1</title>
<ellipse fill="none" stroke="#000000" cx="77.8181" cy="-310" rx="77.6367" ry="18"></ellipse>
<text text-anchor="middle" x="77.8181" y="-305.8" font-family="Times,serif" font-size="14.00" fill="#000000">L1: Fork W1,W2</text>
</g>
<!-- N1&#45;&gt;L1 -->
<g id="edge10" class="edge">
<title>N1-&gt;L1</title>
<path fill="none" stroke="#000000" d="M311.3719,-370.0332C263.5534,-357.7418 191.5879,-339.2436 140.1898,-326.0322"></path>
<polygon fill="#000000" stroke="#000000" points="140.7542,-322.5635 130.1977,-323.4638 139.0115,-329.3431 140.7542,-322.5635"></polygon>
</g>
<!-- L2 -->
<g id="node5" class="node">
<title>L2</title>
<ellipse fill="none" stroke="#000000" cx="262.8181" cy="-310" rx="77.6367" ry="18"></ellipse>
<text text-anchor="middle" x="262.8181" y="-305.8" font-family="Times,serif" font-size="14.00" fill="#000000">L2: Fork W3,W4</text>
</g>
<!-- N1&#45;&gt;L2 -->
<g id="edge11" class="edge">
<title>N1-&gt;L2</title>
<path fill="none" stroke="#000000" d="M338.607,-365.8847C325.4212,-356.1618 308.7293,-343.8537 294.3686,-333.2645"></path>
<polygon fill="#000000" stroke="#000000" points="296.3526,-330.3788 286.2268,-327.261 292.1982,-336.0128 296.3526,-330.3788"></polygon>
</g>
<!-- NJ1 -->
<g id="node12" class="node">
<title>NJ1</title>
<ellipse fill="none" stroke="#000000" cx="361.8181" cy="-91" rx="70.1299" ry="18"></ellipse>
<text text-anchor="middle" x="361.8181" y="-86.8" font-family="Times,serif" font-size="14.00" fill="#000000">N1: Join L1,L2</text>
</g>
<!-- N1&#45;&gt;NJ1 -->
<g id="edge5" class="edge">
<title>N1-&gt;NJ1</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M366.492,-364.8356C369.8614,-350.1478 373.8181,-328.8802 373.8181,-310 373.8181,-310 373.8181,-310 373.8181,-164 373.8181,-149.1023 371.3546,-132.7182 368.66,-119.2531"></path>
<polygon fill="#000000" stroke="#000000" points="372.0149,-118.2058 366.492,-109.1644 365.1711,-119.6765 372.0149,-118.2058"></polygon>
<text text-anchor="middle" x="377.7094" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">S</text>
</g>
<!-- L3 -->
<g id="node6" class="node">
<title>L3</title>
<ellipse fill="none" stroke="#000000" cx="482.8181" cy="-310" rx="77.6367" ry="18"></ellipse>
<text text-anchor="middle" x="482.8181" y="-305.8" font-family="Times,serif" font-size="14.00" fill="#000000">L3: Fork W5,W6</text>
</g>
<!-- N2&#45;&gt;L3 -->
<g id="edge12" class="edge">
<title>N2-&gt;L3</title>
<path fill="none" stroke="#000000" d="M621.4931,-367.5186C594.9307,-356.5012 559.0241,-341.6082 530.4035,-329.7371"></path>
<polygon fill="#000000" stroke="#000000" points="531.5787,-326.4355 521.0007,-325.8371 528.8968,-332.9013 531.5787,-326.4355"></polygon>
</g>
<!-- L4 -->
<g id="node7" class="node">
<title>L4</title>
<ellipse fill="none" stroke="#000000" cx="658.8181" cy="-310" rx="77.6367" ry="18"></ellipse>
<text text-anchor="middle" x="658.8181" y="-305.8" font-family="Times,serif" font-size="14.00" fill="#000000">L4: Fork W7,W8</text>
</g>
<!-- N2&#45;&gt;L4 -->
<g id="edge13" class="edge">
<title>N2-&gt;L4</title>
<path fill="none" stroke="#000000" d="M658.8181,-364.9551C658.8181,-356.8828 658.8181,-347.1764 658.8181,-338.1817"></path>
<polygon fill="#000000" stroke="#000000" points="662.3182,-338.0903 658.8181,-328.0904 655.3182,-338.0904 662.3182,-338.0903"></polygon>
</g>
<!-- NJ2 -->
<g id="node13" class="node">
<title>NJ2</title>
<ellipse fill="none" stroke="#000000" cx="658.8181" cy="-91" rx="70.1299" ry="18"></ellipse>
<text text-anchor="middle" x="658.8181" y="-86.8" font-family="Times,serif" font-size="14.00" fill="#000000">N2: Join L3,L4</text>
</g>
<!-- N2&#45;&gt;NJ2 -->
<g id="edge6" class="edge">
<title>N2-&gt;NJ2</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M720.7866,-373.5989C756.2758,-364.3038 793.8181,-345.9703 793.8181,-310 793.8181,-310 793.8181,-310 793.8181,-164 793.8181,-130.8977 762.0237,-112.7318 729.2944,-102.8012"></path>
<polygon fill="#000000" stroke="#000000" points="730.1773,-99.4139 719.6044,-100.0947 728.2942,-106.1559 730.1773,-99.4139"></polygon>
<text text-anchor="middle" x="797.7094" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">S</text>
</g>
<!-- J1 -->
<g id="node8" class="node">
<title>J1</title>
<ellipse fill="none" stroke="#000000" cx="84.8181" cy="-164" rx="75.849" ry="18"></ellipse>
<text text-anchor="middle" x="84.8181" y="-159.8" font-family="Times,serif" font-size="14.00" fill="#000000">L1: Join W1,W2</text>
</g>
<!-- L1&#45;&gt;J1 -->
<g id="edge1" class="edge">
<title>L1-&gt;J1</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M44.9546,-293.4286C30.5118,-284.2483 15.0391,-271.3546 7.0355,-255 .0026,-240.6286 -.3197,-233.2092 7.0355,-219 14.3326,-204.9033 27.091,-193.6459 40.1902,-185.0803"></path>
<polygon fill="#000000" stroke="#000000" points="42.0755,-188.0301 48.7934,-179.8374 38.4327,-182.0526 42.0755,-188.0301"></polygon>
<text text-anchor="middle" x="11.7094" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">S</text>
</g>
<!-- W1 -->
<g id="node15" class="node">
<title>W1</title>
<ellipse fill="none" stroke="#000000" cx="50.8181" cy="-237" rx="27" ry="18"></ellipse>
<text text-anchor="middle" x="50.8181" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">W1</text>
</g>
<!-- L1&#45;&gt;W1 -->
<g id="edge14" class="edge">
<title>L1-&gt;W1</title>
<path fill="none" stroke="#000000" d="M71.144,-291.9551C68.0476,-283.5833 64.3011,-273.4538 60.8723,-264.1836"></path>
<polygon fill="#000000" stroke="#000000" points="64.074,-262.7504 57.3224,-254.5855 57.5087,-265.1787 64.074,-262.7504"></polygon>
</g>
<!-- W2 -->
<g id="node16" class="node">
<title>W2</title>
<ellipse fill="none" stroke="#000000" cx="122.8181" cy="-237" rx="27" ry="18"></ellipse>
<text text-anchor="middle" x="122.8181" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">W2</text>
</g>
<!-- L1&#45;&gt;W2 -->
<g id="edge15" class="edge">
<title>L1-&gt;W2</title>
<path fill="none" stroke="#000000" d="M88.9417,-291.9551C94.4416,-283.0331 101.172,-272.1148 107.1805,-262.3677"></path>
<polygon fill="#000000" stroke="#000000" points="110.1714,-264.1857 112.4395,-253.8365 104.2126,-260.5124 110.1714,-264.1857"></polygon>
</g>
<!-- J2 -->
<g id="node9" class="node">
<title>J2</title>
<ellipse fill="none" stroke="#000000" cx="258.8181" cy="-164" rx="75.849" ry="18"></ellipse>
<text text-anchor="middle" x="258.8181" y="-159.8" font-family="Times,serif" font-size="14.00" fill="#000000">L2: Join W3,W4</text>
</g>
<!-- L2&#45;&gt;J2 -->
<g id="edge2" class="edge">
<title>L2-&gt;J2</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M231.6676,-293.3577C217.7282,-284.0908 202.7261,-271.1441 195.0355,-255 188.1545,-240.5552 188.3714,-233.5461 195.0355,-219 200.8106,-206.3944 211.0591,-195.5809 221.6744,-186.9615"></path>
<polygon fill="#000000" stroke="#000000" points="223.9413,-189.6351 229.7955,-180.8045 219.7122,-184.0569 223.9413,-189.6351"></polygon>
<text text-anchor="middle" x="198.7094" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">S</text>
</g>
<!-- W3 -->
<g id="node17" class="node">
<title>W3</title>
<ellipse fill="none" stroke="#000000" cx="238.8181" cy="-237" rx="27" ry="18"></ellipse>
<text text-anchor="middle" x="238.8181" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">W3</text>
</g>
<!-- L2&#45;&gt;W3 -->
<g id="edge16" class="edge">
<title>L2-&gt;W3</title>
<path fill="none" stroke="#000000" d="M256.8856,-291.9551C254.1332,-283.5833 250.803,-273.4538 247.7552,-264.1836"></path>
<polygon fill="#000000" stroke="#000000" points="251.0479,-262.9921 244.5997,-254.5855 244.398,-265.1784 251.0479,-262.9921"></polygon>
</g>
<!-- W4 -->
<g id="node18" class="node">
<title>W4</title>
<ellipse fill="none" stroke="#000000" cx="310.8181" cy="-237" rx="27" ry="18"></ellipse>
<text text-anchor="middle" x="310.8181" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">W4</text>
</g>
<!-- L2&#45;&gt;W4 -->
<g id="edge17" class="edge">
<title>L2-&gt;W4</title>
<path fill="none" stroke="#000000" d="M274.6833,-291.9551C280.5498,-283.0331 287.729,-272.1148 294.138,-262.3677"></path>
<polygon fill="#000000" stroke="#000000" points="297.1779,-264.115 299.7476,-253.8365 291.329,-260.2691 297.1779,-264.115"></polygon>
</g>
<!-- J3 -->
<g id="node10" class="node">
<title>J3</title>
<ellipse fill="none" stroke="#000000" cx="483.8181" cy="-164" rx="75.849" ry="18"></ellipse>
<text text-anchor="middle" x="483.8181" y="-159.8" font-family="Times,serif" font-size="14.00" fill="#000000">L3: Join W5,W6</text>
</g>
<!-- L3&#45;&gt;J3 -->
<g id="edge3" class="edge">
<title>L3-&gt;J3</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M457.9398,-292.9117C446.1961,-283.2987 433.3867,-270.1812 427.0355,-255 420.8604,-240.2396 420.7949,-233.7328 427.0355,-219 432.1464,-206.9343 441.3432,-196.2182 450.8674,-187.5234"></path>
<polygon fill="#000000" stroke="#000000" points="453.1761,-190.1544 458.5039,-180.9965 448.6281,-184.8331 453.1761,-190.1544"></polygon>
<text text-anchor="middle" x="430.7094" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">S</text>
</g>
<!-- W5 -->
<g id="node19" class="node">
<title>W5</title>
<ellipse fill="none" stroke="#000000" cx="470.8181" cy="-237" rx="27" ry="18"></ellipse>
<text text-anchor="middle" x="470.8181" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">W5</text>
</g>
<!-- L3&#45;&gt;W5 -->
<g id="edge18" class="edge">
<title>L3-&gt;W5</title>
<path fill="none" stroke="#000000" d="M479.8518,-291.9551C478.5249,-283.8828 476.9293,-274.1764 475.4508,-265.1817"></path>
<polygon fill="#000000" stroke="#000000" points="478.8677,-264.3902 473.7919,-255.0904 471.9604,-265.5257 478.8677,-264.3902"></polygon>
</g>
<!-- W6 -->
<g id="node20" class="node">
<title>W6</title>
<ellipse fill="none" stroke="#000000" cx="542.8181" cy="-237" rx="27" ry="18"></ellipse>
<text text-anchor="middle" x="542.8181" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">W6</text>
</g>
<!-- L3&#45;&gt;W6 -->
<g id="edge19" class="edge">
<title>L3-&gt;W6</title>
<path fill="none" stroke="#000000" d="M497.6496,-291.9551C505.4262,-282.4935 515.0482,-270.7867 523.4105,-260.6126"></path>
<polygon fill="#000000" stroke="#000000" points="526.1417,-262.8018 529.7875,-252.854 520.7339,-258.357 526.1417,-262.8018"></polygon>
</g>
<!-- J4 -->
<g id="node11" class="node">
<title>J4</title>
<ellipse fill="none" stroke="#000000" cx="658.8181" cy="-164" rx="75.849" ry="18"></ellipse>
<text text-anchor="middle" x="658.8181" y="-159.8" font-family="Times,serif" font-size="14.00" fill="#000000">L4: Join W7,W8</text>
</g>
<!-- L4&#45;&gt;J4 -->
<g id="edge4" class="edge">
<title>L4-&gt;J4</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M639.4259,-292.1215C630.1209,-282.2063 619.9472,-269.0563 615.0355,-255 609.7577,-239.8956 609.7577,-234.1044 615.0355,-219 618.7576,-208.348 625.5017,-198.2164 632.5995,-189.6187"></path>
<polygon fill="#000000" stroke="#000000" points="635.4363,-191.6935 639.4259,-181.8785 630.1864,-187.0633 635.4363,-191.6935"></polygon>
<text text-anchor="middle" x="618.7094" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">S</text>
</g>
<!-- W7 -->
<g id="node21" class="node">
<title>W7</title>
<ellipse fill="none" stroke="#000000" cx="658.8181" cy="-237" rx="27" ry="18"></ellipse>
<text text-anchor="middle" x="658.8181" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">W7</text>
</g>
<!-- L4&#45;&gt;W7 -->
<g id="edge20" class="edge">
<title>L4-&gt;W7</title>
<path fill="none" stroke="#000000" d="M658.8181,-291.9551C658.8181,-283.8828 658.8181,-274.1764 658.8181,-265.1817"></path>
<polygon fill="#000000" stroke="#000000" points="662.3182,-265.0903 658.8181,-255.0904 655.3182,-265.0904 662.3182,-265.0903"></polygon>
</g>
<!-- W8 -->
<g id="node22" class="node">
<title>W8</title>
<ellipse fill="none" stroke="#000000" cx="730.8181" cy="-237" rx="27" ry="18"></ellipse>
<text text-anchor="middle" x="730.8181" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#000000">W8</text>
</g>
<!-- L4&#45;&gt;W8 -->
<g id="edge21" class="edge">
<title>L4-&gt;W8</title>
<path fill="none" stroke="#000000" d="M676.2473,-292.3287C686.0263,-282.4139 698.3229,-269.9465 708.7668,-259.3577"></path>
<polygon fill="#000000" stroke="#000000" points="711.4513,-261.6201 715.9815,-252.0427 706.4675,-256.7046 711.4513,-261.6201"></polygon>
</g>
<!-- J1&#45;&gt;NJ1 -->
<g id="edge30" class="edge">
<title>J1-&gt;NJ1</title>
<path fill="none" stroke="#000000" d="M135.6242,-150.6107C182.8209,-138.1725 253.0979,-119.6519 302.771,-106.5612"></path>
<polygon fill="#000000" stroke="#000000" points="303.9519,-109.8695 312.7298,-103.9366 302.168,-103.1006 303.9519,-109.8695"></polygon>
</g>
<!-- J2&#45;&gt;NJ1 -->
<g id="edge31" class="edge">
<title>J2-&gt;NJ1</title>
<path fill="none" stroke="#000000" d="M282.9671,-146.8847C296.7851,-137.0914 314.3039,-124.6751 329.3173,-114.0346"></path>
<polygon fill="#000000" stroke="#000000" points="331.6857,-116.646 337.8205,-108.008 327.638,-110.9349 331.6857,-116.646"></polygon>
</g>
<!-- J3&#45;&gt;NJ2 -->
<g id="edge32" class="edge">
<title>J3-&gt;NJ2</title>
<path fill="none" stroke="#000000" d="M521.36,-148.3397C548.0684,-137.1984 584.1159,-122.1615 612.5953,-110.2815"></path>
<polygon fill="#000000" stroke="#000000" points="614.0573,-113.4641 621.939,-106.3839 611.3623,-107.0036 614.0573,-113.4641"></polygon>
</g>
<!-- J4&#45;&gt;NJ2 -->
<g id="edge33" class="edge">
<title>J4-&gt;NJ2</title>
<path fill="none" stroke="#000000" d="M658.8181,-145.9551C658.8181,-137.8828 658.8181,-128.1764 658.8181,-119.1817"></path>
<polygon fill="#000000" stroke="#000000" points="662.3182,-119.0903 658.8181,-109.0904 655.3182,-119.0904 662.3182,-119.0903"></polygon>
</g>
<!-- NJ1&#45;&gt;MJ -->
<g id="edge34" class="edge">
<title>NJ1-&gt;MJ</title>
<path fill="none" stroke="#000000" d="M412.8743,-78.4509C464.0865,-65.8633 542.9814,-46.4717 597.542,-33.0611"></path>
<polygon fill="#000000" stroke="#000000" points="598.5588,-36.4155 607.4343,-30.6297 596.8879,-29.6178 598.5588,-36.4155"></polygon>
</g>
<!-- NJ2&#45;&gt;MJ -->
<g id="edge35" class="edge">
<title>NJ2-&gt;MJ</title>
<path fill="none" stroke="#000000" d="M658.8181,-72.9551C658.8181,-64.8828 658.8181,-55.1764 658.8181,-46.1817"></path>
<polygon fill="#000000" stroke="#000000" points="662.3182,-46.0903 658.8181,-36.0904 655.3182,-46.0904 662.3182,-46.0903"></polygon>
</g>
<!-- W1&#45;&gt;J1 -->
<g id="edge22" class="edge">
<title>W1-&gt;J1</title>
<path fill="none" stroke="#000000" d="M58.8757,-219.7C62.8522,-211.1622 67.7413,-200.6649 72.1991,-191.0938"></path>
<polygon fill="#000000" stroke="#000000" points="75.414,-192.4809 76.4634,-181.9381 69.0685,-189.5254 75.414,-192.4809"></polygon>
</g>
<!-- W2&#45;&gt;J1 -->
<g id="edge23" class="edge">
<title>W2-&gt;J1</title>
<path fill="none" stroke="#000000" d="M113.8127,-219.7C109.3683,-211.1622 103.904,-200.6649 98.9217,-191.0938"></path>
<polygon fill="#000000" stroke="#000000" points="101.8778,-189.1922 94.1558,-181.9381 95.6686,-192.4244 101.8778,-189.1922"></polygon>
</g>
<!-- W3&#45;&gt;J2 -->
<g id="edge24" class="edge">
<title>W3-&gt;J2</title>
<path fill="none" stroke="#000000" d="M243.762,-218.9551C245.9976,-210.7951 248.6907,-200.9652 251.1774,-191.8887"></path>
<polygon fill="#000000" stroke="#000000" points="254.5951,-192.6598 253.8619,-182.0904 247.8439,-190.8101 254.5951,-192.6598"></polygon>
</g>
<!-- W4&#45;&gt;J2 -->
<g id="edge25" class="edge">
<title>W4-&gt;J2</title>
<path fill="none" stroke="#000000" d="M299.0185,-220.4352C292.6041,-211.4303 284.5263,-200.0903 277.2972,-189.9418"></path>
<polygon fill="#000000" stroke="#000000" points="280.1321,-187.8889 271.4795,-181.7747 274.4307,-191.9502 280.1321,-187.8889"></polygon>
</g>
<!-- W5&#45;&gt;J3 -->
<g id="edge26" class="edge">
<title>W5-&gt;J3</title>
<path fill="none" stroke="#000000" d="M474.0316,-218.9551C475.4691,-210.8828 477.1977,-201.1764 478.7995,-192.1817"></path>
<polygon fill="#000000" stroke="#000000" points="482.289,-192.5491 480.5966,-182.0904 475.3975,-191.3218 482.289,-192.5491"></polygon>
</g>
<!-- W6&#45;&gt;J3 -->
<g id="edge27" class="edge">
<title>W6-&gt;J3</title>
<path fill="none" stroke="#000000" d="M529.7241,-220.7989C522.3307,-211.6511 512.9213,-200.009 504.5486,-189.6496"></path>
<polygon fill="#000000" stroke="#000000" points="507.1225,-187.2661 498.1145,-181.6887 501.6783,-191.6662 507.1225,-187.2661"></polygon>
</g>
<!-- W7&#45;&gt;J4 -->
<g id="edge28" class="edge">
<title>W7-&gt;J4</title>
<path fill="none" stroke="#000000" d="M658.8181,-218.9551C658.8181,-210.8828 658.8181,-201.1764 658.8181,-192.1817"></path>
<polygon fill="#000000" stroke="#000000" points="662.3182,-192.0903 658.8181,-182.0904 655.3182,-192.0904 662.3182,-192.0903"></polygon>
</g>
<!-- W8&#45;&gt;J4 -->
<g id="edge29" class="edge">
<title>W8-&gt;J4</title>
<path fill="none" stroke="#000000" d="M715.8997,-221.8744C706.529,-212.3735 694.2159,-199.8894 683.4253,-188.949"></path>
<polygon fill="#000000" stroke="#000000" points="685.7671,-186.339 676.2531,-181.6771 680.7833,-191.2545 685.7671,-186.339"></polygon>
</g>
</g>
</svg>
</pre><p>Transitive edges are especially not drawn, since one of the two  edges can be a statement instead of a fork.</p><p>If speed-up <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>=</mo><mi>p</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-240" style="width: 3.537em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.871em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1002.82em, 3.23em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-241"><span class="mfrac" id="MathJax-Span-242"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.255em, -999.997em); top: -4.506em; left: 50%; margin-left: -0.356em;"><span class="msubsup" id="MathJax-Span-243"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-244" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.412em;"><span class="mn" id="MathJax-Span-245" style="font-size: 50%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.306em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-246" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.822em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.822em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span><span class="mo" id="MathJax-Span-247" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-248" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">p</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.684em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>=</mo><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-20">\frac{T_1}{p} = p</script></span>, we have perfect linear speed-up.</p><p><span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>T</mi><mi>p</mi></msub><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;>O</mi></mrow><mrow><mo>(</mo><mrow><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>+</mo><msub><mi>T</mi><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></msub></mrow><mo>)</mo></mrow></math>" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-249" style="width: 10.351em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.455em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(2.308em, 1008.302em, 4.818em, -999.997em); top: -3.788em; left: 0em;"><span class="mrow" id="MathJax-Span-250"><span class="msubsup" id="MathJax-Span-251"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-252" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-253" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-254" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="texatom" id="MathJax-Span-255" style="padding-left: 0.31em;"><span class="mrow" id="MathJax-Span-256"><span class="mi" id="MathJax-Span-257" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span class="mrow" id="MathJax-Span-258" style="padding-left: 0.207em;"><span class="mo" id="MathJax-Span-259" style="vertical-align: -0.459em;"><span><span style="font-size: 111%; font-family: STIXSizeTwoSym;">(</span></span></span><span class="mrow" id="MathJax-Span-260"><span class="mfrac" id="MathJax-Span-261"><span style="display: inline-block; position: relative; width: 1.13em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.179em, 1000.976em, 4.306em, -999.997em); top: -4.659em; left: 50%; margin-left: -0.51em;"><span class="msubsup" id="MathJax-Span-262"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-263" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mn" id="MathJax-Span-264" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.357em, -999.997em); top: -3.327em; left: 50%; margin-left: -0.254em;"><span class="mi" id="MathJax-Span-265" style="font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1001.13em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 1.13em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span><span class="mo" id="MathJax-Span-266" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">+</span><span class="msubsup" id="MathJax-Span-267" style="padding-left: 0.259em;"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-268" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-269" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∞</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span class="mo" id="MathJax-Span-270" style="vertical-align: -0.459em;"><span><span style="font-size: 111%; font-family: STIXSizeTwoSym;">)</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.794em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.122em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 2.816em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>T</mi><mi>p</mi></msub><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">O</mi></mrow><mrow><mo>(</mo><mrow><mfrac><msub><mi>T</mi><mn>1</mn></msub><mi>p</mi></mfrac><mo>+</mo><msub><mi>T</mi><mi mathvariant="normal">∞</mi></msub></mrow><mo>)</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-21">T_p = \mathcal{O}\left(\frac{T_1}{p} + T_\infty \right)</script></span></p><h2 id="parallel-prefix-sum-algorithm"><a class="anchor hidden-xs" href="#parallel-prefix-sum-algorithm" title="parallel-prefix-sum-algorithm"><span class="octicon octicon-link"></span></a>Parallel prefix sum algorithm</h2><p>Sequential version:</p><pre><code class="code=c++ hljs"><span class="hljs-keyword">out</span>[<span class="hljs-number">0</span>] = <span class="hljs-keyword">in</span>[<span class="hljs-number">0</span>];
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; input.length; ++i) {
    <span class="hljs-keyword">out</span>[i] = <span class="hljs-keyword">out</span>[i<span class="hljs-number">-1</span>] + <span class="hljs-keyword">in</span>[i];
} 
</code></pre><p>Parallel version does two passes:<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;>O</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-271" style="width: 2.462em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.001em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(2.257em, 1001.949em, 3.384em, -999.997em); top: -3.071em; left: 0em;"><span class="mrow" id="MathJax-Span-272"><span class="texatom" id="MathJax-Span-273"><span class="mrow" id="MathJax-Span-274"><span class="mi" id="MathJax-Span-275" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span class="mo" id="MathJax-Span-276" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-277" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-278" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 3.076em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">O</mi></mrow><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-22">\mathcal{O}(n)</script></span> work and <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;>O</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><mi>log</mi><mo>&amp;#x2061;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi></mrow><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-279" style="width: 4.255em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.486em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(2.257em, 1003.435em, 3.435em, -999.997em); top: -3.071em; left: 0em;"><span class="mrow" id="MathJax-Span-280"><span class="texatom" id="MathJax-Span-281"><span class="mrow" id="MathJax-Span-282"><span class="mi" id="MathJax-Span-283" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span class="mo" id="MathJax-Span-284" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-285" style="font-family: STIXGeneral-Regular;">log</span><span class="mo" id="MathJax-Span-286"></span><span class="texatom" id="MathJax-Span-287" style="padding-left: 0.207em;"><span class="mrow" id="MathJax-Span-288"><span class="mi" id="MathJax-Span-289" style="font-family: STIXGeneral-Italic;">n</span></span></span><span class="mo" id="MathJax-Span-290" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 3.076em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">O</mi></mrow><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-23">\mathcal{O}(\log{n})</script></span> span.</p><p>First it creates a divide &amp; conquer to compute the sum of the array. As soon as all children are done, you start again at the top with a parameter called fromLeft which starts with 0. For the left child simply copy the fromLeft of the parent and for the right child take the sum of the left child and add it to the fromLeft of the parent. For each node the result is then the computed sum at the beginning, plus the fromLeft variable.</p><h2 id="packing"><a class="anchor hidden-xs" href="#packing" title="packing"><span class="octicon octicon-link"></span></a>Packing</h2><p>Sort out all objects fullfilling a predicate:<br>
First create an array with either 0 or 1.<br>
Then use parallel-prefix sum on the bit-vector.<br>
Now we want to sort out all elements that fullfill the predicate. (bitsum array).<br>
We can solve this lastly by computing:<br>
<code>if(bits[i] == 1) output[bitsum[i]-1] = input[i]</code><br>
Putting the elements, which don’t fullfill the conditions to the right.</p><p>Quicksort parallel naive: Span: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-291" style="width: 2.41em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.949em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.898em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-292"><span class="mi" id="MathJax-Span-293" style="font-family: STIXGeneral-Italic;">O</span><span class="mo" id="MathJax-Span-294" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-295" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-296" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-24">O(n)</script></span>, Parallelism: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi><mo stretchy=&quot;false&quot;>(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-297" style="width: 4.818em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.947em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1003.896em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-298"><span class="mi" id="MathJax-Span-299" style="font-family: STIXGeneral-Italic;">O</span><span class="mo" id="MathJax-Span-300" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-301" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-302" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-303" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-304" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-305" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-306" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-307" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-25">O(log(n))</script></span></p><p>Using the packing algorithm we have a span of <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi><mo stretchy=&quot;false&quot;>(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-308" style="width: 4.818em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.947em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1003.896em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-309"><span class="mi" id="MathJax-Span-310" style="font-family: STIXGeneral-Italic;">O</span><span class="mo" id="MathJax-Span-311" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-312" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-313" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-314" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-315" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-316" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-317" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-318" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-26">O(log(n))</script></span>, for a total speedup of <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi><mo stretchy=&quot;false&quot;>(</mo><msup><mi>log</mi><mn>2</mn></msup><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-319" style="width: 5.33em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.357em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.539em, 1004.306em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-320"><span class="mi" id="MathJax-Span-321" style="font-family: STIXGeneral-Italic;">O</span><span class="mo" id="MathJax-Span-322" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-323"><span style="display: inline-block; position: relative; width: 1.693em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1001.232em, 4.357em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-324" style="font-family: STIXGeneral-Regular;">log</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 1.283em;"><span class="mn" id="MathJax-Span-325" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-326"></span><span class="mo" id="MathJax-Span-327" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-328" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-329" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-330" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><msup><mi>log</mi><mn>2</mn></msup><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-27">O(\log^2(n))</script></span>.</p><p>Ordering of shared memory accesses:<br>
<strong>Race condition</strong><br>
<strong>Data races</strong></p><ul>
<li>Atomicity<br>
– Serializibility =&gt; (Conflict serializability, Prefix consistencey).<br>
– Linearizability</li>
</ul><p>Approaches (with disciplines):<br>
Immutability: Data does not change, great!<br>
Isolated mutability: Data can change, but only one thread/task can access them.<br>
Mutable/shared data: Is data that can be accessed by everyone.</p><p>Bank account depositing.</p><p>New, aquire_mutex, release_mutex<br>
New creates the lock.<br>
Acquiring the lock is atomic! The instruction is called compare-and-swap. CAS_x86, LLISC_PowerPC/ARM<br>
Release, releases the lock.</p><p><strong>Critical section</strong>: Piece of code, which is executed atomically (executed only once). Can be implemented using the locking mechanism.</p><p><strong>Safety property</strong>: These bad states cannot be <strong>reached</strong>.</p><p><strong>Liveness</strong>: Sometime in the future, we will reach this good consistent state.</p><p><strong>Java has a re-entrant locks</strong>, every object has a lock.</p><pre><code class="code=java hljs"><span class="hljs-keyword">public</span> Interface Lock {
    <span class="hljs-comment">//State: Held and not held</span>
    <span class="hljs-comment">//What happens when you call lock(), when its locked already, etc.</span>
    <span class="hljs-comment">//Implement it, so that only the object holding the block can update it.</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">lock</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">// Entering the critical section</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">unlock</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//Leaving the critical section</span>
}
</code></pre><p><strong>CAP Theorem</strong><br>
Distributed data store can handle at most two of<br>
Consistency, Availability, Partition tolerance<br>
Consistency: Every read receives the most recent write or an error<br>
Availability: Every request receives a (non-error) response – without guarantee that it contains the most recent write<br>
Parition tolerance: The system continues to operate despite an arbitrary number of messages being dropped (or delayed) by the network between nodes</p><p>Starting from here, the new absolutely genious assistant took over:</p><pre><code class="code=java hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span> </span>{
	x = <span class="hljs-number">1</span>;
	y = x+<span class="hljs-number">1</span>;
	z = x+<span class="hljs-number">1</span>;
}
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">freordered</span><span class="hljs-params">()</span> </span>{
	x = <span class="hljs-number">1</span>;
	z = x+<span class="hljs-number">1</span>;
	y = x+<span class="hljs-number">1</span>;
}
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fmoreoptimised</span><span class="hljs-params">()</span>&amp;nbsp</span>;{
	x = <span class="hljs-number">1</span>;
	z = <span class="hljs-number">2</span>;
	y = <span class="hljs-number">2</span>;
}
</code></pre><p>Reasons for code change statements:</p><ul>
<li>Dead code elimination (remove unnecessairy code in the sequential style)</li>
<li>Register hoisting / Loop-invariant</li>
<li>Locality optimization (for this reason they might change statement lines)</li>
</ul><p>For example this code suddenly leads to a deadlock when compiled using -O3</p><pre><code class="code=java hljs"><span class="hljs-keyword">int</span> x;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">wait</span><span class="hljs-params">()</span> </span>{
	x = <span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(x == <span class="hljs-number">1</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">arrive</span><span class="hljs-params">()</span> </span>{
	x = <span class="hljs-number">2</span>;
}
</code></pre><p>With -O0:</p><pre><code class="code=assembly hljs">&lt;<span class="hljs-keyword">wait</span>&gt;(-O<span class="hljs-number">0</span>):
movl $01, %eax;
go:
cmp $01, %eax
jne go; <span class="hljs-regexp">//</span>It compiles this directly.
</code></pre><p>With -03</p><pre><code class="code=assembly hljs">&lt;<span class="hljs-keyword">wait</span>&gt;(-O3):
movl $01, %eax;
go:
je go; <span class="hljs-regexp">//</span>It compiles this directly.
</code></pre><p>Usually methods are optimised (not the full program).</p><p>Additionally the architecture might not guarantee sequential execution of the generated code (x86 only has Store buffer / local caching).<br>
So technically the write above might not change to x = 2, when compiled with -O0.</p><p>Danger of local caching:<br>
If thread 1 and thread 2 write to the same variable, they might not be updated.<br>
x86 flushes its buffer regularly though.</p><pre><code class="code=java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> </span>{
    <span class="hljs-keyword">boolean</span> stop = <span class="hljs-keyword">false</span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">while</span>(!stop) {}
    }
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">g</span><span class="hljs-params">()</span> </span>{
        stop = didUserQuit();
    }
}
</code></pre><p>Memory models solve this problem (came popular around 1995, so fairly recent):</p><ul>
<li>A minimal contract (guarantee for effects of memory operations).</li>
<li>Leaving open optimisiations for hardware and compiler.</li>
<li>Including guidelines for writing correct multithreaded programs.</li>
</ul><h2 id="critical-section"><a class="anchor hidden-xs" href="#critical-section" title="critical-section"><span class="octicon octicon-link"></span></a>Critical section</h2><p>The critical section is basically some code which is executed atomically<br>
The synchronized block is a critical section, but only on a single variable.</p><p>Required:</p><ul>
<li>Mutual exclusion: Statements from critical sections of two or more processes must not be interleved</li>
<li>Freedom from deadlock/livelock:</li>
<li>Freedom from starvation: If any process tries to enter its critical section, then that process must eventually succeed.</li>
</ul><h2 id="volatile-keyword"><a class="anchor hidden-xs" href="#volatile-keyword" title="volatile-keyword"><span class="octicon octicon-link"></span></a>Volatile keyword</h2><p>The volatile keyword creates a memory barrier / memory fence in the low level code. This means that no code statements can be exchanged over the volatile keyword.<br>
Advantages:</p><ul>
<li>You cannot synchronize on a null object in Java, but you can use a barrier, where the null reference is in the volatile object.</li>
<li>Volatile accesses do not count as data races, since the state of the volatile variable is well-defined at any time in the code.</li>
</ul><h2 id="state-space-diagram-which-leads-to-mutual-exclusions"><a class="anchor hidden-xs" href="#state-space-diagram-which-leads-to-mutual-exclusions" title="state-space-diagram-which-leads-to-mutual-exclusions"><span class="octicon octicon-link"></span></a>State space diagram (which leads to mutual exclusions)</h2><p><code>volatile boolean wantp=false, wantq=false</code><br>
Process P</p><pre><code class="code hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span></div><div class="code">p2: <span class="hljs-string">"non-critical section"</span>; <span class="hljs-keyword">while</span>(wantq);
p3: wantp = <span class="hljs-literal">true</span>;
p5: <span class="hljs-string">"critical section"</span>; wantp = <span class="hljs-literal">false</span>;
</div></div></code></pre><h1 id="process-q"><a class="anchor hidden-xs" href="#process-q" title="process-q"><span class="octicon octicon-link"></span></a>Process Q</h1><pre><code class="code hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span></div><div class="code">p2: <span class="hljs-string">"non-critical section"</span>; <span class="hljs-keyword">while</span>(wantp);
p3: wantq = <span class="hljs-literal">true</span>;
p5: <span class="hljs-string">"critical section"</span>; wantq = <span class="hljs-literal">false</span>;
</div></div></code></pre><p>State-space diagram, to show that mutual exclusion can happen (Usually shown by counter-example and not the entire state-space diagram has to be drawn).<br>
<a href="https://i.imgur.com/3dbl62N.png" target="_blank"></a></p><p>Since the statespace diagram is huge you can merge <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-28-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi><mn>1</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>p</mi><mn>2</mn><mo>,</mo><mi>p</mi><mn>4</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>p</mi><mn>5</mn></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-331" style="width: 6.355em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.177em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1005.126em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-332"><span class="mi" id="MathJax-Span-333" style="font-family: STIXGeneral-Italic;">p</span><span class="mn" id="MathJax-Span-334" style="font-family: STIXGeneral-Regular;">1</span><span class="texatom" id="MathJax-Span-335"><span class="mrow" id="MathJax-Span-336"><span class="mo" id="MathJax-Span-337" style="font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-338" style="font-family: STIXGeneral-Italic;">p</span><span class="mn" id="MathJax-Span-339" style="font-family: STIXGeneral-Regular;">2</span><span class="mo" id="MathJax-Span-340" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-341" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">p</span><span class="mn" id="MathJax-Span-342" style="font-family: STIXGeneral-Regular;">4</span><span class="texatom" id="MathJax-Span-343"><span class="mrow" id="MathJax-Span-344"><span class="mo" id="MathJax-Span-345" style="font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-346" style="font-family: STIXGeneral-Italic;">p</span><span class="mn" id="MathJax-Span-347" style="font-family: STIXGeneral-Regular;">5</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>p</mi><mn>2</mn><mo>,</mo><mi>p</mi><mn>4</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>p</mi><mn>5</mn></math></span></span><script type="math/tex" id="MathJax-Element-28">p1/p2,p4/p5</script></span>:<br>
<img src="https://i.imgur.com/tiI7mU7.png" alt=""></p><p>As you can see the state were both wantp and wantq are true can happen, which is not intended.</p><h2 id="state-space-diagram-which-leads-to-deadlocks"><a class="anchor hidden-xs" href="#state-space-diagram-which-leads-to-deadlocks" title="state-space-diagram-which-leads-to-deadlocks"><span class="octicon octicon-link"></span></a>State-space diagram (which leads to deadlocks)</h2><p>Process P</p><pre><code class="code=java hljs">Loop:
p2: <span class="hljs-string">"non-critical section"</span> wantp=<span class="hljs-literal">true</span>;
p3: <span class="hljs-keyword">while</span>(wantq);
p5: <span class="hljs-string">"critical section"</span>; wantp = <span class="hljs-literal">false</span>;
</code></pre><p>Process Q</p><pre><code class="code=java hljs">Loop:
q2: <span class="hljs-string">"non-critical section"</span> wantq=<span class="hljs-literal">true</span>;
q3: <span class="hljs-keyword">while</span>(wantp);
q5: <span class="hljs-string">"critical section"</span>; wantq = <span class="hljs-literal">false</span>;
</code></pre><p><img src="https://i.imgur.com/3d0I3LD.png" alt=""></p><p>The dotted lines assume <em>progress</em>, however this does not need to happen (the loop can terminate some time).</p><h2 id="state-space-diagram-which-leads-to-starvation"><a class="anchor hidden-xs" href="#state-space-diagram-which-leads-to-starvation" title="state-space-diagram-which-leads-to-starvation"><span class="octicon octicon-link"></span></a>State-space diagram (which leads to starvation)</h2><p>Starvation is not really shown in a state-space diagram, but in this code process Q could have to wait forever, if no process P shows up.</p><pre><code class="code=java hljs">Loop:
p2: <span class="hljs-string">"non-critical section"</span> <span class="hljs-keyword">while</span>(turn != 1);
p4: <span class="hljs-string">"critical section"</span>; turn = 2;
</code></pre><pre><code class="code=java hljs">Loop:
q2: <span class="hljs-string">"non-critical section"</span> <span class="hljs-keyword">while</span>(turn != 2);
q4: <span class="hljs-string">"critical section"</span>; turn = 1;
</code></pre><p>The dotted lines assume <strong>progress</strong> in the diagram, which is currently not the case.<br>
<img src="https://i.imgur.com/JRVvGOM.png" alt=""></p><h2 id="events-and-precedence"><a class="anchor hidden-xs" href="#events-and-precedence" title="events-and-precedence"><span class="octicon octicon-link"></span></a>Events and precedence</h2><p>Threads produce a sequence of events: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-29-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>p</mi><mn>0</mn></msub><mo>,</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-348" style="width: 4.869em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.998em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1003.947em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-349"><span class="msubsup" id="MathJax-Span-350"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.357em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-351" style="font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mn" id="MathJax-Span-352" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-353" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-354" style="padding-left: 0.207em;"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.357em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-355" style="font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mn" id="MathJax-Span-356" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-357" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-358" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">.</span><span class="mo" id="MathJax-Span-359" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">.</span><span class="mo" id="MathJax-Span-360" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">.</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mn>0</mn></msub><mo>,</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo></math></span></span><script type="math/tex" id="MathJax-Element-29">p_0,p_1,...</script></span></p><p>The <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-30-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>j</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mi>h</mi></mrow></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-361" style="width: 1.283em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.027em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.181em, 1001.027em, 2.564em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-362"><span class="msubsup" id="MathJax-Span-363"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.259em, 4.357em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-364" style="font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.352em; left: 0.31em;"><span class="texatom" id="MathJax-Span-365"><span class="mrow" id="MathJax-Span-366"><span class="mi" id="MathJax-Span-367" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-368" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">h</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.441em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>j</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mi>h</mi></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-30">j^{th}</script></span> occurence in thread P of this statement is: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-31-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msubsup><mi>p</mi><mi>i</mi><mi>j</mi></msubsup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-369" style="width: 1.027em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.078em, 1000.822em, 2.666em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-370"><span class="msubsup" id="MathJax-Span-371"><span style="display: inline-block; position: relative; width: 0.771em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.357em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-372" style="font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.259em, 4.306em, -999.997em); top: -4.506em; left: 0.515em;"><span class="mi" id="MathJax-Span-373" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.259em, 4.152em, -999.997em); top: -3.686em; left: 0.515em;"><span class="mi" id="MathJax-Span-374" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mi>p</mi><mi>i</mi><mi>j</mi></msubsup></math></span></span><script type="math/tex" id="MathJax-Element-31">p^j_i</script></span></p><p><span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-32-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mi>b</mi><mo>:&amp;#x21D4;</mo><mi>a</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-375" style="width: 6.099em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.972em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1004.972em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-376"><span class="mi" id="MathJax-Span-377" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-378" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">→</span><span class="mi" id="MathJax-Span-379" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">b</span><span class="mo" id="MathJax-Span-380" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">:<span style="font-family: STIXGeneral-Regular; font-style: normal; font-weight: normal;">⇔</span></span><span class="mi" id="MathJax-Span-381" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">a</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo stretchy="false">→</mo><mi>b</mi><mo>:⇔</mo><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-32">a \rightarrow b :\Leftrightarrow a</script></span> happens before <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-33-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-382" style="width: 0.669em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.515em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.464em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-383"><span class="mi" id="MathJax-Span-384" style="font-family: STIXGeneral-Italic;">b</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-33">b</script></span>.<br>
Interval: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-34-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>a</mi><mn>0</mn></msub><mo>,</mo><msub><mi>a</mi><mn>1</mn></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-385" style="width: 3.691em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.025em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1002.974em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-386"><span class="mo" id="MathJax-Span-387" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-388"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-389" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mn" id="MathJax-Span-390" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-391" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-392" style="padding-left: 0.207em;"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-393" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mn" id="MathJax-Span-394" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-395" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><msub><mi>a</mi><mn>0</mn></msub><mo>,</mo><msub><mi>a</mi><mn>1</mn></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-34">(a_0,a_1)</script></span>.<br>
Let <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-35-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>I</mi><mi>A</mi></msub><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>a</mi><mn>0</mn></msub><mo>,</mo><msub><mi>a</mi><mn>1</mn></msub><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><msub><mi>I</mi><mi>B</mi></msub><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>b</mi><mn>0</mn></msub><mo>,</mo><msub><mi>b</mi><mn>1</mn></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-396" style="width: 13.169em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.761em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1010.71em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-397"><span class="msubsup" id="MathJax-Span-398"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.361em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-399" style="font-family: STIXGeneral-Italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.361em;"><span class="mi" id="MathJax-Span-400" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">A</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-401" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mo" id="MathJax-Span-402" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">(</span><span class="msubsup" id="MathJax-Span-403"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-404" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mn" id="MathJax-Span-405" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-406" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-407" style="padding-left: 0.207em;"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-408" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mn" id="MathJax-Span-409" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-410" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-411" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-412" style="padding-left: 0.207em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.361em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-413" style="font-family: STIXGeneral-Italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.361em;"><span class="mi" id="MathJax-Span-414" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">B</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-415" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mo" id="MathJax-Span-416" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">(</span><span class="msubsup" id="MathJax-Span-417"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-418" style="font-family: STIXGeneral-Italic;">b</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mn" id="MathJax-Span-419" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-420" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-421" style="padding-left: 0.207em;"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-422" style="font-family: STIXGeneral-Italic;">b</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mn" id="MathJax-Span-423" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-424" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>I</mi><mi>A</mi></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>a</mi><mn>0</mn></msub><mo>,</mo><msub><mi>a</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>,</mo><msub><mi>I</mi><mi>B</mi></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>0</mn></msub><mo>,</mo><msub><mi>b</mi><mn>1</mn></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-35">I_A = (a_0,a_1), I_B = (b_0,b_1)</script></span>, then<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-36-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>I</mi><mi>A</mi></msub><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><msub><mi>I</mi><mi>B</mi></msub><mo>:&amp;#x21D4;</mo><msub><mi>a</mi><mn>1</mn></msub><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><msub><mi>b</mi><mn>0</mn></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-425" style="width: 10.402em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.507em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1008.507em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-426"><span class="msubsup" id="MathJax-Span-427"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.361em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-428" style="font-family: STIXGeneral-Italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.361em;"><span class="mi" id="MathJax-Span-429" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">A</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-430" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">→</span><span class="msubsup" id="MathJax-Span-431" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.361em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-432" style="font-family: STIXGeneral-Italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.361em;"><span class="mi" id="MathJax-Span-433" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">B</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-434" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">:<span style="font-family: STIXGeneral-Regular; font-style: normal; font-weight: normal;">⇔</span></span><span class="msubsup" id="MathJax-Span-435" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-436" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mn" id="MathJax-Span-437" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-438" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">→</span><span class="msubsup" id="MathJax-Span-439" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-440" style="font-family: STIXGeneral-Italic;">b</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mn" id="MathJax-Span-441" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>I</mi><mi>A</mi></msub><mo stretchy="false">→</mo><msub><mi>I</mi><mi>B</mi></msub><mo>:⇔</mo><msub><mi>a</mi><mn>1</mn></msub><mo stretchy="false">→</mo><msub><mi>b</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-36">I_A \rightarrow I_B :\Leftrightarrow a_1 \rightarrow b_0</script></span></p><p>Atomic register (can be any atomic memory though)<br>
Operations: <code>r.read(); r.write(v);</code><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-37-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C4;</mi><mo stretchy=&quot;false&quot;>(</mo><mi>J</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-442" style="width: 2.001em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.642em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.591em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-443"><span class="mi" id="MathJax-Span-444" style="font-family: STIXGeneral-Italic;">τ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-445" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-446" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mo" id="MathJax-Span-447" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>τ</mi><mo stretchy="false">(</mo><mi>J</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-37">\tau(J)</script></span> is the exact moment when an invocation <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-38-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>J</mi><mo>&amp;#x2208;</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo>,</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-448" style="width: 8.968em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.328em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1007.226em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-449"><span class="mi" id="MathJax-Span-450" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mo" id="MathJax-Span-451" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">∈</span><span class="mo" id="MathJax-Span-452" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">{</span><span class="mi" id="MathJax-Span-453" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-454" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-455" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-456" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mo" id="MathJax-Span-457" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-458" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">w</span><span class="mi" id="MathJax-Span-459" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-460" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-461" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-462" style="font-family: STIXGeneral-Italic;">e</span><span class="mo" id="MathJax-Span-463" style="font-family: STIXGeneral-Regular;">}</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>J</mi><mo>∈</mo><mo fence="false" stretchy="false">{</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo>,</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-38">J \in \{read,write\}</script></span> takes effect (from then on the result won’t change).</p><p>Aditionally atomic registers assert that <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-39-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C4;</mi><mo stretchy=&quot;false&quot;>(</mo><mi>J</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2260;</mo><mi>&amp;#x03C4;</mi><mo stretchy=&quot;false&quot;>(</mo><mi>K</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-464" style="width: 5.894em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.818em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1004.767em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-465"><span class="mi" id="MathJax-Span-466" style="font-family: STIXGeneral-Italic;">τ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-467" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-468" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mo" id="MathJax-Span-469" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-470" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≠</span><span class="mi" id="MathJax-Span-471" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">τ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-472" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-473" style="font-family: STIXGeneral-Italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mo" id="MathJax-Span-474" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>τ</mi><mo stretchy="false">(</mo><mi>J</mi><mo stretchy="false">)</mo><mo>≠</mo><mi>τ</mi><mo stretchy="false">(</mo><mi>K</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-39">\tau(J) \neq \tau(K)</script></span> for all pair of seperate invocations.</p><p>We assume that writing/reading to primitives is an atomic operation.</p><p>They are implemented differently though, by a register overwriting a value multiple times.</p><h2 id="locks"><a class="anchor hidden-xs" href="#locks" title="locks"><span class="octicon octicon-link"></span></a>Locks</h2><p>The goal of locks is simple, make sure the properties of a critical section is fulfilled.</p><ul>
<li>Mutual exclusion</li>
<li>Freedom from deadlocks (must eventually succeed).</li>
<li>Freedom from starvation</li>
</ul><p>Acquiring a lock consists of two parts (intervals):<br>
Doorway interval <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-40-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-475" style="width: 0.976em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.771em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.771em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-476"><span class="mi" id="MathJax-Span-477" style="font-family: STIXGeneral-Italic;">D</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>D</mi></math></span></span><script type="math/tex" id="MathJax-Element-40">D</script></span>, waiting interval <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-41-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>W</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-478" style="width: 1.13em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.925em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-479"><span class="mi" id="MathJax-Span-480" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>W</mi></math></span></span><script type="math/tex" id="MathJax-Element-41">W</script></span>.</p><p>A lock is fair, iff:<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-42-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msubsup><mi>D</mi><mi>A</mi><mi>j</mi></msubsup><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><msubsup><mi>D</mi><mi>B</mi><mi>k</mi></msubsup><mo stretchy=&quot;false&quot;>&amp;#x21D2;</mo><mi>C</mi><msubsup><mi>S</mi><mi>A</mi><mi>j</mi></msubsup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-481" style="width: 8.968em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.328em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.437em, 1007.328em, 3.025em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-482"><span class="msubsup" id="MathJax-Span-483"><span style="display: inline-block; position: relative; width: 1.232em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.72em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-484" style="font-family: STIXGeneral-Italic;">D</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.259em, 4.306em, -999.997em); top: -4.506em; left: 0.72em;"><span class="mi" id="MathJax-Span-485" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.515em, 4.152em, -999.997em); top: -3.686em; left: 0.72em;"><span class="mi" id="MathJax-Span-486" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">A</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-487" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">→</span><span class="msubsup" id="MathJax-Span-488" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 1.232em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.72em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-489" style="font-family: STIXGeneral-Italic;">D</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.412em, 4.152em, -999.997em); top: -4.352em; left: 0.72em;"><span class="mi" id="MathJax-Span-490" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.515em, 4.152em, -999.997em); top: -3.686em; left: 0.72em;"><span class="mi" id="MathJax-Span-491" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">B</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-492" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">⇒</span><span class="mi" id="MathJax-Span-493" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="msubsup" id="MathJax-Span-494"><span style="display: inline-block; position: relative; width: 1.027em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.515em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-495" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.259em, 4.306em, -999.997em); top: -4.506em; left: 0.566em;"><span class="mi" id="MathJax-Span-496" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.515em, 4.152em, -999.997em); top: -3.686em; left: 0.515em;"><span class="mi" id="MathJax-Span-497" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">A</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mi>D</mi><mi>A</mi><mi>j</mi></msubsup><mo stretchy="false">→</mo><msubsup><mi>D</mi><mi>B</mi><mi>k</mi></msubsup><mo stretchy="false">⇒</mo><mi>C</mi><msubsup><mi>S</mi><mi>A</mi><mi>j</mi></msubsup></math></span></span><script type="math/tex" id="MathJax-Element-42">D_A^j \rightarrow D_B^k \Rightarrow CS_A^j</script></span></p><h2 id="dekker’s-lock-dekker’s-algorithm"><a class="anchor hidden-xs" href="#dekker’s-lock-dekker’s-algorithm" title="dekker’s-lock-dekker’s-algorithm"><span class="octicon octicon-link"></span></a>Dekker’s lock (dekker’s algorithm)</h2><p>Mutual exclusive &amp; Deadlock free &amp; Starvation-free .<br>
We have not proven its correctness and it only works for 2 processes.<br>
Process P1</p><pre><code class="code hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span></div><div class="code"><span class="hljs-string">"non-critical section"</span>;
wantp = <span class="hljs-literal">true</span>; <span class="hljs-regexp">//</span>I want to <span class="hljs-keyword">do</span> my work (flag)
<span class="hljs-keyword">while</span>(wantq) { <span class="hljs-regexp">//</span>The other guy also wants to <span class="hljs-keyword">do</span> work
    <span class="hljs-keyword">if</span>(turn == <span class="hljs-number">2</span>) { <span class="hljs-regexp">//</span>The other guy does work
        wantp = <span class="hljs-literal">false</span>; <span class="hljs-regexp">//</span>Therefore I <span class="hljs-keyword">do</span> <span class="hljs-keyword">not</span> want it anymore
        <span class="hljs-keyword">while</span> (turn != <span class="hljs-number">1</span>); <span class="hljs-regexp">//</span> I wait <span class="hljs-keyword">until</span> it is my turn (sleeping)
        wantp = <span class="hljs-literal">true</span>; <span class="hljs-regexp">//</span> Now I want to <span class="hljs-keyword">do</span> my work again
    }
}
<span class="hljs-string">"critical-section"</span>;
turn = <span class="hljs-number">2</span>; <span class="hljs-regexp">//the</span> other guys turn.
wantp = <span class="hljs-literal">false</span>;
</div></div></code></pre><p>Process Q2</p><pre><code class="code hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span></div><div class="code"><span class="hljs-string">"non-critical section"</span>;
wantq = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">while</span>(wantp) {
    <span class="hljs-keyword">if</span>(turn == <span class="hljs-number">1</span>) {
        wantq = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">while</span>(turn != <span class="hljs-number">2</span>); <span class="hljs-regexp">//</span>While <span class="hljs-keyword">not</span> my turn
        wantq = <span class="hljs-literal">true</span>;
    }
}
<span class="hljs-string">"critical-section"</span>
turn = <span class="hljs-number">1</span>;
wantq = <span class="hljs-literal">false</span>;
</div></div></code></pre><h2 id="peterson-lock"><a class="anchor hidden-xs" href="#peterson-lock" title="peterson-lock"><span class="octicon octicon-link"></span></a>Peterson Lock</h2><p>Starvation free and fair (2 player version).<br>
<code>volatile bool flag[2] = {false,false}; volatile int victim;</code><br>
Process P1</p><pre><code class="code=java hljs">flag[P] = <span class="hljs-keyword">true</span>; <span class="hljs-comment">// I'm interested</span>
victim = P; <span class="hljs-comment">//But hey you go first</span>
<span class="hljs-keyword">while</span>(flag[Q] &amp;&amp; victim == P); <span class="hljs-comment">//As long as I am the victim and the other guy is interested, loop</span>
<span class="hljs-string">"critical section"</span>
flag[P] = <span class="hljs-keyword">false</span>;
</code></pre><p>Process Q2</p><pre><code class="code=java hljs">flag[Q] = <span class="hljs-literal">true</span>;
victim = Q;
<span class="hljs-keyword">while</span>(flag[P] &amp;&amp; victim == Q);
<span class="hljs-string">"critical section"</span>
flag[P] = <span class="hljs-literal">false</span>;
</code></pre><p>Proof using contradiction:<br>
Assume the critical section (which is executed atomically) and call it event P, this is concurrent with the critical section in Q.</p><p><span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-43-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><msub><mi>S</mi><mi>p</mi></msub><mo>,</mo><mi>C</mi><msub><mi>S</mi><mi>Q</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-498" style="width: 4.716em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.845em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1003.845em, 3.025em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-499"><span class="mi" id="MathJax-Span-500" style="font-family: STIXGeneral-Italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="msubsup" id="MathJax-Span-501"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.515em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-502" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mi" id="MathJax-Span-503" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-504" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-505" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="msubsup" id="MathJax-Span-506"><span style="display: inline-block; position: relative; width: 1.078em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.515em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-507" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mi" id="MathJax-Span-508" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">Q</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><msub><mi>S</mi><mi>p</mi></msub><mo>,</mo><mi>C</mi><msub><mi>S</mi><mi>Q</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-43">CS_p, CS_Q</script></span>.</p><p>Assume (without loss of generality) that the write statement victim=Q happens after victim=P.<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-44-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>W</mi><mi>Q</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>A</mi><mo>=</mo><mi>B</mi><mo stretchy=&quot;false&quot;>)</mo><mo>:&amp;#x21D4;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-509" style="width: 7.636em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.253em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1006.253em, 2.974em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-510"><span class="msubsup" id="MathJax-Span-511"><span style="display: inline-block; position: relative; width: 1.437em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.925em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-512" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.822em;"><span class="mi" id="MathJax-Span-513" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">Q</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-514" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-515" style="font-family: STIXGeneral-Italic;">A</span><span class="mo" id="MathJax-Span-516" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-517" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">B</span><span class="mo" id="MathJax-Span-518" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-519" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">:<span style="font-family: STIXGeneral-Regular; font-style: normal; font-weight: normal;">⇔</span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mi>Q</mi></msub><mo stretchy="false">(</mo><mi>A</mi><mo>=</mo><mi>B</mi><mo stretchy="false">)</mo><mo>:⇔</mo></math></span></span><script type="math/tex" id="MathJax-Element-44">W_Q(A=B) :\Leftrightarrow</script></span> This is the event when process Q assigns B to A.<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-45-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>W</mi><mi>Q</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>v</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>m</mi><mo>=</mo><mi>Q</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><msub><mi>W</mi><mi>p</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>v</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>m</mi><mo>=</mo><mi>P</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-520" style="width: 17.933em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.705em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1014.654em, 3.025em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-521"><span class="msubsup" id="MathJax-Span-522"><span style="display: inline-block; position: relative; width: 1.437em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.925em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-523" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.822em;"><span class="mi" id="MathJax-Span-524" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">Q</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-525" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-526" style="font-family: STIXGeneral-Italic;">v</span><span class="mi" id="MathJax-Span-527" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-528" style="font-family: STIXGeneral-Italic;">c</span><span class="mi" id="MathJax-Span-529" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-530" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-531" style="font-family: STIXGeneral-Italic;">m</span><span class="mo" id="MathJax-Span-532" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-533" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">Q</span><span class="mo" id="MathJax-Span-534" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-535" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">→</span><span class="msubsup" id="MathJax-Span-536" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.925em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-537" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.822em;"><span class="mi" id="MathJax-Span-538" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-539" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-540" style="font-family: STIXGeneral-Italic;">v</span><span class="mi" id="MathJax-Span-541" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-542" style="font-family: STIXGeneral-Italic;">c</span><span class="mi" id="MathJax-Span-543" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-544" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-545" style="font-family: STIXGeneral-Italic;">m</span><span class="mo" id="MathJax-Span-546" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-547" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">P</span><span class="mo" id="MathJax-Span-548" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mi>Q</mi></msub><mo stretchy="false">(</mo><mi>v</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>m</mi><mo>=</mo><mi>Q</mi><mo stretchy="false">)</mo><mo stretchy="false">→</mo><msub><mi>W</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>v</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>m</mi><mo>=</mo><mi>P</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-45">W_Q(victim=Q) \rightarrow W_p(victim=P)</script></span><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-46-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>W</mi><mi>p</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>f</mi><mi>l</mi><mi>a</mi><mi>g</mi><mo stretchy=&quot;false&quot;>[</mo><mi>P</mi><mo stretchy=&quot;false&quot;>]</mo><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><msub><mi>W</mi><mi>p</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>v</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>m</mi><mo>=</mo><mi>P</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><msub><mi>R</mi><mi>p</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>f</mi><mi>l</mi><mi>a</mi><mi>g</mi><mo stretchy=&quot;false&quot;>[</mo><mi>Q</mi><mo stretchy=&quot;false&quot;>]</mo><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><msub><mi>R</mi><mi>p</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>v</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>m</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mi>C</mi><msub><mi>S</mi><mi>p</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-549" style="width: 38.373em; display: inline-block;"><span style="display: inline-block; position: relative; width: 31.457em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1031.457em, 3.025em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-550"><span class="msubsup" id="MathJax-Span-551"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.925em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-552" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.822em;"><span class="mi" id="MathJax-Span-553" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-554" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-555" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.156em;"></span></span><span class="mi" id="MathJax-Span-556" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-557" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-558" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-559" style="font-family: STIXGeneral-Regular;">[</span><span class="mi" id="MathJax-Span-560" style="font-family: STIXGeneral-Italic;">P</span><span class="mo" id="MathJax-Span-561" style="font-family: STIXGeneral-Regular;">]</span><span class="mo" id="MathJax-Span-562" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-563" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-564" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-565" style="font-family: STIXGeneral-Italic;">u</span><span class="mi" id="MathJax-Span-566" style="font-family: STIXGeneral-Italic;">e</span><span class="mo" id="MathJax-Span-567" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-568" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">→</span><span class="msubsup" id="MathJax-Span-569" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.925em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-570" style="font-family: STIXGeneral-Italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.822em;"><span class="mi" id="MathJax-Span-571" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-572" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-573" style="font-family: STIXGeneral-Italic;">v</span><span class="mi" id="MathJax-Span-574" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-575" style="font-family: STIXGeneral-Italic;">c</span><span class="mi" id="MathJax-Span-576" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-577" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-578" style="font-family: STIXGeneral-Italic;">m</span><span class="mo" id="MathJax-Span-579" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-580" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">P</span><span class="mo" id="MathJax-Span-581" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-582" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">→</span><span class="msubsup" id="MathJax-Span-583" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 1.027em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.566em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-584" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.617em;"><span class="mi" id="MathJax-Span-585" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-586" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-587" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.156em;"></span></span><span class="mi" id="MathJax-Span-588" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-589" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-590" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-591" style="font-family: STIXGeneral-Regular;">[</span><span class="mi" id="MathJax-Span-592" style="font-family: STIXGeneral-Italic;">Q</span><span class="mo" id="MathJax-Span-593" style="font-family: STIXGeneral-Regular;">]</span><span class="mo" id="MathJax-Span-594" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-595" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">→</span><span class="msubsup" id="MathJax-Span-596" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 1.027em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.566em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-597" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.617em;"><span class="mi" id="MathJax-Span-598" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-599" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-600" style="font-family: STIXGeneral-Italic;">v</span><span class="mi" id="MathJax-Span-601" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-602" style="font-family: STIXGeneral-Italic;">c</span><span class="mi" id="MathJax-Span-603" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-604" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-605" style="font-family: STIXGeneral-Italic;">m</span><span class="mo" id="MathJax-Span-606" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-607" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">→</span><span class="mi" id="MathJax-Span-608" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="msubsup" id="MathJax-Span-609"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.515em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-610" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.515em;"><span class="mi" id="MathJax-Span-611" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>f</mi><mi>l</mi><mi>a</mi><mi>g</mi><mo stretchy="false">[</mo><mi>P</mi><mo stretchy="false">]</mo><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mo stretchy="false">)</mo><mo stretchy="false">→</mo><msub><mi>W</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>v</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>m</mi><mo>=</mo><mi>P</mi><mo stretchy="false">)</mo><mo stretchy="false">→</mo><msub><mi>R</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>f</mi><mi>l</mi><mi>a</mi><mi>g</mi><mo stretchy="false">[</mo><mi>Q</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mo stretchy="false">→</mo><msub><mi>R</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>v</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">→</mo><mi>C</mi><msub><mi>S</mi><mi>p</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-46">W_p(flag[P]=true) \rightarrow W_p(victim=P) \rightarrow R_p(flag[Q]) \rightarrow R_p(victim) \rightarrow CS_p</script></span></p><p>In order for both processes to be concurrent, both flags have to be set to true. When entering the while loop in process P, victim is set to P. As long as P is the victim it won’t be able to continue until Q makes himself a victim (in doing that Q waits and P can enter the critical section).</p><h2 id="my-proof"><a class="anchor hidden-xs" href="#my-proof" title="my-proof"><span class="octicon octicon-link"></span></a>My proof</h2><p>Let’s assume both processes would be concurrenct. WLOG Q sets himself to the victim after P, therefore surely the flag of P has been set and when Q becomes victim both lock conditions hold, which is a contradication.</p><p>Starvation freedom proof:</p><h2 id="filter-lock"><a class="anchor hidden-xs" href="#filter-lock" title="filter-lock"><span class="octicon octicon-link"></span></a>Filter lock</h2><p>Deadlock &amp; Starvation free, but is not fair!<br>
Generalised version of a peterson lock.<br>
You set your own flag always one level higher and directly after that you set victim[level] = me.<br>
Then if you aren’t the victim anymore or if nobody exists with a flag higher or equal to yours, you can move up.<br>
If n threads try to acquire the lock at the same time, at least one victim won’t make it. Therefore n-1 can possibly come to the second level and so on.<br>
There should be levels 1-n inclusive.</p><p>After having done the job in the CS (level n) you can continue.</p><h2 id="safe-swmr-single-writer-multiple-reader-register"><a class="anchor hidden-xs" href="#safe-swmr-single-writer-multiple-reader-register" title="safe-swmr-single-writer-multiple-reader-register"><span class="octicon octicon-link"></span></a>Safe SWMR (single writer multiple reader) register</h2><p>At any given time multiple read operations can happen, however only one concurrent write can happen.<br>
If a read and a write happen concurrently, any value of the domain of r can be read.</p><p>MWMR can be implemented using SWMR registers.<br>
Snapshoting.<br>
Timestamps are also called counter values (can overflow).</p><h2 id="bakery-algorithm-on-swmr"><a class="anchor hidden-xs" href="#bakery-algorithm-on-swmr" title="bakery-algorithm-on-swmr"><span class="octicon octicon-link"></span></a>Bakery algorithm (on SWMR)</h2><p>Intuition: A process takes a ticket and has to wait until its ticket number is the lowest. In order to account for global re-ordering make sure nq &lt; np.</p><pre><code class="code=java hljs"><span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> np = <span class="hljs-number">0</span>, nq = <span class="hljs-number">0</span>;

Process P
loop
  non-critical section
  np = nq + <span class="hljs-number">1</span>;
  <span class="hljs-keyword">while</span>(nq != <span class="hljs-number">0</span> &amp;&amp; nq &lt; np); <span class="hljs-comment">//Notice SMALLER THAN np.</span>
  critical section
  np = <span class="hljs-number">0</span>;

Process Q
loop
  non-critical section
  nq = np + <span class="hljs-number">1</span>;
  <span class="hljs-keyword">while</span>(np != <span class="hljs-number">0</span> &amp;&amp; np &lt;= nq); <span class="hljs-comment">//Notice SMALLER EQUAL TO nq.</span>
  nq = <span class="hljs-number">0</span>;
</code></pre><h2 id="bakery-algorithm-n-processes"><a class="anchor hidden-xs" href="#bakery-algorithm-n-processes" title="bakery-algorithm-n-processes"><span class="octicon octicon-link"></span></a>Bakery algorithm (n processes)</h2><pre><code class="code=java hljs">lock(<span class="hljs-keyword">id</span>):
    flag [<span class="hljs-keyword">id</span>] = <span class="hljs-literal">true</span>; <span class="hljs-comment">//Want to take the lock</span>
    label[<span class="hljs-keyword">id</span>] = max(label[<span class="hljs-number">0</span>],...,label[n<span class="hljs-number">-1</span>]) + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">do</span> {
        boolean lowest = <span class="hljs-literal">true</span>; <span class="hljs-comment">//can pass</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) <span class="hljs-keyword">if</span>(i != <span class="hljs-keyword">id</span> &amp;&amp; flag[i] &amp;&amp; (label[i],i) &lt; (label[<span class="hljs-keyword">id</span>],<span class="hljs-keyword">id</span>))&amp;nbsp;lowest = <span class="hljs-literal">false</span>;
    }
    
unlock(<span class="hljs-keyword">id</span>):
    flag[me] = <span class="hljs-literal">false</span>;
</code></pre><h2 id="-processes-lt--variables"><a class="anchor hidden-xs" href="#-processes-lt--variables" title="-processes-lt--variables"><span class="octicon octicon-link"></span></a># Processes &lt;= # Variables</h2><p>A system with <em>atomic read/writes</em> needs at least <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-47-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-612" style="width: 0.669em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.515em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1000.464em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-613"><span class="mi" id="MathJax-Span-614" style="font-family: STIXGeneral-Italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-47">n</script></span> variables, where <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-48-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-615" style="width: 0.669em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.515em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1000.464em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-616"><span class="mi" id="MathJax-Span-617" style="font-family: STIXGeneral-Italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-48">n</script></span> are the number of processes using the system, in order to be <strong>dead-lock free</strong>.<br>
This rule holds for all n (besides 1, duh.)</p><h2 id="atomicboolean"><a class="anchor hidden-xs" href="#atomicboolean" title="atomicboolean"><span class="octicon octicon-link"></span></a>AtomicBoolean</h2><p>Atomic operations depend on the state of the architecture!<br>
<code>getAndSet(bool new)</code> Sets the value atomically and returns its previous value.<br>
<code>compareAndSet(bool expected, bool new)</code> Sets the value atomically iff the previous value is what was expected. It returns true if the actual value == expected value.<br>
<code>lazySet(bool new)</code> eventually sets the value to new.<br>
<code>set(new)</code> Set current value.<br>
<code>get(new)</code> Get current value.</p><p>Test-and-set can be implemented using <code>compareAndSet(false,true)</code></p><h2 id="practical-lock-implementations-spin-locks"><a class="anchor hidden-xs" href="#practical-lock-implementations-spin-locks" title="practical-lock-implementations-spin-locks"><span class="octicon octicon-link"></span></a>Practical lock implementations (Spin locks)</h2><p>The code in TAS/CAS have to be executed atomically!</p><p><strong>Test and set</strong></p><pre><code class="code=java hljs"><span class="hljs-function">boolean <span class="hljs-title">TAS</span>(<span class="hljs-params">memref l</span>) </span>{
    <span class="hljs-keyword">if</span>(mem[l] != <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    mem[l] = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
} &lt;=&gt; CAS(s,<span class="hljs-literal">false</span>,<span class="hljs-literal">true</span>);

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">acquire</span>(<span class="hljs-params"></span>) </span>{<span class="hljs-keyword">while</span>(!TAS(<span class="hljs-keyword">lock</span>));}
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">unlock</span>(<span class="hljs-params"></span>) </span>{mem[<span class="hljs-keyword">lock</span>] = <span class="hljs-literal">true</span>;}
</code></pre><p>Similar to what getAndSet does in Java.</p><p><strong>Compare and swap</strong><br>
Similar to what <code>.compareAndSet()</code> does in Java.</p><pre><code class="code=java hljs"><span class="hljs-function">boolean <span class="hljs-title">CAS</span>(<span class="hljs-params">memref s, boolean expected, boolean to</span>) </span>{
    <span class="hljs-keyword">if</span>(mem[s] != expected) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    mem[s] = to;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">acquire</span>(<span class="hljs-params"></span>) </span>{<span class="hljs-keyword">while</span>(!CAS(<span class="hljs-keyword">lock</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>));}
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">unlock1</span>(<span class="hljs-params"></span>) </span>{ CAS(<span class="hljs-keyword">lock</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>); }
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">unlock2</span>(<span class="hljs-params"></span>) </span>{ mem[<span class="hljs-keyword">lock</span>] = <span class="hljs-literal">false</span>; }
</code></pre><p>Is generalisable to 3 or more threads. Just use a different number:</p><pre><code>void aqcuire(int i) {while(!CAS(lock,0,i));}
void unlock1() {mem[lock] = 0;}
void unlock2(int i) {!CAS(lock,i,0);}
</code></pre><p><strong>Test and Test and set (TATAS)</strong><br>
Not generalisable.</p><pre><code class="code=java hljs">@<span class="hljs-function">Override
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">lock</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">do</span> {
        <span class="hljs-keyword">while</span>(<span class="hljs-keyword">lock</span>.<span class="hljs-keyword">get</span>()); <span class="hljs-comment">//as long as its locked</span>
    } <span class="hljs-keyword">while</span>(<span class="hljs-keyword">lock</span>.compareAndSet(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)); <span class="hljs-comment">//since acquire is not atomic, recheck</span>
}
</code></pre><p>Das gibt aber ein riesiger Overhead, wegen Stau im Bus (sequential bus)!</p><p><strong>Exponential backoff</strong><br>
Basically still do the same, but this time wait after a test is unsuccessful and tendencially wait longer.</p><pre><code class="code=java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">lock</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> bounddDelay</span>) </span>{
    <span class="hljs-keyword">do</span> {
        <span class="hljs-keyword">int</span> maxdelay = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span>(<span class="hljs-keyword">lock</span>.<span class="hljs-keyword">get</span>()) {
            sleep(Random.nextInt(maxdelay));
            <span class="hljs-keyword">if</span>(delay &lt; boundDelay/<span class="hljs-number">2</span>) delay *= <span class="hljs-number">2</span>;
        }
    } <span class="hljs-keyword">while</span>(<span class="hljs-keyword">lock</span>.compareAndSet(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>));
}
</code></pre><p>Without bound-delay the expected wait time might be infinite depending on the success rate.</p><p>Read-modify-write operations:<br>
Enable implementation of a mutex in <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-49-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;>O</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-618" style="width: 2.462em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.001em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(2.257em, 1001.949em, 3.384em, -999.997em); top: -3.071em; left: 0em;"><span class="mrow" id="MathJax-Span-619"><span class="texatom" id="MathJax-Span-620"><span class="mrow" id="MathJax-Span-621"><span class="mi" id="MathJax-Span-622" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span class="mo" id="MathJax-Span-623" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-624" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-625" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 3.076em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">O</mi></mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-49">\mathcal{O}(1)</script></span> space.<br>
Test-And-Set (TAS): Example TSL register, flag (Motorola)<br>
Compare-And-Swap (CAS): LOCK CMPXCHG (Intel x86)<br>
Load Linked / Store conditional: LDREX / STREX (ARM)m LL/SC (MIPS / PowerPC).</p><h2 id="javautilconcurrentlock-interface"><a class="anchor hidden-xs" href="#javautilconcurrentlock-interface" title="javautilconcurrentlock-interface"><span class="octicon octicon-link"></span></a>Java.util.concurrent.Lock interface</h2><p>Es gibt folgende Standardlocks:<br>
java.util.concurrent.locks.ReentrantLock</p><p>Java’s lock sollte einfach auf folgender Art aufgerufen werden.</p><pre><code class="code=java hljs">Lock <span class="hljs-keyword">lock</span> = <span class="hljs-keyword">new</span> ReentrantLock(<span class="hljs-literal">true</span>); <span class="hljs-comment">//true, so it is fair.</span>
l.<span class="hljs-keyword">lock</span>();
<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// access the resource protected by this lock</span>
} <span class="hljs-keyword">finally</span> {
    l.unlock();
}
</code></pre><h2 id="bank-account-problem"><a class="anchor hidden-xs" href="#bank-account-problem" title="bank-account-problem"><span class="octicon octicon-link"></span></a>Bank account problem</h2><p>Leads to a deadlock, both of the threads try to acquire a lock, which the other thread has.</p><pre><code class="code=java hljs">x.transferTo(<span class="hljs-number">1</span>,y);
y.transferTo(<span class="hljs-number">1</span>,x);

transferTo(<span class="hljs-keyword">int</span> amount, Bankaccount other) {
    <span class="hljs-keyword">synchronized</span>(<span class="hljs-keyword">this</span>) {
        <span class="hljs-keyword">this</span>.withdraw(amount);
        other.deposit(amount);
    }

}
</code></pre><p>Deadlock detection: You get a deadlock if you have a steiner graph (directed graph), that contains a cycle.</p><h2 id="solving-deadlocks"><a class="anchor hidden-xs" href="#solving-deadlocks" title="solving-deadlocks"><span class="octicon octicon-link"></span></a>Solving deadlocks</h2><p>Resource ordering: Make sure to prioritize one over the other. For the bank account problem lock the one with the smaller UUID first (generate your own if needed, as below).</p><p>Two-phase locking: Try to get all locks that I need at the start and if I don’t get all of them retry. This can lead to livelocks though!</p><p>Philosophers dining table can be solved using both methods.</p><p>Trick using AtomicLong:</p><pre><code class="code=java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BankAccount</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> AtomicLong counter = <span class="hljs-keyword">new</span> AtomicLong();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> index = counter.incrementAndGet(); <span class="hljs-comment">//this increases the index of the static counter on instantiation.</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">transfer</span><span class="hljs-params">(<span class="hljs-keyword">int</span> amount, BankAccount to)</span> </span>{
        <span class="hljs-keyword">if</span>(to.index &lt; <span class="hljs-keyword">this</span>.index) {}
    }
}
</code></pre><p><strong>Reader/Writer lock</strong><br>
Current solution: Lock<br>
Wikipedia problem.<br>
Reader/Writer: The reader may not change anything, so no view counter.</p><p>Three states: Not held, held for writing by one thread, held for reading for all reading threads.</p><p>Bedingungen:<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-50-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn><mo>&amp;#x2264;</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>s</mi><mo>&amp;#x2264;</mo><mn>1</mn></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-626" style="width: 8.097em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.611em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1006.509em, 2.82em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-627"><span class="mn" id="MathJax-Span-628" style="font-family: STIXGeneral-Regular;">0</span><span class="mo" id="MathJax-Span-629" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≤</span><span class="mi" id="MathJax-Span-630" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">w</span><span class="mi" id="MathJax-Span-631" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-632" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-633" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-634" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-635" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-636" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-637" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≤</span><span class="mn" id="MathJax-Span-638" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.184em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn><mo>≤</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>s</mi><mo>≤</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-50">0 \leq writers \leq 1</script></span><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-51-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn><mo>&amp;#x2264;</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>r</mi><mi>s</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-639" style="width: 6.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.074em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1005.074em, 2.82em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-640"><span class="mn" id="MathJax-Span-641" style="font-family: STIXGeneral-Regular;">0</span><span class="mo" id="MathJax-Span-642" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≤</span><span class="mi" id="MathJax-Span-643" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-644" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-645" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-646" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mi" id="MathJax-Span-647" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-648" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-649" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.184em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn><mo>≤</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>r</mi><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-51">0 \leq readers</script></span><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-52-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>s</mi><mo>&amp;#x2217;</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>r</mi><mi>s</mi><mo>==</mo><mn>0</mn></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-650" style="width: 11.888em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.736em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1009.736em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-651"><span class="mi" id="MathJax-Span-652" style="font-family: STIXGeneral-Italic;">w</span><span class="mi" id="MathJax-Span-653" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-654" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-655" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-656" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-657" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-658" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-659" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">∗</span><span class="mi" id="MathJax-Span-660" style="font-family: STIXGeneral-Italic; padding-left: 0.259em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-661" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-662" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-663" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mi" id="MathJax-Span-664" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-665" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-666" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-667" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=<span style="font-family: STIXGeneral-Regular; font-style: normal; font-weight: normal;">=</span></span><span class="mn" id="MathJax-Span-668" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>s</mi><mo>∗</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>r</mi><mi>s</mi><mo>==</mo><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-52">writers * readers == 0</script></span></p><p>There is a java readers-writer lock, but you have to explicitly state fairness and starvation can arise.</p><p>Solution for starvation:</p><ul>
<li>When a writer finishes, a number k of currently waiting readers may pass.</li>
<li>When the k readers have passed, the next writer may enter (if any), otherwise further readers may enter until the next writer enters (who has to wait until current readers finish).</li>
</ul><pre><code class="code=java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CReadWriteLock</span>  </span>{
	<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> readersHolding = <span class="hljs-number">0</span>, writersHolding = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> readersWaiting = <span class="hljs-number">0</span>, writersWaiting = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> readersCountdown = <span class="hljs-number">0</span>;

	<span class="hljs-function"><span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">acquireRead</span><span class="hljs-params">()</span> </span>{
		readersWaiting++;
		<span class="hljs-comment">//By default give priority to writer unless readersCountdown &gt; 0</span>
		<span class="hljs-keyword">while</span>(writersHolding &gt; <span class="hljs-number">0</span> || (writersWaiting &gt; <span class="hljs-number">0</span> &amp;&amp; readersCountdown &lt;= <span class="hljs-number">0</span>)) {
			<span class="hljs-keyword">try</span> {wait();} <span class="hljs-keyword">catch</span> (InterruptedException e) {}
		}
		<span class="hljs-keyword">if</span>(readersCountdown &gt; <span class="hljs-number">0</span>) readersCountdown--; <span class="hljs-comment">//just to not make an unnecessary underflow. Overflow can still happen though.</span>
		readersWaiting--; <span class="hljs-comment">//acquired read</span>
		readersHolding++;
	}

	<span class="hljs-function"><span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">releaseRead</span><span class="hljs-params">()</span> </span>{
		readersHolding--;
		notifyAll();
	}

	<span class="hljs-function"><span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">acquireWrite</span><span class="hljs-params">()</span> </span>{
		writersWaiting++;
		<span class="hljs-keyword">while</span>(readersHolding &gt; <span class="hljs-number">0</span> || writersHolding &gt; <span class="hljs-number">0</span> || readersCountdown &gt; <span class="hljs-number">0</span>) {
			<span class="hljs-keyword">try</span> {wait();} <span class="hljs-keyword">catch</span>(InterruptedException e) {}
		}
		writersWaiting--;
		writersHolding++;
	}

	<span class="hljs-function"><span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">releaseWrite</span><span class="hljs-params">()</span> </span>{
		writersHolding--;
		readersCountdown = readersWaiting;
		notifyAll();
	}
}
</code></pre><p><strong>Reentrant Lock</strong> is basically a lock that allows reacquiring. Therefore the try-finally block exists.</p><p><strong>java.util.concurrent.locks.ReentrantReadWriteLock</strong><br>
Interface for a general read-write lock:<br>
<code>java.util.concurrent.locks.ReadWriteLock</code><br>
The actual class object can be accessed using:<br>
<code>java.util.concurrent.locks.ReentrantReadWriteLock</code></p><p>The ReentrantReadWriteLock by default is not fair!<br>
In order to make it fair instantiate it using <code>true</code> in the constructor:<br>
<code>ReadWriteLock lock = new ReentrantReadWriteLock(true);</code></p><p><code>rw.readLock().lock(); rw.readLock().unlock();</code><br>
<code>rw.writeLock().lock(); rw.writeLock().unlock();</code></p><p><code>final Condition cond = new lock.newCondition();</code><br>
<code>cond.await()</code> (equivalent to wait in synchronized block).<br>
<code>cond.signal()</code> (equivalent to notify)<br>
<code>cond.signalAll()</code> (equivalent to notifyAll)</p><p><strong>Semaphore</strong></p><pre><code class="code=java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomSemaphore</span> </span>{
	<span class="hljs-keyword">int</span> bound;
	CustomSemaphore(<span class="hljs-keyword">int</span> bound) {
		<span class="hljs-keyword">this</span>.bound = bound;
	}
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">acquire</span><span class="hljs-params">()</span> </span>{
		<span class="hljs-keyword">synchronized</span>(<span class="hljs-keyword">this</span>) {
			<span class="hljs-keyword">while</span>(bound &lt;= <span class="hljs-number">0</span>) {
				<span class="hljs-keyword">try</span>{wait();}<span class="hljs-keyword">catch</span>(Exception e){}
			}
			bound--;
		}
	}
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">release</span><span class="hljs-params">()</span> </span>{
		<span class="hljs-keyword">synchronized</span>(<span class="hljs-keyword">this</span>) {
			bound++;
			notifyAll();
		}
	}
}
</code></pre><p>Java also has its own semaphore implementation:</p><p><strong>java.util.concurrent.Semaphore</strong> in the following way:<br>
<code>Semaphore s = new Semaphore(bound,true);</code><br>
The <code>true</code> argument is to ensure fairness.</p><p>Since Dijkstra is dutch: vrijgeven (V) &amp; probeeren (P ) is used.</p><p><em><strong>Lock granularity</strong></em><br>
Given a list, which acts like a SORTED set:<br>
Add,remove,find.</p><pre><code class="public hljs">    <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span> </span>{
        T item;
        <span class="hljs-keyword">int</span> key;
        Node next;
    }
    
    <span class="hljs-keyword">private</span> Node head, tail;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span> <span class="hljs-params">(T x)</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">remove</span><span class="hljs-params">(T x)</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">contains</span><span class="hljs-params">(T x)</span> </span>{}
} 
</code></pre><p>However not the entire list has to be locked, also the nodes can be locked seperate.<br>
If we want to remove c, we first want to lock read-lock c. Then we write-lock b.<br>
If we want to insert an element to c.<br>
This is called <strong>hand-over-hand locking</strong> (usually used with pointers).</p><pre><code>public boolean remove(T item) {
    Node pred = null, curr = null;
    int key = item.hashCode();
    head.lock();
    try {
        pred = head;
        curr = pred.next;
        curr.lock();
        try {
            //find and remove
            while(curr.key &lt; key) {
                //Hangeln durch die Liste und deswegen kann man den Thread nicht überholen.
                pred.unlock();
                pred = curr;
                curr = curr.next;
                curr.lock();
            }
            if(curr.key == key) {
                pred.next = curr.next; //remove it
                return true;
            }
            return false;
        } finally { curr.unlock();}
    } finally { pred.unlock(); }

}
</code></pre><p><strong>Optimistic synchronization</strong><br>
add( c );<br>
Just go until you are at c without locking and then lock b and d, then do check 1, then insert c, then check 2.<br>
Then you have to validate it!<br>
First: After locking and before inserting, check whether the link from b to d still exists.<br>
Second: Go through the entire set again and check, whether b was deleted.</p><p>If any of the check fails, start from the beginning.</p><p><strong>Lazy-list</strong><br>
In order to not traverse the list twice, mark the current node as removed.</p><p>You do a traversal until you reach C (with predecessor B).<br>
If B and C are unmarked, you know that C is not reachable from head and C is reachable from B (but could be over multiple nodes B’,B’’,…).</p><p>So you still need to check whether C is the successor of B.</p><p>Let’s say <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-53-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>r</mi><mi>e</mi><mi>m</mi><mi>o</mi><mi>v</mi><mi>e</mi><mo stretchy=&quot;false&quot;>(</mo><mi>c</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-669" style="width: 5.126em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.203em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1004.152em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-670"><span class="mi" id="MathJax-Span-671" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-672" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-673" style="font-family: STIXGeneral-Italic;">m</span><span class="mi" id="MathJax-Span-674" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-675" style="font-family: STIXGeneral-Italic;">v</span><span class="mi" id="MathJax-Span-676" style="font-family: STIXGeneral-Italic;">e</span><span class="mo" id="MathJax-Span-677" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-678" style="font-family: STIXGeneral-Italic;">c</span><span class="mo" id="MathJax-Span-679" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>r</mi><mi>e</mi><mi>m</mi><mi>o</mi><mi>v</mi><mi>e</mi><mo stretchy="false">(</mo><mi>c</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-53">remove(c)</script></span> and remove(b). Remove b needs to lock c and b, however if just before the lock c gets deleted, you have to do the second check.</p><p>Lazy-list marks a node as removed. Right after locking, we check whether any of the nodes was marked as removed.<br>
Since optimistically this happens rarely, we rarely have to go through the entire list.</p><p>Still not starvation free, but hey optimism!</p><p><strong>Wait-free</strong></p><pre><code>public boolean contains(Item item) {
    int key = item.hashCode();
    Node curr = this.head;
    while(curr.key &lt; key) {
        curr = curr.next;
    }
    return curr.key == key &amp;&amp; !curr.marked;
}
</code></pre><p><strong>Lazy-skiplist</strong><br>
A collection of lists, which abstractly contains n elements (pillars).<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-54-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;double-struck&quot;>P</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><mi>h</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo>=</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><msup><mn>0.5</mn><mi>n</mi></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-680" style="width: 10.761em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.814em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.693em, 1008.814em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-681"><span class="texatom" id="MathJax-Span-682"><span class="mrow" id="MathJax-Span-683"><span class="mi" id="MathJax-Span-684" style="font-family: STIXGeneral-Regular;">ℙ</span></span></span><span class="mo" id="MathJax-Span-685" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-686" style="font-family: STIXGeneral-Italic;">h</span><span class="mi" id="MathJax-Span-687" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-688" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-689" style="font-family: STIXGeneral-Italic;">g</span><span class="mi" id="MathJax-Span-690" style="font-family: STIXGeneral-Italic;">h</span><span class="mi" id="MathJax-Span-691" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-692" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-693" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">n</span><span class="mo" id="MathJax-Span-694" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-695" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="msubsup" id="MathJax-Span-696" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 1.693em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1001.181em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-697" style="font-family: STIXGeneral-Regular;">0.5</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 1.232em;"><span class="mi" id="MathJax-Span-698" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="double-struck">P</mi></mrow><mo stretchy="false">(</mo><mi>h</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo>=</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mn>0.5</mn><mi>n</mi></msup></math></span></span><script type="math/tex" id="MathJax-Element-54">\mathbb{P}(height = n) = 0.5^n</script></span><br>
By definition <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-55-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2212;</mo><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-699" style="width: 2.103em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.693em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.847em, 1001.642em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-700"><span class="mo" id="MathJax-Span-701" style="font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-702" style="font-family: STIXGeneral-Regular;">∞</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>−</mo><mi mathvariant="normal">∞</mi></math></span></span><script type="math/tex" id="MathJax-Element-55">-\infty</script></span> and <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-56-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-703" style="width: 2.103em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.693em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.847em, 1001.642em, 2.769em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-704"><span class="mo" id="MathJax-Span-705" style="font-family: STIXGeneral-Regular;">+</span><span class="mi" id="MathJax-Span-706" style="font-family: STIXGeneral-Regular;">∞</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.122em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo><mi mathvariant="normal">∞</mi></math></span></span><script type="math/tex" id="MathJax-Element-56">+\infty</script></span> have maximal size.</p><p>Insert:<br>
First find the node just smaller than the node to insert.<br>
Then you randomly throw a dice between <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-57-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn><mo>,</mo><mi>n</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-707" style="width: 1.898em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.539em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.488em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-708"><span class="mn" id="MathJax-Span-709" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-710" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-711" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mo>,</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-57">1,n</script></span> (height of the pillar).<br>
Then lock all nodes just smaller than the node to insert.<br>
Then check whether the mark is not deleted.</p><p>The find operation is <strong>wait-free</strong>, aka does never acquire a lock.</p><p><strong>Competitive-spinning</strong>: Spin for some time and then go wait.</p><p><strong>Uncontended case</strong>: Locks when threads do not compete for the lock, then they should have minimal overhead.</p><p><strong>Contended case</strong>: Performance degradation, solution: Spontanous waiting.</p><p>Locks are pessimistic by design, Amdahl’s law as pessimism of parallel.</p><p>Start at the head of a list (at <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-58-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2212;</mo><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-712" style="width: 2.103em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.693em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.847em, 1001.642em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-713"><span class="mo" id="MathJax-Span-714" style="font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-715" style="font-family: STIXGeneral-Regular;">∞</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>−</mo><mi mathvariant="normal">∞</mi></math></span></span><script type="math/tex" id="MathJax-Element-58">-\infty</script></span>).<br>
If the next element of the head is smaller, go down.</p><p><strong>General removal of objects</strong><br>
In this guarding problem, since the condition isFull and isEmpty are exclusive, there cannot both be threads waiting at remove and at insert.<br>
Therefore it is sufficient to use <code>notify</code> over <code>notifyAll</code>.</p><pre><code class="code=java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insert</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">while</span>(isFull()) {
        <span class="hljs-comment">//</span>
    }
    notify(); <span class="hljs-comment">//notifyAll not necessary</span>
}
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">while</span>(isEmpty()) {
    
    }
    notify(); <span class="hljs-comment">//notifyAll</span>
}
</code></pre><p><strong>Problem with Blocking</strong><br>
If a thread is delayed in the scheduler, all the others have to wait.<br>
Thread dies in the critical section. In java exceptions are handled using monitor table.</p><p><strong>Lock-freedom</strong>: At least one thread always makes progress, however it does not imply system-wide progress.</p><p><strong>Wait-freedom</strong>: All threads eventually make progress and therefore implies starvation-freedom, lock-freedom.</p><p><strong>Bounded wait-freedom</strong>: All threads make progress after <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-59-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-716" style="width: 0.412em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.31em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.847em, 1000.31em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-717"><span class="mi" id="MathJax-Span-718" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-59">t</script></span> amount of time.</p><p><span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-60-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtable columnalign=&quot;center center center&quot; rowspacing=&quot;4pt&quot; columnspacing=&quot;1em&quot; columnlines=&quot;solid solid&quot;><mtr><mtd /><mtd><mtext>Non blocking</mtext></mtd><mtd><mtext>Blocking</mtext></mtd></mtr><mtr><mtd><mtext>Everyone makes progress</mtext></mtd><mtd><mtext>Wait-free</mtext></mtd><mtd><mtext>Starvation-free</mtext></mtd></mtr><mtr><mtd><mtext>Somoene makes progress</mtext></mtd><mtd><mtext>Lock-free</mtext></mtd><mtd><mtext>Deadlock-free</mtext></mtd></mtr></mtable></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-719" style="width: 30.843em; display: inline-block;"><span style="display: inline-block; position: relative; width: 25.259em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(-0.407em, 1024.644em, 4.306em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-720"><span class="mtable" id="MathJax-Span-721" style="padding-right: 0.156em; padding-left: 0.156em;"><span style="display: inline-block; position: relative; width: 24.9em; height: 0px;"><span style="position: absolute; clip: rect(2.564em, 1010.248em, 6.048em, -999.997em); top: -4.147em; left: 0.464em;"><span style="display: inline-block; position: relative; width: 10.3em; height: 0px;"><span style="position: absolute; clip: rect(3.845em, 1000.003em, 4.152em, -999.997em); top: -5.428em; left: 50%; margin-left: 0em;"><span class="mtd" id="MathJax-Span-722"><span class="mrow" id="MathJax-Span-723"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.179em, 1010.248em, 4.357em, -999.997em); top: -3.942em; left: 50%; margin-left: -5.12em;"><span class="mtd" id="MathJax-Span-730"><span class="mrow" id="MathJax-Span-731"><span class="mtext" id="MathJax-Span-732" style="font-family: STIXGeneral-Regular;">Everyone makes progress</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.179em, 1010.146em, 4.357em, -999.997em); top: -2.508em; left: 50%; margin-left: -5.069em;"><span class="mtd" id="MathJax-Span-739"><span class="mrow" id="MathJax-Span-740"><span class="mtext" id="MathJax-Span-741" style="font-family: STIXGeneral-Regular;">Somoene makes progress</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.152em;"></span></span><span style="position: absolute; clip: rect(2.359em, 1005.433em, 6.304em, -999.997em); top: -4.608em; left: 11.837em;"><span style="display: inline-block; position: relative; width: 5.484em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1005.433em, 4.357em, -999.997em); top: -5.428em; left: 50%; margin-left: -2.713em;"><span class="mtd" id="MathJax-Span-724"><span class="mrow" id="MathJax-Span-725"><span class="mtext" id="MathJax-Span-726" style="font-family: STIXGeneral-Regular;">Non blocking</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.179em, 1003.794em, 4.152em, -999.997em); top: -3.942em; left: 50%; margin-left: -1.893em;"><span class="mtd" id="MathJax-Span-733"><span class="mrow" id="MathJax-Span-734"><span class="mtext" id="MathJax-Span-735" style="font-family: STIXGeneral-Regular;">Wait-free</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.179em, 1003.947em, 4.152em, -999.997em); top: -2.508em; left: 50%; margin-left: -1.944em;"><span class="mtd" id="MathJax-Span-742"><span class="mrow" id="MathJax-Span-743"><span class="mtext" id="MathJax-Span-744" style="font-family: STIXGeneral-Regular;">Lock-free</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.613em;"></span></span><span style="position: absolute; clip: rect(2.359em, 1005.996em, 6.304em, -999.997em); top: -4.608em; left: 18.445em;"><span style="display: inline-block; position: relative; width: 5.996em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1003.64em, 4.357em, -999.997em); top: -5.428em; left: 50%; margin-left: -1.842em;"><span class="mtd" id="MathJax-Span-727"><span class="mrow" id="MathJax-Span-728"><span class="mtext" id="MathJax-Span-729" style="font-family: STIXGeneral-Regular;">Blocking</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.179em, 1005.996em, 4.152em, -999.997em); top: -3.942em; left: 50%; margin-left: -3.02em;"><span class="mtd" id="MathJax-Span-736"><span class="mrow" id="MathJax-Span-737"><span class="mtext" id="MathJax-Span-738" style="font-family: STIXGeneral-Regular;">Starvation-free</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.179em, 1005.689em, 4.152em, -999.997em); top: -2.508em; left: 50%; margin-left: -2.866em;"><span class="mtd" id="MathJax-Span-745"><span class="mrow" id="MathJax-Span-746"><span class="mtext" id="MathJax-Span-747" style="font-family: STIXGeneral-Regular;">Deadlock-free</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.613em;"></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-left-width: 1.2px; border-style: solid; width: 0px; height: 4.46em; position: absolute; top: -2.456em; left: 11.273em;"></span><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-left-width: 1.2px; border-style: solid; width: 0px; height: 4.46em; position: absolute; top: -2.456em; left: 17.882em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -2.434em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 5.566em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtable columnalign="center center center" rowspacing="4pt" columnspacing="1em" columnlines="solid solid"><mtr><mtd></mtd><mtd><mtext>Non blocking</mtext></mtd><mtd><mtext>Blocking</mtext></mtd></mtr><mtr><mtd><mtext>Everyone makes progress</mtext></mtd><mtd><mtext>Wait-free</mtext></mtd><mtd><mtext>Starvation-free</mtext></mtd></mtr><mtr><mtd><mtext>Somoene makes progress</mtext></mtd><mtd><mtext>Lock-free</mtext></mtd><mtd><mtext>Deadlock-free</mtext></mtd></mtr></mtable></math></span></span><script type="math/tex" id="MathJax-Element-60">\begin{array}{c|c|c}
& \text{Non blocking} & \text{Blocking} \\
\text{Everyone makes progress}& \text{Wait-free} & \text{Starvation-free} \\
\text{Somoene makes progress}& \text{Lock-free} & \text{Deadlock-free} \\
\end{array}</script></span></p><p><strong>Lock-free general template</strong></p><pre><code class="code=java hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">writesomething</span>(<span class="hljs-params">Object newObject</span>) </span>{
    Object oldObject;
    <span class="hljs-keyword">do</span> {
        oldObject = atomicReference.<span class="hljs-keyword">get</span>();
        <span class="hljs-keyword">if</span>(...) { <span class="hljs-comment">//check if condition to overwrite holds.</span>
            <span class="hljs-keyword">return</span>;
        }
    } <span class="hljs-keyword">while</span>(!atomicReference.compareAndSet(oldObject, newObject));
}
</code></pre><p><strong>AtomicInt using CAS</strong></p><pre><code>int compareAndSet(int v, int old, int new) {
    if(arr[v] == old) {
        arr[v] = new;
        return new; //true in java
    }
    return old; //false in java
}
public class AtomicInteger {
    private Integer value;
    
    //Deadlock = false, starvation = true
    //Nothing can happen if a thread dies, therefore lock-free!
    public int increment() {
        int v;
        do {
            v = value.get();
        } while(!value.compareAndSet(v,v+1));
        return v+1;
    }

}
</code></pre><p><strong>ABA problem</strong><br>
In between a lock can be changed.<br>
T1,T2 reads A.<br>
T1 writes B.<br>
T3 reads B.<br>
T4 reads B.<br>
T3 writes A.<br>
T1 writes C.</p><p><strong>Non-blocking stack</strong></p><pre><code class="code=java hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Stack</span> {
    AtomicReference&lt;Node&gt; n;
    <span class="hljs-function"><span class="hljs-keyword">public</span> Long <span class="hljs-title">pop</span>(<span class="hljs-params"></span>) </span>{
        Node head, next;
        <span class="hljs-keyword">do</span> {
            head = top.<span class="hljs-keyword">get</span>();
            <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            <span class="hljs-comment">//head can't be deallocated, so no problem</span>
            next = head.next;
        } <span class="hljs-keyword">while</span>(!top.compareAndSet(head, next));
        <span class="hljs-keyword">return</span> head.item;
    } 
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">push</span>(<span class="hljs-params">Long item</span>) </span>{
        Node newi = <span class="hljs-keyword">new</span> Node(item), head;
        <span class="hljs-keyword">do</span> {
            head = top.<span class="hljs-keyword">get</span>();
            newi.next = head;
        } <span class="hljs-keyword">while</span>(!top.compareAndSet(head,newi));
    
    }
}
</code></pre><p>Increase performance of lock-free algorithms using <strong>backoff</strong>!</p><p><strong>Lock-free list set</strong><br>
Guarantee: If a thread goes to vacation, you don’t get problems.<br>
In order to remove c.<br>
<code>CAS(b.next,c,d);</code> //If it is false, start from the beginning!<br>
<code>CAS(b.next,c,b');</code></p><p>Better:<br>
remove©: <code>CAS(c.mark, false, true); CAS(b.next,c,d);</code><br>
If the first operation fails, retry. Else</p><pre><code>A: remove(c);
B: add(c');
</code></pre><p>A: Mark as deleted<br>
B:<br>
A: Add c’</p><p>In order to set both a mark and a reference, if they still retain the oldvalue, use a double CAS.<br>
The first bit on the pointer is a mark bit.</p><pre><code>AtomicMarkableReference&lt;V&gt; {
    boolean attemptMark(V expectedReference, boolean newMark) {}
    boolean compareAndSet(V expectedReference, V newReference, boolean expectedMark, boolean newMark) {}
    V get(boolean[] markHolder) {} //returns reference bits with mark bit
    V getReference() {}
    boolean isMarked() {}
    set(V newMarked, V oldMarked);
    
}
</code></pre><p>A: remove©;<br>
try to set mark(c.next);<br>
This marks c, although the mark is set. //Restarts at the beginning of list<br>
try DCAS(b.next.reference, b.next.marked. c.unmarked, d.unmarked)</p><p>Example both remove © and b.<br>
They mark b, c respectively.</p><p>c remains marked but not deleted!<br>
So it is logically deleted, but still in the list. Whenever you use an add, remove or a contains remove the object.</p><pre><code class="code=java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Window</span> </span>{
    Node pred, curr;
}
<span class="hljs-function"><span class="hljs-keyword">public</span> Window <span class="hljs-title">find</span><span class="hljs-params">(Node head, <span class="hljs-keyword">int</span> key)</span> </span>{
    Node pred = <span class="hljs-keyword">null</span>, curr = <span class="hljs-keyword">null</span>, succ = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">boolean</span> snip; <span class="hljs-comment">//Says whether it was successful or not.</span>
    <span class="hljs-keyword">boolean</span>[] marked = {<span class="hljs-keyword">false</span>};
    <span class="hljs-keyword">while</span>(<span class="hljs-keyword">true</span>) {
        pred = head;
        curr = pred.next.getReference();
        <span class="hljs-keyword">boolean</span> done = <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">while</span>(!done) {
            succ = curr.next.get(marked);
            <span class="hljs-keyword">while</span> (marked[<span class="hljs-number">0</span>] &amp;&amp; !done) {
                <span class="hljs-keyword">if</span>(pred.next.compareAndSet(curr, succ, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">false</span>)) {
                curr = succ;
                succ = curr.next.get(marked); <span class="hljs-comment">//if marked nodes are found, delete them.</span>
                }
                <span class="hljs-keyword">else</span> done = <span class="hljs-keyword">true</span>;
            }
            <span class="hljs-keyword">if</span>(!done &amp;&amp; curr.key &gt;= key) <span class="hljs-comment">//Finds first removed node.</span>
                <span class="hljs-keyword">return</span> Window(pred, curr);
            pred = curr;
            curr = succ;
        }
    }
}

<span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">remove</span><span class="hljs-params">(T item)</span> </span>{
    <span class="hljs-keyword">boolean</span> snip;
    <span class="hljs-keyword">while</span>(<span class="hljs-keyword">true</span>) {
        Window window = find(head, key);
        Node pred = window.pred, curr = window.curr;
        <span class="hljs-keyword">if</span>(curr.key != key) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">else</span> {
            Node succ = curr.next.getReference();
            snip = curr.next.attemptMark(succ,<span class="hljs-keyword">true</span>);
            <span class="hljs-keyword">if</span>(!snip) <span class="hljs-keyword">continue</span>;
            pred.next.compareAndSet(curr, succ, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">false</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        }
        <span class="hljs-comment">//Important that snip continues to here,</span>
        <span class="hljs-comment">//because elsewise you would have a lock.</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(T item)</span> </span>{
    <span class="hljs-keyword">while</span>(<span class="hljs-keyword">true</span>) {
        Window window = find(head, key);
        Node pred = window.pred, curr = window.curr;
        <span class="hljs-keyword">if</span>(curr.key == key) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">else</span> {
            Node node = <span class="hljs-keyword">new</span> Node(item);
            node.next = <span class="hljs-keyword">new</span> AtomicMarkableRef(curr, <span class="hljs-keyword">false</span>);
            <span class="hljs-keyword">if</span>(pred.next.compareAndSet(curr, node, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">false</span>)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        }
    }
}
</code></pre><p><strong>Lock-free Unbounded Queues</strong></p><p>Now we use a lock-free queue in order to make for example scheduling queues.</p><p>A sentinel variable S (head) leads to 2 problems, when poping the last element and push the last element.<br>
Technically a thread has to wait for tail to be put on correct element.</p><pre><code class="code=java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NonBlockingQueue</span> </span>{
AtomicReference&lt;Node&gt; head = <span class="hljs-keyword">new</span> AtomicReference&lt;Node&gt;();
AtomicReference&lt;Node&gt; tail = <span class="hljs-keyword">new</span> AtomicReference&lt;Node&gt;();

NonBlockingQueue () {
    Node node = <span class="hljs-keyword">new</span> Node(<span class="hljs-keyword">null</span>);
    head.setReference(node); tail.setReference(node);
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
    <span class="hljs-keyword">public</span> T item;
    <span class="hljs-keyword">public</span> AtomicReference&lt;Node&gt; next;
    Node(T item) {
        next = <span class="hljs-keyword">new</span> AtomicReference&lt;Node&gt;(<span class="hljs-keyword">null</span>);
        <span class="hljs-keyword">this</span>.item = item;
    }
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setItem</span><span class="hljs-params">(T item)</span> </span>{
        <span class="hljs-keyword">this</span>.item = item;
    }
}

}
</code></pre><pre><code>public Enqueue {
    a) Node new = new Node();
    b) CAS(last.next,null,new);
    If unsuccessful somoene else added or removed an element.
    If successful enqueur tries to move the tail one forward without retry. c)
    CAS(tail,last,new);
    At Point c) the thread could go on vacation and blocks the queue.
    This could even lead to tail pointing to a wrong object.
}
</code></pre><pre><code>public Deque {
    if(head == tail) return false;
    //tries to set head from first to next
    next = head.next;
    returnVal = next.item;
    CAS(head, first, next); //set head pointer to the next
    If unsuccessful retry.
}
</code></pre><pre><code>enqueueCorrect(item) {
    while(true) {
    Node last = tail.get();
    Node next = last.next.get();
    if(next == null) { //in case something was added
        if(last.next.compareAndSet(null,node)) {
            tail.compareAndSet(last, node);
            //if unsuccessful somoene else does it.
            return;
        }
    } else 
        tail.compareAndSet(last,next);
    }
}
</code></pre><pre><code>dequeueCorrect(item) {
    while(true) {
    Node first = head.get();
    Node last = tail.get(); //in case first == last
    Node next = first.next.get();
    if(first == last) {
        if(next == null) return null;
        //Someoene added an element but didn't change the tail pointer.
        //We have to help him set the flag
        else tail.compareAndSet(last,next);
    }
    else {
        T value = next.item;
        if(head.compareAndSet(first,next)) return value;
        //else somoene else dequeued so restart
    }
    }
}
</code></pre><p><strong>ABA problem</strong><br>
Lock-free concurrent stack.<br>
Last element points to null</p><pre><code>AtomicReference&lt;Node&gt; top = new AtomicReference&lt;Node&gt;();
class ConcurrentStack {
    Node pop() {
        Node had, next;
        do {
            head = top.get();
            if(head == null) return null; //nothing can be popped
            next = head.next;
        } while(!top.compareAndSet(head,next));
        //as long as head is still the value, check whether top is still head.
        return head.item;
    }
    

void push(T item) {
    Node newi = new Node(item);
    Node head;
    do {
        head = top.get();
        newi.next = head;
    } while(!top.compareAndSet(head, newi));
}
}
</code></pre><p>Node pool is simply a concurrent stack.</p><pre><code>class NodePool { //
    AtomicReference&lt;Node&gt; top = new AtomicReference&lt;Node&gt;();
    void put(Node n) {}
    Node get () {}

}
</code></pre><p>Using the node pool to allocate memory of another stack.</p><pre><code>push(Long item) {
    Node new = pool.get(item);

}
</code></pre><pre><code>T pop() {

}
</code></pre><p>So the <strong>ABA</strong> problem is:<br>
<code>push(A);</code> But wait after getting head and then:<br>
<code>pop(A); push(B); push(A);</code></p><p>Check all the states, since he might have stored head.next and only checks head and not head.next.</p><p>The garbage collector saves you from this problem by giving other references to new objects (almost ;-)</p><p>Practical solution:<br>
Pointer tagging: If the pointer re-appears increase count <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-61-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mn>4</mn></msup><mo>=</mo><mn>16</mn></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-748" style="width: 3.998em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.281em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.539em, 1003.23em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-749"><span class="msubsup" id="MathJax-Span-750"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-751" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 0.515em;"><span class="mn" id="MathJax-Span-752" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">4</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-753" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mn" id="MathJax-Span-754" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">16</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mn>4</mn></msup><mo>=</mo><mn>16</mn></math></span></span><script type="math/tex" id="MathJax-Element-61">2^4=16</script></span>.<br>
Aligned adress (pointer tagging bits + full bits)</p><p>Example: Pointer aligned modulo 32 -&gt; 5 (last) bits available for tagging.<br>
MSB XXXXXXXXX00000<br>
On allocation (or deallocation) add the bit.<br>
ABABABABABABABABABABABABABABABA Problem</p><p>Hazard pointer: ?? TODO<br>
Bevor der Pointer gelesen wird, wird er als hazardous gespeichert (in einen <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-62-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>&amp;#x2212;</mo><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-755" style="width: 5.945em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.869em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1004.869em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-756"><span class="mi" id="MathJax-Span-757" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-758" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">−</span><span class="mi" id="MathJax-Span-759" style="font-family: STIXGeneral-Italic; padding-left: 0.259em;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-760" style="font-family: STIXGeneral-Italic;">h</span><span class="mi" id="MathJax-Span-761" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-762" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-763" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-764" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mi" id="MathJax-Span-765" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>−</mo><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-62">n-threads</script></span> array gespeichert).</p><pre><code>public class NonBlockingStackPooledHazardGlobal extends Stack {
AtomicReference&lt;Node&gt; top = new AtomicReference&lt;Node&gt;(); NodePoolHazard pool;
AtomicReferenceArray&lt;Node&gt; hazarduous;
public NonBlockingStackPooledHazardGlobal(int nThreads) {
    hazarduous = new AtomicReferenceArray&lt;Node&gt;(nThreads);

    pool = new NodePoolHazard(nThreads);
}
}
</code></pre><p>?? Transactional memory:<br>
?? In principle you can simply use CAS on every object in the list.</p><p><strong>Problems with lock-free</strong></p><ul>
<li>Atomic update of several pointers / values impossible, leading to new problems.</li>
<li>ABA problem (which disappears with a good garbage collector)</li>
</ul><h2 id="consistency-models"><a class="anchor hidden-xs" href="#consistency-models" title="consistency-models"><span class="octicon octicon-link"></span></a>Consistency models</h2><p>LINEARIZABILITY <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-63-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x21D2;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-766" style="width: 1.181em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.847em, 1000.925em, 2.769em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-767"><span class="mo" id="MathJax-Span-768" style="font-family: STIXGeneral-Regular;">⇒</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.122em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">⇒</mo></math></span></span><script type="math/tex" id="MathJax-Element-63">\Rightarrow</script></span> SEQUENTIAL <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-64-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2227;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-769" style="width: 0.822em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.669em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.898em, 1000.617em, 2.769em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-770"><span class="mo" id="MathJax-Span-771" style="font-family: STIXGeneral-Regular;">∧</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.122em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>∧</mo></math></span></span><script type="math/tex" id="MathJax-Element-64">\wedge</script></span> QUIESCENT CONSISTENCY<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-65-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x2200;</mi><mi>x</mi><mo>:</mo><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>x</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-772" style="width: 4.306em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.537em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1003.537em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-773"><span class="mi" id="MathJax-Span-774" style="font-family: STIXGeneral-Regular;">∀</span><span class="mi" id="MathJax-Span-775" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-776" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">:</span><span class="mi" id="MathJax-Span-777" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-778"><span class="mrow" id="MathJax-Span-779"><span class="mo" id="MathJax-Span-780" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-781" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">∀</mi><mi>x</mi><mo>:</mo><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-65">\forall x : H|x</script></span> LINEARIZABLE <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-66-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x21D4;</mo><mi>H</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-782" style="width: 2.564em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.103em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1002.103em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-783"><span class="mo" id="MathJax-Span-784" style="font-family: STIXGeneral-Regular;">⇔</span><span class="mi" id="MathJax-Span-785" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">⇔</mo><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-66">\Leftrightarrow H</script></span> LINEARIZABLE<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-67-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x2200;</mi><mi>x</mi><mo>:</mo><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>x</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-786" style="width: 4.306em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.537em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1003.537em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-787"><span class="mi" id="MathJax-Span-788" style="font-family: STIXGeneral-Regular;">∀</span><span class="mi" id="MathJax-Span-789" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-790" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">:</span><span class="mi" id="MathJax-Span-791" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-792"><span class="mrow" id="MathJax-Span-793"><span class="mo" id="MathJax-Span-794" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-795" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">∀</mi><mi>x</mi><mo>:</mo><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-67">\forall x : H|x</script></span> QUIESCENT CONSISTENT <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-68-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x21D2;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-796" style="width: 1.181em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.847em, 1000.925em, 2.769em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-797"><span class="mo" id="MathJax-Span-798" style="font-family: STIXGeneral-Regular;">⇒</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.122em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">⇒</mo></math></span></span><script type="math/tex" id="MathJax-Element-68">\Rightarrow</script></span> <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-69-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-799" style="width: 1.027em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.822em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-800"><span class="mi" id="MathJax-Span-801" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-69">H</script></span> QUIESCENT CONSISTENT<br>
No object composability for sequential consistency.<br>
Proof:<br>
<img src="https://i.imgur.com/q3LqDSH.png" alt=""></p><p>There is no thread composability, since there can be</p><pre><code>A: -a.push(x);-------------------------
B: --------------a.push(y);-a.pop(y);--
</code></pre><p>References:<br>
<a href="http://coldattic.info/shvedsky/pro/blogs/a-foo-walks-into-a-bar/posts/88" target="_blank">http://coldattic.info/shvedsky/pro/blogs/a-foo-walks-into-a-bar/posts/88</a></p><p>FIFO-queue where one thread only queues and one thread always dequeues. This is actually wait-free (has no locks and no while loops) and is correct, since head can only be increased by the enqueue and tail by the dequeue.</p><pre><code class="code=java hljs"><span class="hljs-keyword">class</span> <span class="hljs-title">WaitFreeQueue</span> {
   <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> head = <span class="hljs-number">0</span>, tail = <span class="hljs-number">0</span>;
   AtomicReferenceArray&lt;T&gt;[] items =
      <span class="hljs-keyword">new</span> AtomicReferenceArray&lt;T&gt;(capacity);
   <span class="hljs-function"><span class="hljs-keyword">public</span> boolean <span class="hljs-title">enq</span>(<span class="hljs-params">T x</span>) </span>{
      <span class="hljs-keyword">if</span> (tail – head == capacity) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">//since head is only decreased with 1</span>
      items.<span class="hljs-keyword">set</span>(tail++ % capacity, x);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
   <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">deq</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (tail - head == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">//since tail is only increased with 1</span>
      <span class="hljs-keyword">int</span> x = items.<span class="hljs-keyword">get</span>(head++ % capacity);
      <span class="hljs-keyword">return</span> x;
    }
}
</code></pre><p>Every method call has an <strong>invocation time</strong> and a <strong>response time</strong>.<br>
The method is called <em>pending</em> if it is called between invocation and response time.</p><p>An object is called <strong>quiescent</strong> (ruhend) if it has no currently pending method calls.</p><p><strong>Sequential consistency:</strong><br>
Only the order in every single thread matters. The calls can interchange no matter where they happen.</p><p>The below <em>execution</em> is an example of a sequential consistent, but not quiescent consistent program:</p><pre><code>P1 -- q.enq(x) -------------------------- 
P2 -------------- q.enq(y) -- q.deq(y) --
</code></pre><p>With sequential order order: <code>q.enq(y),q.deq(y), q.enq(x)</code></p><p>The below <em>execution</em> is an example of a quiescent consistent, but not sequential consistent program.</p><pre><code>P1 ------------ q.enq(x) ----- 
P2 ------ q.deq(y) -- q.enq(y) --
</code></pre><p>This weak guarantee is given for example due to <em>cache locality</em>. In Java non-critical sections behave in this manner.</p><p><strong>Quiescent consistency (Urkonsistenz):</strong> Whenever an object is inside the quiescent period it is impossible for an order where any of the calls after and before the quiescent time exchange. Therefore the above sequence is not quiescent consistent (In other words only overlapping operations may be reordered).<br>
(Arrows from every method call to the left to every method call on the right).</p><p><strong>Quiescent composability</strong>: Two objects, which are quiescent at time <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-70-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-802" style="width: 0.412em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.31em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.847em, 1000.31em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-803"><span class="mi" id="MathJax-Span-804" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-70">t</script></span> are together quiescent at time <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-71-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-805" style="width: 0.412em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.31em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.847em, 1000.31em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-806"><span class="mi" id="MathJax-Span-807" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-71">t</script></span>.</p><p><strong>Serializable consistency</strong>:<br>
The order of any contigous section can be re-ordered.</p><p>(ALSO ADD CAP THEOREM)</p><p>Sequential: Methods described in <strong>isolation</strong>.<br>
Concurrent: Method calls can overlap.<br>
Sequential: Methods described in isolation.<br>
Concurrent: All possible interactions with concurrent calls must be taken into account.<br>
Sequential: Add new methods without affecting older methods.<br>
Concurrent: Think about every interaction of concurrent programs.<br>
Sequential: Global clock (at each moment memory is at one position).<br>
Concurrent: Object clock.</p><p>For a blocking queue:<br>
<img src="https://i.imgur.com/vJQvj27.png" alt=""></p><p><strong>Linearizability (strongly-consistent)</strong><br>
<strong>Linearization point</strong><br>
A method call can have multiple critical sections (read or write)! These critical section can be thought of as atomic operations and are marked using <em>linearization points</em>.<br>
For <strong>locked objects</strong> the linearization point is right after the lock opens.</p><p>After linearization:<br>
Each method should appear to take effect <em>instantaneously</em> between invocation and response events (so pending for no time).</p><p><img src="https://i.imgur.com/moPDDhU.png" alt=""></p><p>Is there an order of execution, such that everything is linearizable?<br>
Yes, using the following linearization points:</p><p><img src="https://i.imgur.com/w9M8PDk.png" alt=""></p><p><strong>History</strong><br>
Is a sequence of invocations and responses.</p><p>Notation from the book of:<br>
There are two possible <em>steps</em> of a threa <em>T</em>.<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-72-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x27E8;</mo><mi>x</mi><mo>.</mo><mi>m</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo>&amp;#x2217;</mo><mo stretchy=&quot;false&quot;>)</mo><mi>T</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x27E9;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-808" style="width: 5.996em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.921em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.693em, 1004.818em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-809"><span class="mo" id="MathJax-Span-810" style="font-family: STIXGeneral-Regular;">⟨</span><span class="mi" id="MathJax-Span-811" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-812" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-813" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">m</span><span class="mo" id="MathJax-Span-814" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-815" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-816" style="font-family: STIXGeneral-Regular;">∗</span><span class="mo" id="MathJax-Span-817" style="font-family: STIXGeneral-Regular;">)</span><span class="mi" id="MathJax-Span-818" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span class="mo" id="MathJax-Span-819" style="font-family: STIXGeneral-Regular;">⟩</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">⟨</mo><mi>x</mi><mo>.</mo><mi>m</mi><mo stretchy="false">(</mo><mi>a</mi><mo>∗</mo><mo stretchy="false">)</mo><mi>T</mi><mo fence="false" stretchy="false">⟩</mo></math></span></span><script type="math/tex" id="MathJax-Element-72">\langle x.m(a*) T \rangle</script></span> thread <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-73-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-820" style="width: 0.873em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.72em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-821"><span class="mi" id="MathJax-Span-822" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-73">T</script></span> invokes the method <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-74-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-823" style="width: 0.976em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.771em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1000.771em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-824"><span class="mi" id="MathJax-Span-825" style="font-family: STIXGeneral-Italic;">m</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi></math></span></span><script type="math/tex" id="MathJax-Element-74">m</script></span> of object <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-75-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-826" style="width: 0.566em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.464em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1000.464em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-827"><span class="mi" id="MathJax-Span-828" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-75">x</script></span> with arguments <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-76-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mo>&amp;#x2217;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-829" style="width: 1.335em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.078em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1001.027em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-830"><span class="mi" id="MathJax-Span-831" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-832" style="font-family: STIXGeneral-Regular;">∗</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo>∗</mo></math></span></span><script type="math/tex" id="MathJax-Element-76">a*</script></span>.<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-77-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x27E8;</mo><mi>x</mi><mo>:</mo><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mo>&amp;#x2217;</mo><mo stretchy=&quot;false&quot;>)</mo><mi>T</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x27E9;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-833" style="width: 5.843em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.767em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.693em, 1004.664em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-834"><span class="mo" id="MathJax-Span-835" style="font-family: STIXGeneral-Regular;">⟨</span><span class="mi" id="MathJax-Span-836" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-837" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">:</span><span class="mi" id="MathJax-Span-838" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-839" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-840" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-841" style="font-family: STIXGeneral-Regular;">∗</span><span class="mo" id="MathJax-Span-842" style="font-family: STIXGeneral-Regular;">)</span><span class="mi" id="MathJax-Span-843" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span class="mo" id="MathJax-Span-844" style="font-family: STIXGeneral-Regular;">⟩</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">⟨</mo><mi>x</mi><mo>:</mo><mi>t</mi><mo stretchy="false">(</mo><mi>r</mi><mo>∗</mo><mo stretchy="false">)</mo><mi>T</mi><mo fence="false" stretchy="false">⟩</mo></math></span></span><script type="math/tex" id="MathJax-Element-77">\langle x:t(r*) T \rangle</script></span> thread <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-78-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-845" style="width: 0.873em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.72em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-846"><span class="mi" id="MathJax-Span-847" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-78">T</script></span> responds (finished running method) with status <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-79-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-848" style="width: 0.412em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.31em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.847em, 1000.31em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-849"><span class="mi" id="MathJax-Span-850" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-79">t</script></span> (which is either Ok or a type of exception) and return types <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-80-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>r</mi><mo>&amp;#x2217;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-851" style="width: 1.181em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1000.925em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-852"><span class="mi" id="MathJax-Span-853" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-854" style="font-family: STIXGeneral-Regular;">∗</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>r</mi><mo>∗</mo></math></span></span><script type="math/tex" id="MathJax-Element-80">r*</script></span>.</p><p>A <em>method call</em> in a history <em>H</em> is a pair of the same thread consisting of an invocation and a response happening directly after each other in <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-81-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>T</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-855" style="width: 2.257em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.847em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.847em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-856"><span class="mi" id="MathJax-Span-857" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-858"><span class="mrow" id="MathJax-Span-859"><span class="mo" id="MathJax-Span-860" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-861" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-81">H|T</script></span>.</p><p>An invocation is pending if it has no matching response.</p><p><img src="https://i.imgur.com/1DYwqvc.png" alt=""></p><p>Such a history can be <strong>projected on an object</strong>: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-82-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>b</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-862" style="width: 2.001em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.642em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.591em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-863"><span class="mi" id="MathJax-Span-864" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-865"><span class="mrow" id="MathJax-Span-866"><span class="mo" id="MathJax-Span-867" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-868" style="font-family: STIXGeneral-Italic;">b</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-82">H|b</script></span>, called <strong>object subhistory</strong> of b.<br>
Filters all invocations and responses out, which have nothing to do with an object.</p><p>A history can also be <strong>projected on a thread</strong>: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-83-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>T</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-869" style="width: 2.257em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.847em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.847em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-870"><span class="mi" id="MathJax-Span-871" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-872"><span class="mrow" id="MathJax-Span-873"><span class="mo" id="MathJax-Span-874" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-875" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-83">H|T</script></span>, called <strong>thread subhistory</strong> of T.<br>
Filters all invocations and responses out, which are called by another thread.</p><p><strong>Complete subhistory</strong>:<br>
History H without its pending invocations.</p><p><strong>Sequential history</strong>:<br>
Method calls of different threads <strong>do not</strong> interleave. So basically you have consecutive matching pairs in <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-84-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-876" style="width: 1.027em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.822em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-877"><span class="mi" id="MathJax-Span-878" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-84">H</script></span>. A final invokation without response is allowed.</p><p><strong>Well-formed (valid) histories</strong>:<br>
Each <em>thread subhistory</em> must be sequential!</p><p><strong>Equivalent histories</strong>:<br>
Two histories (G and H) are equivalent if for all threads:<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-85-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><msub><mi>T</mi><mi>i</mi></msub><mo>=</mo><mi>G</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><msub><mi>T</mi><mi>i</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-879" style="width: 6.355em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.177em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1005.177em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-880"><span class="mi" id="MathJax-Span-881" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-882"><span class="mrow" id="MathJax-Span-883"><span class="mo" id="MathJax-Span-884" style="font-family: STIXVariants;">|</span></span></span><span class="msubsup" id="MathJax-Span-885"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-886" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-887" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-888" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-889" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">G</span><span class="texatom" id="MathJax-Span-890"><span class="mrow" id="MathJax-Span-891"><span class="mo" id="MathJax-Span-892" style="font-family: STIXVariants;">|</span></span></span><span class="msubsup" id="MathJax-Span-893"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-894" style="font-family: STIXGeneral-Italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.105em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.566em;"><span class="mi" id="MathJax-Span-895" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><msub><mi>T</mi><mi>i</mi></msub><mo>=</mo><mi>G</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><msub><mi>T</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-85">H|T_i = G|T_i</script></span></p><p><strong>Locked object</strong><br>
An object which is only accessible using a lock has a <em>sequential object subhistory</em> (<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-86-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>b</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-896" style="width: 2.001em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.642em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.591em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-897"><span class="mi" id="MathJax-Span-898" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-899"><span class="mrow" id="MathJax-Span-900"><span class="mo" id="MathJax-Span-901" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-902" style="font-family: STIXGeneral-Italic;">b</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-86">H|b</script></span> is sequential)!</p><p><strong>Legal sequential histories</strong>:<br>
<a href="http://web.cs.iastate.edu/~chaudhur/cs611/Sp15/notes/lec16.pdf" target="_blank">http://web.cs.iastate.edu/~chaudhur/cs611/Sp15/notes/lec16.pdf</a><br>
Given a <strong>sequential specification</strong> one can tell if a sequential object subhistory adheres to the specification or not. If for a sequential history all object subhistories adhere, a sequential history is legal.</p><p>This would be a sequential specification for an atomic register.<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-87-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mo>.</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mo>;</mo><mi>r</mi><mo>.</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mo>;</mo><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mo>.</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mo>;</mo><mi>r</mi><mo>.</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy=&quot;false&quot;>(</mo><mi>b</mi><mo stretchy=&quot;false&quot;>)</mo><mo>;</mo><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-903" style="width: 25.72em; display: inline-block;"><span style="display: inline-block; position: relative; width: 21.058em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1021.007em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-904"><span class="mo" id="MathJax-Span-905" style="font-family: STIXGeneral-Regular;">{</span><span class="mo" id="MathJax-Span-906" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-907" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-908" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-909" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">w</span><span class="mi" id="MathJax-Span-910" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-911" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-912" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-913" style="font-family: STIXGeneral-Italic;">e</span><span class="mo" id="MathJax-Span-914" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-915" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-916" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-917" style="font-family: STIXGeneral-Regular;">;</span><span class="mi" id="MathJax-Span-918" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-919" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-920" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-921" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-922" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-923" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mo" id="MathJax-Span-924" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-925" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-926" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-927" style="font-family: STIXGeneral-Regular;">;</span><span class="mo" id="MathJax-Span-928" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">)</span><span class="mo" id="MathJax-Span-929" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-930" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">(</span><span class="mi" id="MathJax-Span-931" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-932" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-933" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">w</span><span class="mi" id="MathJax-Span-934" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-935" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-936" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-937" style="font-family: STIXGeneral-Italic;">e</span><span class="mo" id="MathJax-Span-938" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-939" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-940" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-941" style="font-family: STIXGeneral-Regular;">;</span><span class="mi" id="MathJax-Span-942" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-943" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-944" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">w</span><span class="mi" id="MathJax-Span-945" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-946" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-947" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-948" style="font-family: STIXGeneral-Italic;">e</span><span class="mo" id="MathJax-Span-949" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-950" style="font-family: STIXGeneral-Italic;">b</span><span class="mo" id="MathJax-Span-951" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-952" style="font-family: STIXGeneral-Regular;">;</span><span class="mo" id="MathJax-Span-953" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">)</span><span class="mo" id="MathJax-Span-954" style="font-family: STIXGeneral-Regular;">,</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mo stretchy="false">(</mo><mi>r</mi><mo>.</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>;</mo><mi>r</mi><mo>.</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>;</mo><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mi>r</mi><mo>.</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>;</mo><mi>r</mi><mo>.</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mo>;</mo><mo stretchy="false">)</mo><mo>,</mo></math></span></span><script type="math/tex" id="MathJax-Element-87">\{(r.write(a);r.read(a);),(r.write(a);r.write(b);),</script></span><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-88-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mspace width=&quot;mediummathspace&quot; /><mspace width=&quot;mediummathspace&quot; /><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mo>.</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mo>;</mo><mi>r</mi><mo>.</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mo>;</mo><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mo>.</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mo>;</mo><mi>r</mi><mo>.</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy=&quot;false&quot;>(</mo><mi>b</mi><mo stretchy=&quot;false&quot;>)</mo><mo>;</mo><mo stretchy=&quot;false&quot;>)</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-955" style="width: 25.669em; display: inline-block;"><span style="display: inline-block; position: relative; width: 21.007em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1020.904em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-956"><span class="mspace" id="MathJax-Span-957" style="height: 0em; vertical-align: 0em; width: 0.259em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-958" style="height: 0em; vertical-align: 0em; width: 0.259em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-959" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-960" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-961" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-962" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-963" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-964" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-965" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mo" id="MathJax-Span-966" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-967" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-968" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-969" style="font-family: STIXGeneral-Regular;">;</span><span class="mi" id="MathJax-Span-970" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-971" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-972" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-973" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-974" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-975" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mo" id="MathJax-Span-976" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-977" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-978" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-979" style="font-family: STIXGeneral-Regular;">;</span><span class="mo" id="MathJax-Span-980" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">)</span><span class="mo" id="MathJax-Span-981" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-982" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">(</span><span class="mi" id="MathJax-Span-983" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-984" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-985" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-986" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-987" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-988" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mo" id="MathJax-Span-989" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-990" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-991" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-992" style="font-family: STIXGeneral-Regular;">;</span><span class="mi" id="MathJax-Span-993" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-994" style="font-family: STIXGeneral-Regular;">.</span><span class="mi" id="MathJax-Span-995" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">w</span><span class="mi" id="MathJax-Span-996" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-997" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-998" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-999" style="font-family: STIXGeneral-Italic;">e</span><span class="mo" id="MathJax-Span-1000" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1001" style="font-family: STIXGeneral-Italic;">b</span><span class="mo" id="MathJax-Span-1002" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1003" style="font-family: STIXGeneral-Regular;">;</span><span class="mo" id="MathJax-Span-1004" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">)</span><span class="mo" id="MathJax-Span-1005" style="font-family: STIXGeneral-Regular;">}</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mspace width="mediummathspace"></mspace><mspace width="mediummathspace"></mspace><mo stretchy="false">(</mo><mi>r</mi><mo>.</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>;</mo><mi>r</mi><mo>.</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>;</mo><mo stretchy="false">)</mo><mo>,</mo><mo stretchy="false">(</mo><mi>r</mi><mo>.</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>;</mo><mi>r</mi><mo>.</mo><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mo>;</mo><mo stretchy="false">)</mo><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-88">\:\:(r.read(a);r.read(a);),(r.read(a);r.write(b);)\}</script></span></p><p><strong>Overlapping method calls</strong><br>
Method calls overlap if <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-89-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>x</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1006" style="width: 1.949em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.591em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.591em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1007"><span class="mi" id="MathJax-Span-1008" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-1009"><span class="mrow" id="MathJax-Span-1010"><span class="mo" id="MathJax-Span-1011" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-1012" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-89">H|x</script></span> has overlapping invocations / responses:</p><pre><code>A x.a();
B x.a();
A x:a;
B x:a;
</code></pre><p>Overlaps iff:<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-90-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x00AC;</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>A</mi><mi>r</mi></msub><mo>&amp;lt;</mo><msub><mi>B</mi><mi>l</mi></msub><mo>&amp;#x2228;</mo><msub><mi>A</mi><mi>l</mi></msub><mo>&amp;gt;</mo><msub><mi>B</mi><mi>r</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1013" style="width: 10.761em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.814em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1008.763em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1014"><span class="mi" id="MathJax-Span-1015" style="font-family: STIXGeneral-Regular;">¬</span><span class="mo" id="MathJax-Span-1016" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-1017"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.566em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1018" style="font-family: STIXGeneral-Italic;">A</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.617em;"><span class="mi" id="MathJax-Span-1019" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-1020" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">&lt;</span><span class="msubsup" id="MathJax-Span-1021" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.873em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.566em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1022" style="font-family: STIXGeneral-Italic;">B</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.617em;"><span class="mi" id="MathJax-Span-1023" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-1024" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">∨</span><span class="msubsup" id="MathJax-Span-1025" style="padding-left: 0.259em;"><span style="display: inline-block; position: relative; width: 0.873em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.566em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1026" style="font-family: STIXGeneral-Italic;">A</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.617em;"><span class="mi" id="MathJax-Span-1027" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-1028" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">&gt;</span><span class="msubsup" id="MathJax-Span-1029" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.566em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1030" style="font-family: STIXGeneral-Italic;">B</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.617em;"><span class="mi" id="MathJax-Span-1031" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-1032" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">¬</mi><mo stretchy="false">(</mo><msub><mi>A</mi><mi>r</mi></msub><mo>&lt;</mo><msub><mi>B</mi><mi>l</mi></msub><mo>∨</mo><msub><mi>A</mi><mi>l</mi></msub><mo>&gt;</mo><msub><mi>B</mi><mi>r</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-90">\neg (A_r < B_l \vee A_l > B_r)</script></span></p><p><strong>Preceding method calls</strong><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-91-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>m</mi><mn>0</mn></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1033" style="width: 1.437em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.181em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.591em, 1001.181em, 2.513em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1034"><span class="msubsup" id="MathJax-Span-1035"><span style="display: inline-block; position: relative; width: 1.13em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1036" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.72em;"><span class="mn" id="MathJax-Span-1037" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>m</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-91">m_0</script></span> precedes <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-92-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>m</mi><mn>1</mn></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1038" style="width: 1.437em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.181em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.591em, 1001.181em, 2.513em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1039"><span class="msubsup" id="MathJax-Span-1040"><span style="display: inline-block; position: relative; width: 1.13em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1041" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.72em;"><span class="mn" id="MathJax-Span-1042" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>m</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-92">m_1</script></span> <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-93-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>:&amp;#x21D4;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1043" style="width: 1.591em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.898em, 1001.283em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1044"><span class="mo" id="MathJax-Span-1045" style="font-family: STIXGeneral-Regular;">:<span style="font-family: STIXGeneral-Regular; font-style: normal; font-weight: normal;">⇔</span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.753em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>:⇔</mo></math></span></span><script type="math/tex" id="MathJax-Element-93">:\Leftrightarrow</script></span> <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-94-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>m</mi><mn>0</mn></msub><msub><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mi>H</mi></msub><msub><mi>m</mi><mn>1</mn></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1046" style="width: 5.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.46em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.591em, 1004.46em, 2.513em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1047"><span class="msubsup" id="MathJax-Span-1048"><span style="display: inline-block; position: relative; width: 1.13em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1049" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.72em;"><span class="mn" id="MathJax-Span-1050" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-1051" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 1.539em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.873em, 4.101em, -999.997em); top: -3.993em; left: 0em;"><span class="mo" id="MathJax-Span-1052" style="font-family: STIXGeneral-Regular;">→</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.925em;"><span class="mi" id="MathJax-Span-1053" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-1054" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 1.13em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.72em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1055" style="font-family: STIXGeneral-Italic;">m</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.72em;"><span class="mn" id="MathJax-Span-1056" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>m</mi><mn>0</mn></msub><msub><mo stretchy="false">→</mo><mi>H</mi></msub><msub><mi>m</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-94">m_0 \rightarrow_H m_1</script></span></p><p><span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-95-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mi>H</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1057" style="width: 1.949em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.591em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.591em, 1001.591em, 2.513em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1058"><span class="msubsup" id="MathJax-Span-1059"><span style="display: inline-block; position: relative; width: 1.539em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.873em, 4.101em, -999.997em); top: -3.993em; left: 0em;"><span class="mo" id="MathJax-Span-1060" style="font-family: STIXGeneral-Regular;">→</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.925em;"><span class="mi" id="MathJax-Span-1061" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mo stretchy="false">→</mo><mi>H</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-95">\rightarrow_H</script></span> is also the set of all precedences (of all orders) and defines a partial order on <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-96-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1062" style="width: 1.027em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.822em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1063"><span class="mi" id="MathJax-Span-1064" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-96">H</script></span> (total order if sequential a.k.a. antisymmetric).</p><p><strong>Extending History</strong><br>
A history can be extended by discarding pending invocations and/or by appending responses to pending invocations.</p><p>Discarding might not always work:<br>
<img src="https://i.imgur.com/hSOoSxp.png" alt=""></p><p><strong>Formal linearizability</strong><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-97-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1065" style="width: 1.027em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.822em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1066"><span class="mi" id="MathJax-Span-1067" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-97">H</script></span> is linearizable if there exists an extension <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-98-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>H</mi><mo>&amp;#x2032;</mo></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1068" style="width: 1.437em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.181em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.283em, 1001.181em, 2.359em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1069"><span class="msup" id="MathJax-Span-1070"><span style="display: inline-block; position: relative; width: 1.13em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.771em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1071" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.352em; left: 0.822em;"><span class="mo" id="MathJax-Span-1072" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>H</mi><mo>′</mo></msup></math></span></span><script type="math/tex" id="MathJax-Element-98">H'</script></span> such that H’ is equivalent to a legal history S <strong>AND</strong><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-99-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msup><mi>H</mi><mo>&amp;#x2032;</mo></msup></mrow></msub><mo>&amp;#x2286;</mo><msub><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mi>S</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1073" style="width: 4.818em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.947em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.796em, 1003.947em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1074"><span class="msubsup" id="MathJax-Span-1075"><span style="display: inline-block; position: relative; width: 1.847em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.873em, 4.101em, -999.997em); top: -3.993em; left: 0em;"><span class="mo" id="MathJax-Span-1076" style="font-family: STIXGeneral-Regular;">→</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.788em; left: 0.925em;"><span class="texatom" id="MathJax-Span-1077"><span class="mrow" id="MathJax-Span-1078"><span class="msup" id="MathJax-Span-1079"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.566em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1080" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.249em; left: 0.617em;"><span class="mo" id="MathJax-Span-1081" style="font-size: 50%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-1082" style="font-family: STIXGeneral-Regular;">⊆</span><span class="msubsup" id="MathJax-Span-1083"><span style="display: inline-block; position: relative; width: 1.386em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.873em, 4.101em, -999.997em); top: -3.993em; left: 0em;"><span class="mo" id="MathJax-Span-1084" style="font-family: STIXGeneral-Regular;">→</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.925em;"><span class="mi" id="MathJax-Span-1085" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><msup><mi>H</mi><mo>′</mo></msup></mrow></msub><mo>⊆</mo><msub><mo stretchy="false">→</mo><mi>S</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-99">\rightarrow_{H'} \subseteq \rightarrow_S</script></span></p><p>An <strong>object</strong> is linearizable if all possible executions are linearizable.</p><p><strong>Composability of linearizability (Kompositionalität)</strong><br>
History H is linearizable <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-100-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x21D4;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1086" style="width: 1.181em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.898em, 1000.976em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1087"><span class="mo" id="MathJax-Span-1088" style="font-family: STIXGeneral-Regular;">⇔</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.753em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">⇔</mo></math></span></span><script type="math/tex" id="MathJax-Element-100">\Leftrightarrow</script></span> <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-101-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x2200;</mi><mi>x</mi><mo>:</mo><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>x</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1089" style="width: 4.306em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.537em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1003.537em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1090"><span class="mi" id="MathJax-Span-1091" style="font-family: STIXGeneral-Regular;">∀</span><span class="mi" id="MathJax-Span-1092" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1093" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">:</span><span class="mi" id="MathJax-Span-1094" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-1095"><span class="mrow" id="MathJax-Span-1096"><span class="mo" id="MathJax-Span-1097" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-1098" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">∀</mi><mi>x</mi><mo>:</mo><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-101">\forall x : H|x</script></span> linearizable.<br>
So H is modular:</p><ul>
<li>Linearizability of objects can be proven in isolation.</li>
<li>Independently implemented objects can be composed.</li>
</ul><p>(Reason being that time is dense). Property sometimes referred to as local property.</p><p>Works for lock-free, but with locking you can have deadlocks.</p><p><strong>Non-blocking of linearizability</strong><br>
No thread needs to wait for another thread in this model.</p><p><strong>Formal sequential consistency</strong><br>
Linearizable <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-102-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x21D2;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1099" style="width: 1.181em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.847em, 1000.925em, 2.769em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1100"><span class="mo" id="MathJax-Span-1101" style="font-family: STIXGeneral-Regular;">⇒</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.122em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">⇒</mo></math></span></span><script type="math/tex" id="MathJax-Element-102">\Rightarrow</script></span> Sequential consistency<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-103-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1102" style="width: 1.027em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.822em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1103"><span class="mi" id="MathJax-Span-1104" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-103">H</script></span> is sequential consistent if there exists an extension <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-104-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>H</mi><mo>&amp;#x2032;</mo></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1105" style="width: 1.437em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.181em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.283em, 1001.181em, 2.359em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1106"><span class="msup" id="MathJax-Span-1107"><span style="display: inline-block; position: relative; width: 1.13em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.771em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1108" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.352em; left: 0.822em;"><span class="mo" id="MathJax-Span-1109" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>H</mi><mo>′</mo></msup></math></span></span><script type="math/tex" id="MathJax-Element-104">H'</script></span> such that <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-105-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>H</mi><mo>&amp;#x2032;</mo></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1110" style="width: 1.437em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.181em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.283em, 1001.181em, 2.359em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1111"><span class="msup" id="MathJax-Span-1112"><span style="display: inline-block; position: relative; width: 1.13em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.771em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1113" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.352em; left: 0.822em;"><span class="mo" id="MathJax-Span-1114" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>H</mi><mo>′</mo></msup></math></span></span><script type="math/tex" id="MathJax-Element-105">H'</script></span> is <strong>equivalent</strong> to a legal sequential history <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-106-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1115" style="width: 0.72em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.566em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.566em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1116"><span class="mi" id="MathJax-Span-1117" style="font-family: STIXGeneral-Italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></span></span><script type="math/tex" id="MathJax-Element-106">S</script></span>, <em>and that’s it</em>.<br>
No order needed between threads.</p><p>Sequential consistency is not composable (Modularität).<br>
Proof by contradiction:</p><p>Another example where <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-107-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>p</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1118" style="width: 2.001em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.642em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.591em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1119"><span class="mi" id="MathJax-Span-1120" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-1121"><span class="mrow" id="MathJax-Span-1122"><span class="mo" id="MathJax-Span-1123" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-1124" style="font-family: STIXGeneral-Italic;">p</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-107">H|p</script></span> and <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-108-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>q</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1125" style="width: 2.001em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.642em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.642em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1126"><span class="mi" id="MathJax-Span-1127" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-1128"><span class="mrow" id="MathJax-Span-1129"><span class="mo" id="MathJax-Span-1130" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-1131" style="font-family: STIXGeneral-Italic;">q</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>q</mi></math></span></span><script type="math/tex" id="MathJax-Element-108">H|q</script></span> is sequentially consistent, but <em>NOT</em> <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-109-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1132" style="width: 1.027em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.822em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1133"><span class="mi" id="MathJax-Span-1134" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-109">H</script></span> (circular dependency):</p><p><img src="https://i.imgur.com/fkCKeUz.png" alt=""></p><p>Yet another example using non-sequential consistency, where <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-110-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>A</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1135" style="width: 2.205em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.796em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.744em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1136"><span class="mi" id="MathJax-Span-1137" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-1138"><span class="mrow" id="MathJax-Span-1139"><span class="mo" id="MathJax-Span-1140" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-1141" style="font-family: STIXGeneral-Italic;">A</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-110">H|A</script></span> sequentially consisten and <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-111-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>B</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1142" style="width: 2.205em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.796em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.796em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1143"><span class="mi" id="MathJax-Span-1144" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="texatom" id="MathJax-Span-1145"><span class="mrow" id="MathJax-Span-1146"><span class="mo" id="MathJax-Span-1147" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-1148" style="font-family: STIXGeneral-Italic;">B</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-111">H|B</script></span> is sequential consistent, but <em>NOT</em> <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-112-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1149" style="width: 1.027em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.822em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1150"><span class="mi" id="MathJax-Span-1151" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-112">H</script></span> (circular dependency).</p><p><img src="https://i.imgur.com/SFPY2mQ.png" alt=""></p><p>Simply have a dependency arrow from left to right (but only thread-wise).<br>
Then add more arrows according to the <strong>sequential specification</strong>.<br>
And last find a path (legal sequential history) during the path.</p><p><strong>Flag principle (sequential consistency)</strong><br>
Violated by default. However if you use volatile, no in-thread re-ordering is possible.</p><p>A memory fence at <strong>volatile</strong> or end of synchronized automatically flushes memory.</p><p><strong>Consensus</strong><br>
Is <strong>wait-free</strong> (returns in finite time)!<br>
Is <strong>valid</strong>: The common decision value is some thread’s input.<br>
Is <strong>consistent</strong> (all threads decide the same value).</p><pre><code>public interface Consesus&lt;T&gt; {
    T decide (T value);
}
</code></pre><p><img src="https://i.imgur.com/uHHrltH.png" alt=""></p><p><strong>Consensus number</strong><br>
A class C (for example atomic register) solves n-thread consensus if there exist a consensus protocol using any number of objects of class C and any number of atomic registers.<br>
The consensus number is the largest <strong>n</strong>, such that C solves <em>n-thread</em> consensus.</p><p><strong>Theorem: Atomic (read/write) registers have consensus number 1</strong></p><p><strong>Theorem: Test-and-set registers have consensus number 2</strong></p><p><strong>Theorem: Compare-And-Swap registers have infinite consensus number</strong></p><pre><code class="code=java hljs"><span class="hljs-keyword">class</span> <span class="hljs-title">CASConsensus</span> {
    <span class="hljs-keyword">private</span> final <span class="hljs-keyword">int</span> FIRST = <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">private</span> AtomicInteger r = <span class="hljs-keyword">new</span> AtomicInteger(FIRST); <span class="hljs-comment">// supports CAS</span>
    <span class="hljs-keyword">private</span> AtomicIntegerArray propose[];    <span class="hljs-comment">// suffices to be atomic register</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">decide</span> (<span class="hljs-params">Object <span class="hljs-keyword">value</span></span>) </span>{
        <span class="hljs-keyword">int</span> i = ThreadID.<span class="hljs-keyword">get</span>(); proposed.<span class="hljs-keyword">set</span>(i,<span class="hljs-keyword">value</span>);
        <span class="hljs-keyword">if</span> (r.compareAndSet(FIRST, i)) <span class="hljs-comment">// I won</span>
               <span class="hljs-keyword">return</span> proposed[i]; <span class="hljs-comment">// = value</span>
        <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">return</span> proposed[r.<span class="hljs-keyword">get</span>()]
    }
}
</code></pre><p>ABA problem?</p><p><strong>Theorem: There is no lock-free implementation of a FIFO queue with atomic registers</strong><br>
By proving that the FIFO queue has consensus number 2 you automatically proved for <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-113-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1152" style="width: 0.669em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.515em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1000.464em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1153"><span class="mi" id="MathJax-Span-1154" style="font-family: STIXGeneral-Italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-113">n</script></span> threads &gt; 1.</p><p>There is a proposed array and the thread A writes a 0 in arr[0] and the thread B writes 1 in arr[1].<br>
Then a thread takes a value from the queue (the first element is a red ball, the second a black ball).<br>
Whoever got the black ball, this value will be taken for the common decision value.</p><p><strong>Thereom: Wait-free FIFO queues, LIFO Stack, TAS, getAndSet, getAndIncrement have consensus number 2</strong><br>
Therefore I can’t implement any of the above using atomic registers!</p><p><em>AKA consensus hierarchy</em></p><h2 id="transactional-memory"><a class="anchor hidden-xs" href="#transactional-memory" title="transactional-memory"><span class="octicon octicon-link"></span></a>Transactional Memory</h2><p>Sources:<br>
Goal: Remove the burden of synchronization from the programmer and place it in the system.</p><p>What we really meant when doing the bank account problem, was an atomic section without deadlocks etc.:</p><pre><code class="code=java hljs">atomic {
    a.withdraw(amount);
    b.deposit(amount);
}
</code></pre><p>What we had to do:</p><pre><code class="code=java hljs"><span class="hljs-keyword">if</span>(b &lt; a) swap(a,b);
<span class="hljs-keyword">synchronized</span>(a) {
    <span class="hljs-keyword">synchronized</span>(b) {
        a.withdraw(amount);
        b.deposit(amount);
    } 
}
</code></pre><p>This is the idea behind transactional memory ™. <em>Declarative approach</em> (I just think what the program should fulfill, not how it’s done).<br>
For example the garbage collection is a declarative approach to memory managment.<br>
<em>Optimistic by design</em>!<br>
It is <em>composable by design</em>.</p><ul>
<li>Such an atomic block is called a <em>transaction</em>.</li>
<li>Made visible atomically.</li>
<li>Either preserves initial or the final state, but not any intermediate states.</li>
<li>During a transaction it freezes the entire global state (snapshot) and operates on this snapshot then! (What would make sense is if at the end they would change the state using a super multi CAS).</li>
</ul><p>Transaction appear serialized (appear as though they are sequential).</p><p>Basically copied database transaction ACID model and removed the durability and called it memory transaction.</p><ul>
<li>Atomicity</li>
<li>Consistency guarantee (always works with consistant data using snapshots)!</li>
<li>Isolation</li>
<li>Durability (Transaction effects will survive power loss).</li>
</ul><p>Transactional memory ACI.</p><p>Implementation methods:<br>
<strong>Use a big fat lock</strong><br>
<strong>Concurrency control</strong><br>
Control read / write operations in transaction.<br>
Then Super-Multi CAS the new values and check whether the old values are still identical and restart the process in case it isn’t the same.</p><p>In praxis a transaction is directly aborted, as soon as a modified value is read or it is written to a modified value.</p><p>Hardware TM x86 (Also Haskell, Clojure &amp; Java):</p><pre><code>xbegin L0
...
L0: //jumps here if something goes wrong.
...
</code></pre><p>In Intel a transaction can be interrupted even if there is no problem, it doesn’t even guarantee starvation.</p><p>Blue gene super computer: After n-tries do a big fat lock. Better: Use back-off with spinners.</p><p>Zombie transaction (what if you don’t do transaction isolated):</p><pre><code class="code=java hljs">atomic {
    a = a + <span class="hljs-number">10</span>;
    b = b + <span class="hljs-number">10</span>;
    c = <span class="hljs-number">1</span> / (a-b); <span class="hljs-regexp">//</span>division <span class="hljs-keyword">by</span> zero. Inconsistent state.
}
atomic{
    a = a - <span class="hljs-number">10</span>;
    b = b + <span class="hljs-number">10</span>;
    c = <span class="hljs-number">1</span> / (a-b);
}
</code></pre><p>Also the ABA problem can happen wihtout isolation.</p><p><strong>Strong isolation vs. weak isolation</strong><br>
What happens when shared state accessed by a transaction, is also accessed by a non-transaction thread.<br>
Strong isolation will still detect changes and restart the transaction.</p><p><strong>What happens in nested transactions</strong><br>
<strong>Flat nesting</strong> (like java synchronized).<br>
<strong>Closed nesting</strong> (like enhanced comments).<br>
Nested transactions commit to the parent transition.</p><pre><code>void withdraw(final int amount){
    atomic {
        int old_val = balance.get();
        balance.set(old_val - amount);
    }
}
void deposit(final int amount) {
    atomic {
        int old_val = balance.get();
        balance.set(old_val + amount);
    }
}
</code></pre><p><strong>I/O operations</strong><br>
How are I/O operations defined?</p><p><strong>Reference-based STMs (What we use)</strong><br>
Mutable state is put into special variables (objects)!<br>
These variables can only be modified inside a transaction (solves weak vs. isolation problem).<br>
Everything else is immutable (or local to the transaction and therefore mutable).</p><p>Each transaction is a <strong>Runnable</strong> object.</p><pre><code class="code=java hljs"><span class="hljs-keyword">class</span> <span class="hljs-title">AccountSTM</span> {
    <span class="hljs-keyword">private</span> final Integer id;
    <span class="hljs-keyword">private</span> final Ref.View&lt;Integer&gt; balance;
    AccountSTM(<span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> balance) {
        <span class="hljs-keyword">this</span>.id = <span class="hljs-keyword">new</span> Integer(id);
        <span class="hljs-keyword">this</span>.balance = STM.newRef(balance);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">withdraw</span>(<span class="hljs-params">final <span class="hljs-keyword">int</span> amount</span>) </span>{
        STM.atomic(<span class="hljs-keyword">new</span> Runnable() {<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">int</span> old_val = balance.<span class="hljs-keyword">get</span>();
        balance.<span class="hljs-keyword">set</span>(old_val - amount);
        }}); 
    }
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">deposit</span>(<span class="hljs-params">final <span class="hljs-keyword">int</span> amount</span>) </span>{
        STM.atomic(<span class="hljs-keyword">new</span> Runnable() {<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">int</span> old_val = balance.<span class="hljs-keyword">get</span>();
        balance.<span class="hljs-keyword">set</span>(old_val + amount);
        }}); 
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getBalance</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">int</span> result = STM.atomic(
        <span class="hljs-keyword">new</span> Callable&lt;Integer&gt;() {
            <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">call</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">int</span> result = balance.<span class="hljs-keyword">get</span>();
                <span class="hljs-keyword">return</span> result;
            }
        }
        );
    }
}
</code></pre><p>But we will use the atomic syntax for this lecture.</p><pre><code class="code=java hljs">
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">transfer</span><span class="hljs-params">(<span class="hljs-keyword">final</span> AccountSTM a, <span class="hljs-keyword">final</span> AccountSTM b, <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> amount)</span> </span>{
    atomic {
        <span class="hljs-keyword">if</span> (a.balance.get() &lt; amount)
            STM.retry(); <span class="hljs-comment">//will start at the very beginning of the transaction</span>
        a.withdraw(amount);
        b.deposit(amount);
    }
}
</code></pre><p>Something similar to condition variables are called <strong>retry</strong> this transactional memory syntax.<br>
When retry is called, transaction aborts and will be completely retried when any of the variables that were read, change!</p><p>Without retry it can happen that you get a livelock and if you use retry you can get deadlocks.</p><pre><code>atomic {
    if (x == 0)
        retry;
    y = 1;
}
atomic&nbsp;{
    x = 1;

}
</code></pre><p><strong>Simplest STM implementation</strong><br>
Threads that run trasactions with thread states:</p><ul>
<li>active</li>
<li>aborted</li>
<li>commited</li>
</ul><p>All transactions are ordered. A global clock counts all commits.</p><p>A transaction calls read on an object.</p><ol>
<li>Check if the object is in the write set -&gt; return this (new version).</li>
<li>Otherwise check if object’s time stamp &lt;= transaction’s birthdate.<br>
2a. If not throw aborted exception<br>
2b. Otherwise add new copy of the object to the read-set. (In order to later check if it had changed).</li>
</ol><p>A transaction calls write:</p><ol>
<li>If object is not in write set, create a compy of it in the write-set.</li>
</ol><p>Commit (Should happen atomically or with mutexes):</p><ol>
<li>Lock all objects of read- and write-set (in some defined order to avoid deadlocks).</li>
<li>Check that all objects in the read set provide a time stamp &lt;= birthdate of the transaction, otherwise return “abort”.</li>
<li>Increment and get the value T of current global clock.</li>
<li>Copy each element of the write set back to global memory with timestamp T.</li>
<li>Release all locks and return “commit”.</li>
</ol><p><strong>Dining philosophers:</strong></p><pre><code>private static class Fork {
    public final Ref.View&lt;Boolean&gt; inUse = STM.newRef(false);
}
class PhilosopherThread extends Thread {
    private final int meals;
    private final Fork left;
    private final Fork right;
    private void pickUpBothForks() {
        STM.atomic(new Runnable() { public void run() {
            if (left.inUse.get() || right.inUse.get())
                STM.retry();
            left.inUse.set(true);
            right.inUse.set(true);
        }});
    }
    private void putDownForks() {
        STM.atomic(new Runnable() { public void run() {
            left.inUse.set(false);
            right.inUse.set(false);
        }});
    }
}
</code></pre><p>Scala STM actually does I/O routines without actually checking the write transaction of the memory.</p><p><strong>Distributed memory &amp; Message Passing</strong></p><p>Tasks cooperate via message passing. The postman rings the house in order to get access to the thread.<br>
MPI (Message passing interface) de facto standard of programming huge computers.</p><p><img src="https://i.imgur.com/J2KX5IJ.png" alt=""></p><p><strong>More lock words:</strong><br>
<strong>Starvation-freedom not guaranteed</strong><br>
<strong>Priority inversion:</strong> Low priority thread holds a resource that a high proiority is<br>
<strong>Locks are not composable</strong><br>
Locks are not necessairly composable (Deadlock freedom bank account problem).<br>
<strong>Pessimistic</strong><br>
<strong>Association with locks</strong> When composing locks, document all possible locks.</p><p><strong>Non-isolated locking</strong><br>
Distributed computing: Local balance (every thread has a counter).<br>
Somehow they must exchange amounts of coarse granularity.<br>
One way of doing this is letting all threads sleep.<br>
Another way of doing this is to have a dynamic array for each thread with all transactions. This queue can then be read read-only.</p><h2 id="messages"><a class="anchor hidden-xs" href="#messages" title="messages"><span class="octicon octicon-link"></span></a>Messages</h2><p>Synchronous: Sender blocks until message is received.<br>
Asynchronous: Sender fires-and-forgets (placed into a buffer for receiver to get).</p><p><strong>The actor model</strong><br>
As input he gets messages:</p><ul>
<li>He can send a finite amount of messages to other actors.</li>
<li>Initiate a new behavior (state)</li>
<li>Create a finite set of new actors.</li>
</ul><p>There is no global ordering (It doesn’t matter if A sends a message before B, sequential consistent).</p><p>The actor model allows to modify the graph (the channels) and can allocate resources.</p><p><strong>Event-driven programming model</strong><br>
The actors react to messages, which makes it an <em>event-driven model</em>.<br>
A GUI is typically implemented using actors.</p><p><strong>Distributor</strong><br>
Have an array of all the actors you want to pass the message to.<br>
Distribute an incoming message to the currently indexed actor and go to the next array element in a round-robin way.</p><p><strong>Serializer</strong><br>
Is basically an actor which takes any kind of messages and redirects it to the next actor.</p><p><strong>CSP (Communicating sequential processes)</strong>:<br>
A process algebra by Tony Hoare.</p><p>Fun fact: Uses # to indicate <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-114-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2260;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1155" style="width: 0.873em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.669em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1156"><span class="mo" id="MathJax-Span-1157" style="font-family: STIXGeneral-Regular;">≠</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>≠</mo></math></span></span><script type="math/tex" id="MathJax-Element-114">\neq</script></span></p><p><strong>Conway’s problem</strong><br>
80-characters column into 125-character columns and replace all <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-115-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2217;</mo><mo>&amp;#x2217;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1158" style="width: 1.335em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.078em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1001.027em, 2.666em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1159"><span class="mo" id="MathJax-Span-1160" style="font-family: STIXGeneral-Regular;">∗</span><span class="mo" id="MathJax-Span-1161" style="font-family: STIXGeneral-Regular;">∗</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>∗</mo><mo>∗</mo></math></span></span><script type="math/tex" id="MathJax-Element-115">**</script></span> with <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-116-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mrow><mspace width=&quot;mediummathspace&quot; /><mspace width=&quot;mediummathspace&quot; /></mrow><mo>&amp;#x005E;</mo></mover></mrow></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1162" style="width: 0.771em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.617em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.693em, 1000.617em, 2.359em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1163"><span class="texatom" id="MathJax-Span-1164"><span class="mrow" id="MathJax-Span-1165"><span class="munderover" id="MathJax-Span-1166"><span style="display: inline-block; position: relative; width: 0.566em; height: 0px;"><span style="position: absolute; clip: rect(3.845em, 1000.515em, 4.152em, -999.997em); top: -3.993em; left: 0.054em;"><span class="mrow" id="MathJax-Span-1167"><span class="mspace" id="MathJax-Span-1168" style="height: 0em; vertical-align: 0em; width: 0.259em; display: inline-block; overflow: hidden;"></span><span class="mspace" id="MathJax-Span-1169" style="height: 0em; vertical-align: 0em; width: 0.259em; display: inline-block; overflow: hidden;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.076em, 1000.566em, 3.589em, -999.997em); top: -3.584em; left: 0em;"><span class="mo" id="MathJax-Span-1170" style=""><span style="font-family: STIXSizeOneSym;">ˆ</span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.566em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mrow><mspace width="mediummathspace"></mspace><mspace width="mediummathspace"></mspace></mrow><mo>^</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-116">\widehat{\:\:}</script></span></p><p>Describes actor, which squashes these charactor columns:</p><pre><code>*[c:character;west?c]-&gt; //reads west from c (* makes it infinitely repeat)
    [c != ^ -&gt; east!c //if c != *, send it to east
    |c == ^ -&gt; west?c
        [c != ^ -&gt; east!*;east!c
        |c == ^ -&gt; east!^
        ]
    ]
]
</code></pre><p>Go (based on CSP and you have Go routines):<br>
Channels = chan.</p><p><strong>Deadlock in Go:</strong><br>
Since receiving is blocking, it is clear that ok blocks, since c is written afterwards.</p><p><img src="https://i.imgur.com/YT1YxyD.png" alt=""></p><p><strong>Sieve of erasthotenes</strong><br>
Each station removes multiples of the first elemnt received and passes on the remaining elements to the next station.<br>
So here we start with 2:<br>
Generator =&gt; … 9 8 7 6 5 4 3 2<br>
F_2 =&gt; … 9 7 5 3<br>
F_3 =&gt; … 7 5<br>
F_5 =&gt; … 7</p><p>All the last numbers are then pushed into another channel (or fmt.Println(prime));</p><p>All last numbers are prime numbers.<br>
<img src="https://i.imgur.com/5gZYtYr.png" alt=""></p><p><strong>Message passing interface (MPI)</strong><br>
25 year old!<br>
MPI processes are collected into groups.<br>
Go needs to schedule on the processors.<br>
With MPI you can say on how many processory you want to run it.<br>
MPI processes are collected into groups.<br>
A group can have multiple colors.<br>
Group + color = communicator.<br>
Processes can be in multiple communicators.<br>
In a communicator the processes have a rank (ID) between 0 and p-1.<br>
MPI_COMM_WORLD is a communicator in which all processes are located.<br>
Communicators can be renamed.<br>
Subcommunicators can be created.</p><p><strong>SPMD (single program multiple data)</strong><br>
Multiple data = multiple instances.</p><p>A program is simply started multiple times:</p><pre><code>public static void main(String[] args) {
    MPI.Init(args);
    int size = MPI.COMM_WORLD.Size(); //get total number of processes
    int rank = MPI.COMM_WORLD.Rank(); //get rank of current process.
    MPI.finalize();
}
</code></pre><p>Is this decentralized?</p><pre><code>void Comm.Send( //Comm is a communicator
    Object buf, //pointer to data to be sent
    int offset,
    int count, //number of items to be sent.
    Datatype datatype, //Since each language has different types, pass datatype
    int dest, //destination process id
    int tag //data id tag. One can send multiple data messages. We can wait until a specific data is received.
)

void Comm.SSend() //synchronous send
</code></pre><pre><code>void Comm.Recv( // synchronous (surprisingly there is an asynchronous one)
    Object buf, //pointer to data to be sent
    int offset,
    int count, //number of items to be sent.
    Datatype datatype, //Since each language has different types, pass datatype
    int src, //source process id OR MPI_ANY_SOURCE
    int tag //data id tag or MPI_ANY_TAG?
)
</code></pre><p>Asynchronous message requires local storage (since the sender does not wait).</p><p>Rank 0 process merges the code in sorting.</p><p><strong>Blocking / Non-blocking (immediate)</strong><br>
Buffer at sender and receiver.<br>
Blocking: Wait until message was sent from home (but it need not to be received!)<br>
Non-blocking: Returns immediately.<br>
A non-blocking send might not even have sent the message (we don’t know when the post guy comes). Can be thought as a buffer.</p><p>Deadlock:<br>
A sends to B and B sends to A. Now they both wait until they receive the code.<br>
You can also use sendrecv which atomically does both.</p><p>Best: Use non-blocking send!<br>
Then in the end call Waitall (until all sends have been sent and all receive have been received).</p><p><strong>Reduce</strong><br>
The reduce command somehow adds everything together on the network (or any processor) and at the END will be received at root 0.</p><p>This can be implemented in <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-117-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi><mo stretchy=&quot;false&quot;>(</mo><mi>log</mi><mo>&amp;#x2061;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi></mrow><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1171" style="width: 4.255em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.486em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1003.435em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1172"><span class="mi" id="MathJax-Span-1173" style="font-family: STIXGeneral-Italic;">O</span><span class="mo" id="MathJax-Span-1174" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1175" style="font-family: STIXGeneral-Regular;">log</span><span class="mo" id="MathJax-Span-1176"></span><span class="texatom" id="MathJax-Span-1177" style="padding-left: 0.207em;"><span class="mrow" id="MathJax-Span-1178"><span class="mi" id="MathJax-Span-1179" style="font-family: STIXGeneral-Italic;">p</span></span></span><span class="mo" id="MathJax-Span-1180" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mrow class="MJX-TeXAtom-ORD"><mi>p</mi></mrow><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-117">O(\log{p})</script></span> by using a binary tree for example.</p><p>Allreduce puts the result into all processes.</p><p><strong>Broadcast</strong><br>
Move data to all other processors (So the identity function).</p><p><strong>Scatter</strong>: Takes a vector and puts it to all other processes.<br>
<strong>Gather</strong>: Takes the values from each process and puts it into a vector of a certain root process.<br>
<strong>Allgather</strong>: Takes the values and puts it to all other values.<br>
<strong>Alltoall</strong>: Transposes vector elements (first processor gets the first element of each processor, second processor gets the second element of each processor).</p><p><strong>Compute digits of PI</strong></p><pre><code>MPI.Init(args);
... // declare and initialize variables (sum=0 etc.)
int size = MPI.COMM_WORLD.Size();
int rank = MPI.COMM_WORLD.Rank();
for(int i=0; i&lt;numSteps; i=i+size) {
    double x=(i + 0.5) * h;
    sum += 4.0/(1.0 + x*x);
}
if (rank != 0) {
    double [] sendBuf = new double []{sum};
    // 1-element array containing sum
    MPI.COMM_WORLD.Send(sendBuf, 0, 1, MPI.DOUBLE, 0, 10);
}
else { // rank == 0
    //Alternatively use reduce here.
    double [] recvBuf = new double [1] ; //has to be array
    for (int src=1 ; src&lt;P; src++) {
        MPI.COMM_WORLD.Recv(recvBuf, 0, 1, MPI.DOUBLE, src, 10);
        sum += recvBuf[0];
    }
}
double pi = h * sum; // output pi at rank 0 only! MPI.Finalize();
</code></pre><p><strong>Compute matrix vector multiplication</strong><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-118-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>A</mi><mo>&amp;#x2217;</mo><mi>x</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1181" style="width: 2.666em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.154em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1002.154em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1182"><span class="mi" id="MathJax-Span-1183" style="font-family: STIXGeneral-Italic;">A</span><span class="mo" id="MathJax-Span-1184" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">∗</span><span class="mi" id="MathJax-Span-1185" style="font-family: STIXGeneral-Italic; padding-left: 0.259em;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>∗</mo><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-118">A*x</script></span><br>
First broadcast x and row of A.<br>
Then compute the values locally.<br>
Then gather the result of each processor into the resulting array.</p><p><strong>Proof of lower bound of comparison based sorting</strong><br>
Number of possible sort permutations: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-119-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>!</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1186" style="width: 1.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.873em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.771em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1187"><span class="mi" id="MathJax-Span-1188" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1189" style="font-family: STIXGeneral-Regular;">!</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>!</mo></math></span></span><script type="math/tex" id="MathJax-Element-119">n!</script></span><br>
Using a comparison, I can at most half the possibility space (called possibility space).<br>
Es gibt <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-120-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>!</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1190" style="width: 1.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.873em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.771em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1191"><span class="mi" id="MathJax-Span-1192" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1193" style="font-family: STIXGeneral-Regular;">!</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>!</mo></math></span></span><script type="math/tex" id="MathJax-Element-120">n!</script></span> Zustände, also hat der Baum <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-121-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>!</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1194" style="width: 1.078em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.873em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.771em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1195"><span class="mi" id="MathJax-Span-1196" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1197" style="font-family: STIXGeneral-Regular;">!</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>!</mo></math></span></span><script type="math/tex" id="MathJax-Element-121">n!</script></span> Blätter und somit hat es die Höhe <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-122-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi><mo>=</mo><mi>log</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>!</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1198" style="width: 5.791em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.716em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1004.664em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1199"><span class="mi" id="MathJax-Span-1200" style="font-family: STIXGeneral-Italic;">h</span><span class="mo" id="MathJax-Span-1201" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-1202" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">log</span><span class="mo" id="MathJax-Span-1203"></span><span class="mo" id="MathJax-Span-1204" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1205" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1206" style="font-family: STIXGeneral-Regular;">!</span><span class="mo" id="MathJax-Span-1207" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi><mo>=</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo>!</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-122">h = \log(n!)</script></span><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-123-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi><mo>&amp;#x2265;</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>&amp;#x2212;</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>2</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1208" style="width: 19.47em; display: inline-block;"><span style="display: inline-block; position: relative; width: 15.935em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1015.884em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1209"><span class="mi" id="MathJax-Span-1210" style="font-family: STIXGeneral-Italic;">h</span><span class="mo" id="MathJax-Span-1211" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≥</span><span class="mi" id="MathJax-Span-1212" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1213" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-1214" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-1215" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1216" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1217" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1218" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">+</span><span class="mi" id="MathJax-Span-1219" style="font-family: STIXGeneral-Italic; padding-left: 0.259em;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1220" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-1221" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-1222" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1223" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1224" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">−</span><span class="mn" id="MathJax-Span-1225" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">1</span><span class="mo" id="MathJax-Span-1226" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1227" style="font-family: STIXGeneral-Regular;">+</span><span class="mo" id="MathJax-Span-1228" style="font-family: STIXGeneral-Regular;">.</span><span class="mo" id="MathJax-Span-1229" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">.</span><span class="mo" id="MathJax-Span-1230" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">.</span><span class="mo" id="MathJax-Span-1231" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">+</span><span class="mi" id="MathJax-Span-1232" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1233" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-1234" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-1235" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1236" style="font-family: STIXGeneral-Italic;">n</span><span class="texatom" id="MathJax-Span-1237"><span class="mrow" id="MathJax-Span-1238"><span class="mo" id="MathJax-Span-1239" style="font-family: STIXGeneral-Regular;">/</span></span></span><span class="mn" id="MathJax-Span-1240" style="font-family: STIXGeneral-Regular;">2</span><span class="mo" id="MathJax-Span-1241" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi><mo>≥</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>2</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-123">h \geq log(n)+log(n-1)+...+log(n/2)</script></span><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-124-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2265;</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>n</mi><mi>log</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>2</mn><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2265;</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>log</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2212;</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>n</mi><mo>&amp;#x2265;</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1242" style="width: 20.904em; display: inline-block;"><span style="display: inline-block; position: relative; width: 17.113em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.539em, 1017.062em, 3.076em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1243"><span class="mo" id="MathJax-Span-1244" style="font-family: STIXGeneral-Regular;">≥</span><span class="mfrac" id="MathJax-Span-1245" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.464em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.259em, 4.152em, -999.997em); top: -4.403em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-1246" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.361em, 4.152em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-1247" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.464em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.464em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span><span class="mi" id="MathJax-Span-1248" style="font-family: STIXGeneral-Italic;">n</span><span class="mi" id="MathJax-Span-1249" style="font-family: STIXGeneral-Regular; padding-left: 0.207em;">log</span><span class="mo" id="MathJax-Span-1250"></span><span class="mo" id="MathJax-Span-1251" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1252" style="font-family: STIXGeneral-Italic;">n</span><span class="texatom" id="MathJax-Span-1253"><span class="mrow" id="MathJax-Span-1254"><span class="mo" id="MathJax-Span-1255" style="font-family: STIXGeneral-Regular;">/</span></span></span><span class="mn" id="MathJax-Span-1256" style="font-family: STIXGeneral-Regular;">2</span><span class="mo" id="MathJax-Span-1257" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1258" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≥</span><span class="mfrac" id="MathJax-Span-1259" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.464em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.259em, 4.152em, -999.997em); top: -4.403em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-1260" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.361em, 4.152em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-1261" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.464em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.464em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span><span class="mi" id="MathJax-Span-1262" style="font-family: STIXGeneral-Regular;">log</span><span class="mo" id="MathJax-Span-1263"></span><span class="mo" id="MathJax-Span-1264" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1265" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1266" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1267" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">−</span><span class="mfrac" id="MathJax-Span-1268" style="padding-left: 0.259em;"><span style="display: inline-block; position: relative; width: 0.464em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.259em, 4.152em, -999.997em); top: -4.403em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-1269" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.361em, 4.152em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-1270" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.464em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.464em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span><span class="mi" id="MathJax-Span-1271" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1272" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">≥</span><span class="mfrac" id="MathJax-Span-1273" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.464em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.384em, 1000.259em, 4.152em, -999.997em); top: -4.403em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-1274" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.361em, 4.152em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-1275" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.464em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.464em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span><span class="mi" id="MathJax-Span-1276" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1277" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-1278" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-1279" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1280" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1281" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>≥</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>n</mi><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>2</mn><mo stretchy="false">)</mo><mo>≥</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>n</mi><mo>≥</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-124">\geq \frac{1}{2} n \log(n/2) \geq \frac{1}{2} \log(n) - \frac{1}{2} n \geq \frac{1}{2} log(n)</script></span></p><p><strong>Sorting networks</strong></p><p><img src="https://i.imgur.com/6lkFWej.png" alt=""></p><pre><code>void compare(int[] a, int i, int j, boolean dir) {
    if (dir==(a[i]&gt;a[j])){
        int t=a[i]; a[i]=a[j]; a[j]=t;
    }
}

</code></pre><p><strong>Oblivious algorithm</strong><br>
The memory accesses are identical without caring about the input.<br>
Sorting networks are oblivious.<br>
This network actually shows which values have to be compared (which actual elements, not which lane).</p><p>Compares a lot of elements multiple times, optimizing this is an open question?<br>
<img src="https://i.imgur.com/7Igij5P.png" alt=""></p><p>On infinite processors <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-125-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mi>n</mi><mo>&amp;#x2212;</mo><mn>3</mn></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1282" style="width: 3.384em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.769em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1002.718em, 2.871em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1283"><span class="mn" id="MathJax-Span-1284" style="font-family: STIXGeneral-Regular;">2</span><span class="mi" id="MathJax-Span-1285" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1286" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">−</span><span class="mn" id="MathJax-Span-1287" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">3</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mi>n</mi><mo>−</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-125">2n-3</script></span> comparisons have to happen (on infinite amount of processors).<br>
<img src="https://i.imgur.com/ZuaMXqL.png" alt=""></p><p><strong>Odd-Even transposition sort</strong><br>
First compare odd-even, then compare even-odd and totally do n of these layers.</p><p>This on infinite processors needs <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-126-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1288" style="width: 0.669em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.515em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1000.464em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1289"><span class="mi" id="MathJax-Span-1290" style="font-family: STIXGeneral-Italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-126">n</script></span> comparisons (at most)!<br>
<img src="https://i.imgur.com/lZi8LPd.png" alt=""></p><p><strong>PRAM:Parallel random access machine</strong><br>
<strong>Shared Memory Access Model</strong></p><p>ER : Explicit read (only a specific element)<br>
CR: Processors can simultanously read from ANY location.<br>
EW: Process can write to a distinct memory locatins.<br>
CW: Process can write to ANY memory locatins.<br>
CRCW: Bestes model!</p><p>We generally assume <strong>CREW</strong> model.</p><p><strong>Max element on n^2 processors</strong><br>
For CRCW: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-127-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;>O</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1291" style="width: 2.462em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.001em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(2.257em, 1001.949em, 3.384em, -999.997em); top: -3.071em; left: 0em;"><span class="mrow" id="MathJax-Span-1292"><span class="texatom" id="MathJax-Span-1293"><span class="mrow" id="MathJax-Span-1294"><span class="mi" id="MathJax-Span-1295" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span class="mo" id="MathJax-Span-1296" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-1297" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-1298" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 3.076em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">O</mi></mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-127">\mathcal{O}(1)</script></span>, for CREW: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-128-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x03A9;</mi><mo stretchy=&quot;false&quot;>(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1299" style="width: 4.869em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.998em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1003.947em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1300"><span class="mi" id="MathJax-Span-1301" style="font-family: STIXGeneral-Regular;">Ω</span><span class="mo" id="MathJax-Span-1302" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1303" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1304" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-1305" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-1306" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1307" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1308" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1309" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Ω</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-128">\Omega(log(n))</script></span> (since max writes at most).<br>
First init <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-129-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>,</mo><mn>0</mn></mrow></msub><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1310" style="width: 5.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.46em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1004.408em, 2.974em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1311"><span class="msubsup" id="MathJax-Span-1312"><span style="display: inline-block; position: relative; width: 1.437em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1313" style="font-family: STIXGeneral-Italic;">P</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.617em;"><span class="texatom" id="MathJax-Span-1314"><span class="mrow" id="MathJax-Span-1315"><span class="mi" id="MathJax-Span-1316" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-1317" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="mn" id="MathJax-Span-1318" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-1319" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-1320" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1321" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1322" style="font-family: STIXGeneral-Italic;">u</span><span class="mi" id="MathJax-Span-1323" style="font-family: STIXGeneral-Italic;">e</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>,</mo><mn>0</mn></mrow></msub><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></math></span></span><script type="math/tex" id="MathJax-Element-129">P_{i,0} = true</script></span> in parallel.<br>
For all <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-130-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>n</mi><mn>2</mn></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1324" style="width: 1.181em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.232em, 1000.976em, 2.359em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1325"><span class="msubsup" id="MathJax-Span-1326"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.384em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1327" style="font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.352em; left: 0.515em;"><span class="mn" id="MathJax-Span-1328" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>n</mi><mn>2</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-130">n^2</script></span> comparisons for <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-131-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi><mo>,</mo><mi>j</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1329" style="width: 1.335em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.078em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1001.078em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1330"><span class="mi" id="MathJax-Span-1331" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-1332" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-1333" style="font-family: STIXGeneral-Italic; padding-left: 0.207em;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mo>,</mo><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-131">i,j</script></span>: P_{i,j} = (A_i &lt; A_j) ? false;<br>
For all <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-132-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1334" style="width: 0.412em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.31em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.31em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1335"><span class="mi" id="MathJax-Span-1336" style="font-family: STIXGeneral-Italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-132">i</script></span>: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-133-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>,</mo><mn>0</mn></mrow></msub><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mo stretchy=&quot;false&quot;>&amp;#x21D2;</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>=</mo><msub><mi>A</mi><mi>i</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1337" style="width: 12.093em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.89em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1009.89em, 2.974em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1338"><span class="msubsup" id="MathJax-Span-1339"><span style="display: inline-block; position: relative; width: 1.437em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.617em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1340" style="font-family: STIXGeneral-Italic;">P</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.617em;"><span class="texatom" id="MathJax-Span-1341"><span class="mrow" id="MathJax-Span-1342"><span class="mi" id="MathJax-Span-1343" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-1344" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="mn" id="MathJax-Span-1345" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mo" id="MathJax-Span-1346" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="mi" id="MathJax-Span-1347" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1348" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1349" style="font-family: STIXGeneral-Italic;">u</span><span class="mi" id="MathJax-Span-1350" style="font-family: STIXGeneral-Italic;">e</span><span class="mo" id="MathJax-Span-1351" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">⇒</span><span class="mi" id="MathJax-Span-1352" style="font-family: STIXGeneral-Italic; padding-left: 0.31em;">m</span><span class="mi" id="MathJax-Span-1353" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-1354" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1355" style="font-family: STIXGeneral-Regular; padding-left: 0.31em;">=</span><span class="msubsup" id="MathJax-Span-1356" style="padding-left: 0.31em;"><span style="display: inline-block; position: relative; width: 0.873em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.566em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mi" id="MathJax-Span-1357" style="font-family: STIXGeneral-Italic;">A</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -3.84em; left: 0.617em;"><span class="mi" id="MathJax-Span-1358" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>,</mo><mn>0</mn></mrow></msub><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mo stretchy="false">⇒</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>=</mo><msub><mi>A</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-133">P_{i,0} = true \Rightarrow max = A_i</script></span></p><p><strong>Zero-one principle</strong><br>
If a network can sort all <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-134-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mi>n</mi></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1359" style="width: 1.181em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.976em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.335em, 1000.976em, 2.359em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1360"><span class="msubsup" id="MathJax-Span-1361"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-1362" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 0.515em;"><span class="mi" id="MathJax-Span-1363" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mi>n</mi></msup></math></span></span><script type="math/tex" id="MathJax-Element-134">2^n</script></span> sequences of <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-135-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>0</mn><mo>&amp;#x2032;</mo></msup><mi>s</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1364" style="width: 1.539em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.232em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.591em, 1001.232em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1365"><span class="msup" id="MathJax-Span-1366"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-1367" style="font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 0.515em;"><span class="mo" id="MathJax-Span-1368" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mi" id="MathJax-Span-1369" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>0</mn><mo>′</mo></msup><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-135">0's</script></span> and <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-136-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>1</mn><mo>&amp;#x2032;</mo></msup><mi>s</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1370" style="width: 1.539em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.232em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.591em, 1001.232em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1371"><span class="msup" id="MathJax-Span-1372"><span style="display: inline-block; position: relative; width: 0.822em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.412em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-1373" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 0.515em;"><span class="mo" id="MathJax-Span-1374" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="mi" id="MathJax-Span-1375" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>1</mn><mo>′</mo></msup><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-136">1's</script></span> it can also sort an arbitrary sequence of <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-137-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1376" style="width: 0.669em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.515em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.949em, 1000.464em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1377"><span class="mi" id="MathJax-Span-1378" style="font-family: STIXGeneral-Italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-137">n</script></span> sequences.<br>
So if it can sort <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-138-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>01001</mn></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1379" style="width: 3.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.564em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1002.462em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1380"><span class="mn" id="MathJax-Span-1381" style="font-family: STIXGeneral-Regular;">01001</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>01001</mn></math></span></span><script type="math/tex" id="MathJax-Element-138">01001</script></span> to <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-139-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>00011</mn></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1382" style="width: 3.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.564em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1002.462em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1383"><span class="mn" id="MathJax-Span-1384" style="font-family: STIXGeneral-Regular;">00011</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>00011</mn></math></span></span><script type="math/tex" id="MathJax-Element-139">00011</script></span>.</p><p><strong>Bitonic-(merge)Sort</strong><br>
Sequential execution: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-140-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>&amp;#x22C5;</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x22C5;</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1385" style="width: 10.505em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.609em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1008.558em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1386"><span class="mi" id="MathJax-Span-1387" style="font-family: STIXGeneral-Italic;">O</span><span class="mo" id="MathJax-Span-1388" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1389" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1390" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">⋅</span><span class="mi" id="MathJax-Span-1391" style="font-family: STIXGeneral-Italic; padding-left: 0.259em;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1392" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-1393" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-1394" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1395" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1396" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1397" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">⋅</span><span class="mi" id="MathJax-Span-1398" style="font-family: STIXGeneral-Italic; padding-left: 0.259em;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1399" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-1400" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-1401" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1402" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1403" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1404" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>⋅</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-140">O(n \cdot log(n) \cdot log(n))</script></span>.<br>
Parallel execution: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-141-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi><mo stretchy=&quot;false&quot;>(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x22C5;</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1405" style="width: 8.916em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.277em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1007.226em, 2.923em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1406"><span class="mi" id="MathJax-Span-1407" style="font-family: STIXGeneral-Italic;">O</span><span class="mo" id="MathJax-Span-1408" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1409" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1410" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-1411" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-1412" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1413" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1414" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1415" style="font-family: STIXGeneral-Regular; padding-left: 0.259em;">⋅</span><span class="mi" id="MathJax-Span-1416" style="font-family: STIXGeneral-Italic; padding-left: 0.259em;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1417" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-1418" style="font-family: STIXGeneral-Italic;">g</span><span class="mo" id="MathJax-Span-1419" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1420" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-1421" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1422" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-141">O(log(n) \cdot log(n))</script></span></p><p>There is exactly one point where the sequence goes from monotonic increasing to decreasing.<br>
This wraps-around!</p><p>All possible sequences:<br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-142-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>0</mn><mi>i</mi></msup><msup><mn>1</mn><mi>j</mi></msup><msup><mn>0</mn><mi>k</mi></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1423" style="width: 3.076em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.513em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.181em, 1002.513em, 2.359em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1424"><span class="msubsup" id="MathJax-Span-1425"><span style="display: inline-block; position: relative; width: 0.771em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-1426" style="font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 0.515em;"><span class="mi" id="MathJax-Span-1427" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-1428"><span style="display: inline-block; position: relative; width: 0.771em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.412em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-1429" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 0.515em;"><span class="mi" id="MathJax-Span-1430" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-1431"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-1432" style="font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 0.515em;"><span class="mi" id="MathJax-Span-1433" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>0</mn><mi>i</mi></msup><msup><mn>1</mn><mi>j</mi></msup><msup><mn>0</mn><mi>k</mi></msup></math></span></span><script type="math/tex" id="MathJax-Element-142">0^i 1^j 0^k</script></span><br>
<span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-143-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>1</mn><mi>i</mi></msup><msup><mn>0</mn><mi>j</mi></msup><msup><mn>1</mn><mi>k</mi></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1434" style="width: 3.076em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.513em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.181em, 1002.513em, 2.359em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1435"><span class="msubsup" id="MathJax-Span-1436"><span style="display: inline-block; position: relative; width: 0.771em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.412em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-1437" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 0.515em;"><span class="mi" id="MathJax-Span-1438" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-1439"><span style="display: inline-block; position: relative; width: 0.771em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.464em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-1440" style="font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 0.515em;"><span class="mi" id="MathJax-Span-1441" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-1442"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px;"><span style="position: absolute; clip: rect(3.179em, 1000.412em, 4.152em, -999.997em); top: -3.993em; left: 0em;"><span class="mn" id="MathJax-Span-1443" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; top: -4.403em; left: 0.515em;"><span class="mi" id="MathJax-Span-1444" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>1</mn><mi>i</mi></msup><msup><mn>0</mn><mi>j</mi></msup><msup><mn>1</mn><mi>k</mi></msup></math></span></span><script type="math/tex" id="MathJax-Element-143">1^i 0^j 1^k</script></span></p><p>More than <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-144-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><mi>n</mi><mn>2</mn></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1445" style="width: 0.873em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.335em, 1000.72em, 2.718em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1446"><span class="mfrac" id="MathJax-Span-1447"><span style="display: inline-block; position: relative; width: 0.464em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.152em, -999.997em); top: -4.403em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-1448" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.361em, 4.152em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-1449" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.464em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.464em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mi>n</mi><mn>2</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-144">\frac{n}{2}</script></span> <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-145-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn><mi>s</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1450" style="width: 1.13em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.925em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1451"><span class="mn" id="MathJax-Span-1452" style="font-family: STIXGeneral-Regular;">1</span><span class="mi" id="MathJax-Span-1453" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-145">1s</script></span> then the lower part is filled with 1’s and the upper sequence is bitonic.<br>
Less than <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-146-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><mi>n</mi><mn>2</mn></mfrac></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1454" style="width: 0.873em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.72em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.335em, 1000.72em, 2.718em, -999.997em); top: -2.2em; left: 0em;"><span class="mrow" id="MathJax-Span-1455"><span class="mfrac" id="MathJax-Span-1456"><span style="display: inline-block; position: relative; width: 0.464em; height: 0px; margin-right: 0.105em; margin-left: 0.105em;"><span style="position: absolute; clip: rect(3.537em, 1000.361em, 4.152em, -999.997em); top: -4.403em; left: 50%; margin-left: -0.151em;"><span class="mi" id="MathJax-Span-1457" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(3.384em, 1000.361em, 4.152em, -999.997em); top: -3.635em; left: 50%; margin-left: -0.151em;"><span class="mn" id="MathJax-Span-1458" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 3.998em;"></span></span><span style="position: absolute; clip: rect(0.873em, 1000.464em, 1.232em, -999.997em); top: -1.278em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top-width: 1.3px; border-top-style: solid; width: 0.464em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.078em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mi>n</mi><mn>2</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-146">\frac{n}{2}</script></span> <span class="mathjax"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-147-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn><mi>s</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1459" style="width: 1.13em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.925em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.744em, 1000.925em, 2.718em, -999.997em); top: -2.559em; left: 0em;"><span class="mrow" id="MathJax-Span-1460"><span class="mn" id="MathJax-Span-1461" style="font-family: STIXGeneral-Regular;">0</span><span class="mi" id="MathJax-Span-1462" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.564em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-147">0s</script></span> then the upper part is filled with 0’s and the lower sequence is bitonic.</p><p><img src="https://i.imgur.com/x3f4Jql.png" alt=""><br>
<img src="https://i.imgur.com/TFspQcN.png" alt=""></p><p><strong>Automatic (Inner) Loop Automatization</strong><br>
<em>Validity</em>: All executions of the most inner loop must be independent of each other to paralllelize this loop.<br>
<em>Profitability</em>: Usually if stride is one (or dense), better defined as when the computational cost of the vectorised version is faster than the non-parallel version.</p><p><em>Static array expansion</em>:</p><pre><code>for(int i = 0; i &lt; n; ++i) {
    tmp = A[i];
    A[i] = B[i];
    B[i] = tmp;
}
for(int i = 0; i &lt; n; ++i) {
    TMP[i] = A[i];
    A[i] = B[i];
    B[i] = TMP[i];
}
</code></pre><p>This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.<br>
This is text to make HackMD not wrap.</p></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav"><li class=""><a href="#parallel-programming-notes">Parallel programming notes</a><ul class="nav"><li><a href="#java-threads-tasks">Java Threads (Tasks)</a></li><li><a href="#parallel-prefix-sum-algorithm">Parallel prefix sum algorithm</a></li><li><a href="#packing">Packing</a></li><li><a href="#critical-section">Critical section</a></li><li><a href="#volatile-keyword">Volatile keyword</a></li><li><a href="#state-space-diagram-which-leads-to-mutual-exclusions">State space diagram (which leads to mutual exclusions)</a></li></ul></li><li><a href="#process-q">Process Q</a><ul class="nav"><li><a href="#state-space-diagram-which-leads-to-deadlocks">State-space diagram (which leads to deadlocks)</a></li><li><a href="#state-space-diagram-which-leads-to-starvation">State-space diagram (which leads to starvation)</a></li><li><a href="#events-and-precedence">Events and precedence</a></li><li><a href="#locks">Locks</a></li><li><a href="#dekker’s-lock-dekker’s-algorithm">Dekker’s lock (dekker’s algorithm)</a></li><li><a href="#peterson-lock">Peterson Lock</a></li><li><a href="#my-proof">My proof</a></li><li><a href="#filter-lock">Filter lock</a></li><li><a href="#safe-swmr-single-writer-multiple-reader-register">Safe SWMR (single writer multiple reader) register</a></li><li><a href="#bakery-algorithm-on-swmr">Bakery algorithm (on SWMR)</a></li><li><a href="#bakery-algorithm-n-processes">Bakery algorithm (n processes)</a></li><li><a href="#-processes-lt--variables"># Processes &lt;= # Variables</a></li><li><a href="#atomicboolean">AtomicBoolean</a></li><li><a href="#practical-lock-implementations-spin-locks">Practical lock implementations (Spin locks)</a></li><li><a href="#javautilconcurrentlock-interface">Java.util.concurrent.Lock interface</a></li><li><a href="#bank-account-problem">Bank account problem</a></li><li><a href="#solving-deadlocks">Solving deadlocks</a></li><li><a href="#consistency-models">Consistency models</a></li><li><a href="#transactional-memory">Transactional Memory</a></li><li><a href="#messages">Messages</a></li></ul></li></ul></div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;"  >
        <div class="toc"><ul class="nav"><li class=""><a href="#parallel-programming-notes">Parallel programming notes</a><ul class="nav"><li><a href="#java-threads-tasks">Java Threads (Tasks)</a></li><li><a href="#parallel-prefix-sum-algorithm">Parallel prefix sum algorithm</a></li><li><a href="#packing">Packing</a></li><li><a href="#critical-section">Critical section</a></li><li><a href="#volatile-keyword">Volatile keyword</a></li><li><a href="#state-space-diagram-which-leads-to-mutual-exclusions">State space diagram (which leads to mutual exclusions)</a></li></ul></li><li><a href="#process-q">Process Q</a><ul class="nav"><li><a href="#state-space-diagram-which-leads-to-deadlocks">State-space diagram (which leads to deadlocks)</a></li><li><a href="#state-space-diagram-which-leads-to-starvation">State-space diagram (which leads to starvation)</a></li><li><a href="#events-and-precedence">Events and precedence</a></li><li><a href="#locks">Locks</a></li><li><a href="#dekker’s-lock-dekker’s-algorithm">Dekker’s lock (dekker’s algorithm)</a></li><li><a href="#peterson-lock">Peterson Lock</a></li><li><a href="#my-proof">My proof</a></li><li><a href="#filter-lock">Filter lock</a></li><li><a href="#safe-swmr-single-writer-multiple-reader-register">Safe SWMR (single writer multiple reader) register</a></li><li><a href="#bakery-algorithm-on-swmr">Bakery algorithm (on SWMR)</a></li><li><a href="#bakery-algorithm-n-processes">Bakery algorithm (n processes)</a></li><li><a href="#-processes-lt--variables"># Processes &lt;= # Variables</a></li><li><a href="#atomicboolean">AtomicBoolean</a></li><li><a href="#practical-lock-implementations-spin-locks">Practical lock implementations (Spin locks)</a></li><li><a href="#javautilconcurrentlock-interface">Java.util.concurrent.Lock interface</a></li><li><a href="#bank-account-problem">Bank account problem</a></li><li><a href="#solving-deadlocks">Solving deadlocks</a></li><li><a href="#consistency-models">Consistency models</a></li><li><a href="#transactional-memory">Transactional Memory</a></li><li><a href="#messages">Messages</a></li></ul></li></ul></div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
